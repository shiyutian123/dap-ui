{"remainingRequest":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/babel-loader/lib/index.js!/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/packages/plugins/load-resource/load-resource.plugin.js","dependencies":[{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/packages/plugins/load-resource/load-resource.plugin.js","mtime":1583476762830},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoKICogQEF1dGhvcjogeW91ciBuYW1lCiAqIEBEYXRlOiAyMDIwLTAzLTAxIDEzOjM4OjE0CiAqIEBMYXN0RWRpdFRpbWU6IDIwMjAtMDMtMDEgMTU6NDE6MzcKICogQExhc3RFZGl0b3JzOiBQbGVhc2Ugc2V0IExhc3RFZGl0b3JzCiAqIEBEZXNjcmlwdGlvbjogSW4gVXNlciBTZXR0aW5ncyBFZGl0CiAqIEBGaWxlUGF0aDogL2RhcC12dWUtdWkvcGFja2FnZXMvcGx1Z2lucy9sb2FkLXJlc291cmNlL2xvYWQtcmVzb3VyY2UudHMKICovCnZhciBMb2FkUmVzb3VyY2VQbHVnaW4gPSB7CiAgaW5zdGFsbDogZnVuY3Rpb24gaW5zdGFsbChWdWUsIG9wdHMpIHsKICAgIC8qKgogICAgICogQGRlc2NyaXB0aW9uOiDlvILmraXliqDovb3otYTmupAKICAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXNvdXJjZVVybCAtIOi1hOa6kOmTvuaOpSAKICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0YWcgLSDotYTmupDmoIfnrb4KICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZCAtIOagh+etvueahGlkCiAgICAgKiBAcmV0dXJuOgogICAgICovCiAgICBWdWUuYXN5bmNMb2FkUmVzb3VyY2UgPSBmdW5jdGlvbiAocmVzb3VyY2VVcmwsIHRhZywgaWQpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpICE9PSBudWxsKSB7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpOwogICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2lkJywgaWQpOwoKICAgICAgICAgIHN3aXRjaCAodGFnKSB7CiAgICAgICAgICAgIGNhc2UgJ2xpbmsnOgogICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdyZWwnLCAnc3R5bGVzaGVldCcpOwogICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvY3NzJyk7CiAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCByZXNvdXJjZVVybCk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICdzY3JpcHQnOgogICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdzcmMnLCByZXNvdXJjZVVybCk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICAgIH0pOwogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChlbGVtZW50KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKCiAgICBWdWUucHJvdG90eXBlLiRhc3luY0xvYWRSZXNvdXJjZSA9IFZ1ZS5hc3luY0xvYWRSZXNvdXJjZTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IExvYWRSZXNvdXJjZVBsdWdpbjs="},{"version":3,"sources":["/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/packages/plugins/load-resource/load-resource.plugin.js"],"names":["LoadResourcePlugin","install","Vue","opts","asyncLoadResource","resourceUrl","tag","id","Promise","resolve","reject","document","getElementById","element","createElement","setAttribute","addEventListener","err","getElementsByTagName","appendChild","prototype","$asyncLoadResource"],"mappings":"AAAA;;;;;;;;AAQA,IAAMA,kBAAkB,GAAG;AACzBC,EAAAA,OADyB,mBACjBC,GADiB,EACZC,IADY,EACN;AACjB;;;;;;;AAOAD,IAAAA,GAAG,CAACE,iBAAJ,GAAwB,UAAUC,WAAV,EAAuBC,GAAvB,EAA4BC,EAA5B,EAAgC;AACtD,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,YAAIC,QAAQ,CAACC,cAAT,CAAwBL,EAAxB,MAAgC,IAApC,EAA0C;AACxCE,UAAAA,OAAO;AACR,SAFD,MAEO;AACL,cAAMI,OAAO,GAAGF,QAAQ,CAACG,aAAT,CAAuBR,GAAvB,CAAhB;AACAO,UAAAA,OAAO,CAACE,YAAR,CAAqB,IAArB,EAA2BR,EAA3B;;AACA,kBAAOD,GAAP;AACE,iBAAK,MAAL;AACEO,cAAAA,OAAO,CAACE,YAAR,CAAqB,KAArB,EAA4B,YAA5B;AACAF,cAAAA,OAAO,CAACE,YAAR,CAAqB,MAArB,EAA6B,UAA7B;AACAF,cAAAA,OAAO,CAACE,YAAR,CAAqB,MAArB,EAA6BV,WAA7B;AACA;;AACF,iBAAK,QAAL;AACEQ,cAAAA,OAAO,CAACE,YAAR,CAAqB,KAArB,EAA4BV,WAA5B;AACA;;AACF;AACE;AAVJ;;AAYAQ,UAAAA,OAAO,CAACG,gBAAR,CAAyB,MAAzB,EAAiC,YAAM;AACrCP,YAAAA,OAAO;AACR,WAFD;AAGAI,UAAAA,OAAO,CAACG,gBAAR,CAAyB,OAAzB,EAAkC,UAACC,GAAD,EAAS;AACzCP,YAAAA,MAAM,CAACO,GAAD,CAAN;AACD,WAFD;AAGAN,UAAAA,QAAQ,CAACO,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyCC,WAAzC,CAAqDN,OAArD;AACD;AACF,OA1BM,CAAP;AA2BD,KA5BD;;AA6BAX,IAAAA,GAAG,CAACkB,SAAJ,CAAcC,kBAAd,GAAmCnB,GAAG,CAACE,iBAAvC;AACD;AAvCwB,CAA3B;AA0CA,eAAeJ,kBAAf","sourcesContent":["/*\n * @Author: your name\n * @Date: 2020-03-01 13:38:14\n * @LastEditTime: 2020-03-01 15:41:37\n * @LastEditors: Please set LastEditors\n * @Description: In User Settings Edit\n * @FilePath: /dap-vue-ui/packages/plugins/load-resource/load-resource.ts\n */\nconst LoadResourcePlugin = {\n  install(Vue, opts) {\n    /**\n     * @description: 异步加载资源\n     * @param {String} resourceUrl - 资源链接 \n     * @param {String} tag - 资源标签\n     * @param {String} id - 标签的id\n     * @return:\n     */\n    Vue.asyncLoadResource = function (resourceUrl, tag, id) {\n      return new Promise((resolve, reject) => {\n        if (document.getElementById(id) !== null) {\n          resolve();\n        } else {\n          const element = document.createElement(tag);\n          element.setAttribute('id', id);\n          switch(tag) {\n            case 'link':\n              element.setAttribute('rel', 'stylesheet');\n              element.setAttribute('type', 'text/css');\n              element.setAttribute('href', resourceUrl);\n              break;\n            case 'script':\n              element.setAttribute('src', resourceUrl);\n              break;\n            default:\n              break;\n          }\n          element.addEventListener('load', () => {\n            resolve();\n          });\n          element.addEventListener('error', (err) => {\n            reject(err);\n          });\n          document.getElementsByTagName('head')[0].appendChild(element);\n        }\n      });\n    };\n    Vue.prototype.$asyncLoadResource = Vue.asyncLoadResource;\n  }\n};\n\nexport default LoadResourcePlugin;\n"]}]}