{"remainingRequest":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/babel-loader/lib/index.js!/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/packages/components/bpmn-process-flow/dap-ui-bpmn-process-flow.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/packages/components/bpmn-process-flow/dap-ui-bpmn-process-flow.vue","mtime":1583476762820},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICogYXMgWDJKUyBmcm9tICJ4MmpzIjsKdmFyIEJwbW5KUzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEYXBVaUJwbW5Qcm9jZXNzRmxvdyIsCiAgcHJvcHM6IHsKICAgIGV4dHJhUHJvcDogewogICAgICB0eXBlOiBPYmplY3QKICAgIH0sCiAgICBsb2FkaW5nOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHByaW1hcnlDb2xvcjogJ3JnYig0OCwgMTI5LCAyNTEpJywKICAgICAgbW9kZWxlcjogdW5kZWZpbmVkLAogICAgICBtb2RhbENvbmZpZzogewogICAgICAgIHZpc2libGU6IGZhbHNlLAogICAgICAgIHRpdGxlOiAi5rWB56iL5Zu+IiwKICAgICAgICBzaXplOiAibGFyZ2UiLAogICAgICAgIG1vZGFsQ2xhc3M6ICJkYXAtdWktYnBtbi1wcm9jZXNzLWZsb3ciCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2FkUmVzb3VyY2VzOiBmdW5jdGlvbiBsb2FkUmVzb3VyY2VzKF9yZWYpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBkb21haW4gPSBfcmVmLmRvbWFpbiwKICAgICAgICAgIGNhbGxiYWNrID0gX3JlZi5jYWxsYmFjazsKICAgICAgdGhpcy5tb2RhbENvbmZpZy52aXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy4kYXN5bmNMb2FkUmVzb3VyY2UoIiIuY29uY2F0KGRvbWFpbiwgIi9icG1uLWpzL2RpYWdyYW0tanMuY3NzIiksICJsaW5rIiwgImRpYWdyYW0tanMtY3NzIikudGhlbigpOwogICAgICB0aGlzLiRhc3luY0xvYWRSZXNvdXJjZSgiIi5jb25jYXQoZG9tYWluLCAiL2JwbW4tanMvY3NzL2JwbW4uY3NzIiksICJsaW5rIiwgImJwbW4tY3NzIikudGhlbigpOwogICAgICB0aGlzLiRhc3luY0xvYWRSZXNvdXJjZSgiIi5jb25jYXQoZG9tYWluLCAiL2JwbW4tanMvYnBtbi1tb2RlbGVyLmRldmVsb3BtZW50LmpzIiksICJzY3JpcHQiLCAiYnBtbmpzIikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgQnBtbkpTID0gd2luZG93LkJwbW5KUzsKCiAgICAgICAgX3RoaXMuaW5pdEJwbW5DYW52YXMoKTsKCiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTsKICAgICAgfSk7CiAgICB9LAogICAgaW5pdEJwbW5DYW52YXM6IGZ1bmN0aW9uIGluaXRCcG1uQ2FudmFzKCkgewogICAgICB0aGlzLm1vZGVsZXIgPSBuZXcgQnBtbkpTKHsKICAgICAgICBjb250YWluZXI6ICIjanMtY2FudmFzIgogICAgICB9KTsKICAgICAgdmFyIGJqc1Bvd2VyZWRCeURvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5ianMtcG93ZXJlZC1ieSIpWzBdOwoKICAgICAgaWYgKGJqc1Bvd2VyZWRCeURvbSkgewogICAgICAgIGJqc1Bvd2VyZWRCeURvbS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICB9CgogICAgICB2YXIgZGpzUGFsZXR0ZURvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5kanMtcGFsZXR0ZSIpWzBdOwoKICAgICAgaWYgKGRqc1BhbGV0dGVEb20pIHsKICAgICAgICBkanNQYWxldHRlRG9tLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgIH0KICAgIH0sCiAgICBpbXBvcnREaWFncmFtRm9ySnNvbjogZnVuY3Rpb24gaW1wb3J0RGlhZ3JhbUZvckpzb24oZGlhZ3JhbUpTT04pIHsKICAgICAgdmFyIHgyanMgPSBuZXcgWDJKUygpOwogICAgICB2YXIgeG1sID0geDJqcy5qczJ4bWwoZGlhZ3JhbUpTT04pOwogICAgICB0aGlzLmltcG9ydERpYWdyYW0oeG1sKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBkanNHcm91cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5kanMtZ3JvdXAiKTsKCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRqc0dyb3VwLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGRqc0dyb3VwW2ldLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZGpzR3JvdXBbaV0uYWRkRXZlbnRMaXN0ZW5lcigiZGJsY2xpY2siLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBkanNHcm91cFtpXS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBkanNTZWdtZW50RHJhZ2dlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuZGpzLXNlZ21lbnQtZHJhZ2dlciIpOwoKICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBkanNTZWdtZW50RHJhZ2dlcnMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICAgIGRqc1NlZ21lbnREcmFnZ2Vyc1tfaV0uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgZGpzU2VnbWVudERyYWdnZXJzW19pXS5hZGRFdmVudExpc3RlbmVyKCJkYmxjbGljayIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBkanNTZWdtZW50RHJhZ2dlcnNbX2ldLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHJlY3REb21zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInJlY3QiKTsKCiAgICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCByZWN0RG9tcy5sZW5ndGg7IF9pMisrKSB7CiAgICAgICAgICAgIHJlY3REb21zW19pMl0uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcmVjdERvbXNbX2kyXS5hZGRFdmVudExpc3RlbmVyKCJkYmxjbGljayIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICByZWN0RG9tc1tfaTJdLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGltcG9ydERpYWdyYW06IGZ1bmN0aW9uIGltcG9ydERpYWdyYW0oZGlhcmFtWE1MKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBfdGhpczIubW9kZWxlci5pbXBvcnRYTUwoZGlhcmFtWE1MLCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBjYW52YXMgPSBfdGhpczIubW9kZWxlci5nZXQoImNhbnZhcyIpOyAvLyB6b29tIHRvIGZpdCBmdWxsIHZpZXdwb3J0CgoKICAgICAgICAgIGNhbnZhcy56b29tKCJmaXQtdmlld3BvcnQiKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQ2FuY2VsOiBmdW5jdGlvbiBoYW5kbGVDYW5jZWwoKSB7CiAgICAgIHRoaXMubW9kYWxDb25maWcudmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLm1vZGVsZXIuZGVzdHJveSgpOwogICAgICB0aGlzLm1vZGVsZXIgPSB1bmRlZmluZWQ7CiAgICB9LAogICAgaGFuZGxlT2s6IGZ1bmN0aW9uIGhhbmRsZU9rKCkgewogICAgICB0aGlzLm1vZGFsQ29uZmlnLnZpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICBmaWxsQ29sb3I6IGZ1bmN0aW9uIGZpbGxDb2xvcigpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgbm9kZVBhdGggPSB0aGlzLmV4dHJhUHJvcC5ub2RlUGF0aDsKCiAgICAgIGlmICghbm9kZVBhdGggfHwgbm9kZVBhdGgubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgc2hhcGVFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5kanMtZWxlbWVudC5kanMtc2hhcGUiKTsKICAgICAgdmFyIGNvbm5FbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5kanMtZWxlbWVudC5kanMtY29ubmVjdGlvbiIpOyAvLyBUT0RPOiDmm7/mjaLmtYHnqIvoioLngrnnmoTmoLflvI/kuLrkuqflk4HmoLflvI8KCiAgICAgIHRoaXMucmVwbGFjZU5vZGVUb0N1c3RvbShzaGFwZUVsZW1lbnRzLCB0aGlzLmV4dHJhUHJvcC5ub2Rlcyk7CiAgICAgIHRoaXMucmVwbGFjZUNvbm5Ub0N1c3RvbSgpOwogICAgICB0aGlzLnJlcGxhY2VHYXRld2F5VG9DdXN0b20oKTsKCiAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGkpIHsKICAgICAgICB2YXIgbm9kZSA9IG5vZGVQYXRoW2ldOwoKICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNoYXBlRWxlbWVudHMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmIChfdGhpczMuZ2V0RWxlRGF0YUlkKHNoYXBlRWxlbWVudHNbal0pID09PSBub2RlLnRvIHx8IF90aGlzMy5nZXRFbGVEYXRhSWQoc2hhcGVFbGVtZW50c1tqXSkudG9VcHBlckNhc2UoKS5pbmRleE9mKG5vZGUudG8pID4gLTEpIHsKICAgICAgICAgICAgICB2YXIgZGpzVmlzdWFsRG9tID0gc2hhcGVFbGVtZW50c1tqXS5xdWVyeVNlbGVjdG9yQWxsKCIuZGpzLXZpc3VhbCIpWzBdOwoKICAgICAgICAgICAgICBpZiAobm9kZS50byA9PT0gIlNUQVJUIiB8fCBub2RlLnRvID09PSAiRU5EIikgewogICAgICAgICAgICAgICAgZGpzVmlzdWFsRG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJjaXJjbGUiKVswXS5zdHlsZS5zdHJva2UgPSAiIi5jb25jYXQoX3RoaXMzLnByaW1hcnlDb2xvcik7CiAgICAgICAgICAgICAgICBkanNWaXN1YWxEb20uZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRleHQiKVswXS5zdHlsZS5maWxsID0gIiIuY29uY2F0KF90aGlzMy5wcmltYXJ5Q29sb3IpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBkanNWaXN1YWxEb20uZ2V0RWxlbWVudHNCeVRhZ05hbWUoInJlY3QiKVswXS5zdHlsZS5zdHJva2UgPSAiIi5jb25jYXQoX3RoaXMzLnByaW1hcnlDb2xvcik7CgogICAgICAgICAgICAgICAgaWYgKGRqc1Zpc3VhbERvbS5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGF0aCIpWzBdKSB7CiAgICAgICAgICAgICAgICAgIGRqc1Zpc3VhbERvbS5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGF0aCIpWzBdLnN0eWxlLmZpbGwgPSAiIi5jb25jYXQoX3RoaXMzLnByaW1hcnlDb2xvcik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZGpzVmlzdWFsRG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZXh0IilbMF0uc3R5bGUuZmlsbCA9ICJyZ2IoMjU1LCAyNTUsIDI1NSkiOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBjb25ucyA9IF90aGlzMy5leHRyYVByb3AuY29ubmVjdHMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gaXRlbS5lbmROb2RlSWQgPT09IG5vZGUudG87CiAgICAgICAgfSk7CgogICAgICAgIGNvbm5zLmZvckVhY2goZnVuY3Rpb24gKGNvbm4pIHsKICAgICAgICAgIGlmIChjb25uLnN0YXJ0Tm9kZUlkLmluZGV4T2YoIkV4Y2x1c2l2ZUdhdGV3YXkiKSA+IC0xKSB7CiAgICAgICAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIGV4Y2x1c2l2ZUdhdGV3YXkgPSBfdGhpczMuZXh0cmFQcm9wLmRlZmluaXRpb25zLnByb2Nlc3MuZXhjbHVzaXZlR2F0ZXdheTsKCiAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGV4Y2x1c2l2ZUdhdGV3YXkpICYmIGV4Y2x1c2l2ZUdhdGV3YXkpIHsKICAgICAgICAgICAgICAgIGV4Y2x1c2l2ZUdhdGV3YXkgPSBbZXhjbHVzaXZlR2F0ZXdheV07CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBleGNsdXNpdmVHYXRld2F5ID0gZXhjbHVzaXZlR2F0ZXdheS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLl9pZCA9PT0gY29ubi5zdGFydE5vZGVJZDsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB2YXIgYmluZ29uR2F0d2F5LCBpbmNvbWluZywgaW5jb21pbmdDb25uOwogICAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTsKICAgICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTsKICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7CgogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB2YXIgX2xvb3AyID0gZnVuY3Rpb24gX2xvb3AyKCkgewogICAgICAgICAgICAgICAgICB2YXIgZ2F0d2F5ID0gX3N0ZXAudmFsdWU7CgogICAgICAgICAgICAgICAgICBpZiAoYmluZ29uR2F0d2F5KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJicmVhayI7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGluY29taW5nID0gZXhjbHVzaXZlR2F0ZXdheS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5faWQgPT09IGNvbm4uc3RhcnROb2RlSWQ7CiAgICAgICAgICAgICAgICAgIH0pWzBdLmluY29taW5nOwoKICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGluY29taW5nKSAmJiBpbmNvbWluZykgewogICAgICAgICAgICAgICAgICAgIGluY29taW5nID0gW2luY29taW5nXTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaW5jb21pbmcuZm9yRWFjaChmdW5jdGlvbiAoaW5jKSB7CiAgICAgICAgICAgICAgICAgICAgaW5jb21pbmdDb25uID0gX3RoaXMzLmV4dHJhUHJvcC5jb25uZWN0cy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmNvbm5JZCA9PT0gaW5jLl9fdGV4dDsKICAgICAgICAgICAgICAgICAgICB9KVswXTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGluY29taW5nQ29ubi5zdGFydE5vZGVJZCA9PT0gbm9kZS5mcm9tKSB7CiAgICAgICAgICAgICAgICAgICAgICBiaW5nb25HYXR3YXkgPSBnYXR3YXk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gZXhjbHVzaXZlR2F0ZXdheVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZXQgPSBfbG9vcDIoKTsKCiAgICAgICAgICAgICAgICAgIGlmIChfcmV0ID09PSAiYnJlYWsiKSBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyOwogICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKGJpbmdvbkdhdHdheSkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBzaGFwZUVsZW1lbnRzLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgICAgICAgIGlmIChfdGhpczMuZ2V0RWxlRGF0YUlkKHNoYXBlRWxlbWVudHNba10pID09PSBiaW5nb25HYXR3YXkuX2lkKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGdEb20gPSBzaGFwZUVsZW1lbnRzW2tdLnF1ZXJ5U2VsZWN0b3JBbGwoIi5kanMtdmlzdWFsIilbMF07CiAgICAgICAgICAgICAgICAgICAgZ0RvbS5nZXRFbGVtZW50c0J5VGFnTmFtZSgicG9seWdvbiIpWzBdLnN0eWxlLnN0cm9rZSA9ICIiLmNvbmNhdChfdGhpczMucHJpbWFyeUNvbG9yKTsKICAgICAgICAgICAgICAgICAgICBnRG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXRoIilbMF0uc3R5bGUuZmlsbCA9ICIiLmNvbmNhdChfdGhpczMucHJpbWFyeUNvbG9yKTsKICAgICAgICAgICAgICAgICAgICBnRG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXRoIilbMF0uc3R5bGUuc3Ryb2tlID0gIiIuY29uY2F0KF90aGlzMy5wcmltYXJ5Q29sb3IpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZm9yICh2YXIgX2sgPSAwOyBfayA8IGNvbm5FbGVtZW50cy5sZW5ndGg7IF9rKyspIHsKICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMy5nZXRFbGVEYXRhSWQoY29ubkVsZW1lbnRzW19rXSkgPT09IGluY29taW5nQ29ubi5jb25uSWQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX2Rqc1Zpc3VhbERvbSA9IGNvbm5FbGVtZW50c1tfa10ucXVlcnlTZWxlY3RvckFsbCgiLmRqcy12aXN1YWwiKVswXTsKCiAgICAgICAgICAgICAgICAgICAgX2Rqc1Zpc3VhbERvbS5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGF0aCIpWzBdLnN0eWxlLnN0cm9rZSA9ICIiLmNvbmNhdChfdGhpczMucHJpbWFyeUNvbG9yKTsKICAgICAgICAgICAgICAgICAgICBfZGpzVmlzdWFsRG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXRoIilbMF0uc3R5bGVbIm1hcmtlci1lbmQiXSA9ICJ1cmwoXCIjc2VxdWVuY2VmbG93LWJsdWVcIikiOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIG91dGdvaW5nID0gYmluZ29uR2F0d2F5Lm91dGdvaW5nOwoKICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShvdXRnb2luZykgJiYgb3V0Z29pbmcpIHsKICAgICAgICAgICAgICAgICAgb3V0Z29pbmcgPSBbb3V0Z29pbmddOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG91dGdvaW5nID0gb3V0Z29pbmcuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLl9fdGV4dCA9PT0gY29ubi5jb25uSWQ7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG91dGdvaW5nLmZvckVhY2goZnVuY3Rpb24gKG91dCkgewogICAgICAgICAgICAgICAgICB2YXIgb3V0Z29pbmdDb25uID0gX3RoaXMzLmV4dHJhUHJvcC5jb25uZWN0cy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5jb25uSWQgPT09IG91dC5fX3RleHQ7CiAgICAgICAgICAgICAgICAgIH0pWzBdOwoKICAgICAgICAgICAgICAgICAgaWYgKG91dGdvaW5nQ29ubiAmJiBvdXRnb2luZ0Nvbm4uZW5kTm9kZUlkID09PSBub2RlLnRvKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2syID0gMDsgX2syIDwgY29ubkVsZW1lbnRzLmxlbmd0aDsgX2syKyspIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczMuZ2V0RWxlRGF0YUlkKGNvbm5FbGVtZW50c1tfazJdKSA9PT0gb3V0Z29pbmdDb25uLmNvbm5JZCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2Rqc1Zpc3VhbERvbTIgPSBjb25uRWxlbWVudHNbX2syXS5xdWVyeVNlbGVjdG9yQWxsKCIuZGpzLXZpc3VhbCIpWzBdOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhdGhEb20gPSBfZGpzVmlzdWFsRG9tMi5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGF0aCIpWzBdOwoKICAgICAgICAgICAgICAgICAgICAgICAgcGF0aERvbS5zdHlsZS5zdHJva2UgPSAiIi5jb25jYXQoX3RoaXMzLnByaW1hcnlDb2xvcik7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGhEb20uc3R5bGVbIm1hcmtlci1lbmQiXSA9ICJ1cmwoXCIjc2VxdWVuY2VmbG93LWJsdWVcIikiOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGhEb20uc3R5bGVbIm1hcmtlci1zdGFydCJdICYmIHBhdGhEb20uc3R5bGVbIm1hcmtlci1zdGFydCJdLmluZGV4T2YoImNvbmRpdGlvbmFsLWRlZmF1bHQtZmxvdy1tYXJrZXItd2hpdGUtZ3JheSIpID4gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoRG9tLnN0eWxlWyJtYXJrZXItc3RhcnQiXSA9ICJ1cmwoXCIjY29uZGl0aW9uYWwtZGVmYXVsdC1mbG93LW1hcmtlci13aGl0ZS1ibHVlXCIpIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjb25uRWxlbWVudHMubGVuZ3RoOyBrKyspIHsKICAgICAgICAgICAgICBpZiAoX3RoaXMzLmdldEVsZURhdGFJZChjb25uRWxlbWVudHNba10pID09PSBjb25uLmNvbm5JZCAmJiBjb25uLnN0YXJ0Tm9kZUlkID09PSBub2RlLmZyb20pIHsKICAgICAgICAgICAgICAgIHZhciBfZGpzVmlzdWFsRG9tMyA9IGNvbm5FbGVtZW50c1trXS5xdWVyeVNlbGVjdG9yQWxsKCIuZGpzLXZpc3VhbCIpWzBdOwogICAgICAgICAgICAgICAgX2Rqc1Zpc3VhbERvbTMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhdGgiKVswXS5zdHlsZS5zdHJva2UgPSAiIi5jb25jYXQoX3RoaXMzLnByaW1hcnlDb2xvcik7CiAgICAgICAgICAgICAgICBfZGpzVmlzdWFsRG9tMy5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGF0aCIpWzBdLnN0eWxlWyJtYXJrZXItZW5kIl0gPSAidXJsKFwiI3NlcXVlbmNlZmxvdy1ibHVlXCIpIjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZVBhdGgubGVuZ3RoOyBpKyspIHsKICAgICAgICBfbG9vcChpKTsKICAgICAgfQogICAgfSwKICAgIHJlcGxhY2VOb2RlVG9DdXN0b206IGZ1bmN0aW9uIHJlcGxhY2VOb2RlVG9DdXN0b20oc2hhcGVFbGVtZW50cywgbm9kZVBhdGgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgc3ZnRG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImpzLWNhbnZhcyIpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzdmciKVswXTsKICAgICAgdmFyIGRlZnNEb20gPSBzdmdEb20uZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRlZnMiKVswXTsKICAgICAgdmFyIGxpbmVyR3JhZGllbnRTdHIgPSAiXG4gICAgICAgIDxtYXJrZXIgaWQ9XCJjb25kaXRpb25hbC1kZWZhdWx0LWZsb3ctbWFya2VyLXdoaXRlLWdyYXlcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgcmVmWD1cIjBcIiByZWZZPVwiMTBcIiBtYXJrZXJXaWR0aD1cIjEwXCIgbWFya2VySGVpZ2h0PVwiMTBcIiBvcmllbnQ9XCJhdXRvXCI+PHBhdGggZD1cIk0gNiA0IEwgMTAgMTZcIiBzdHlsZT1cImZpbGw6IHJnYigyMDUsIDIwNSwgMjA1KTsgc3Ryb2tlLXdpZHRoOiAxcHg7IHN0cm9rZS1saW5lY2FwOiByb3VuZDsgc3Ryb2tlLWRhc2hhcnJheTogMTAwMDAsIDE7IHN0cm9rZTogcmdiKDIwNSwgMjA1LCAyMDUpO1wiPjwvcGF0aD48L21hcmtlcj5cbiAgICAgICAgPG1hcmtlciBpZD1cImNvbmRpdGlvbmFsLWRlZmF1bHQtZmxvdy1tYXJrZXItd2hpdGUtYmx1ZVwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiByZWZYPVwiMFwiIHJlZlk9XCIxMFwiIG1hcmtlcldpZHRoPVwiMTBcIiBtYXJrZXJIZWlnaHQ9XCIxMFwiIG9yaWVudD1cImF1dG9cIj48cGF0aCBkPVwiTSA2IDQgTCAxMCAxNlwiIHN0eWxlPVwiZmlsbDogIi5jb25jYXQodGhpcy5wcmltYXJ5Q29sb3IsICI7IHN0cm9rZS13aWR0aDogMXB4OyBzdHJva2UtbGluZWNhcDogcm91bmQ7IHN0cm9rZS1kYXNoYXJyYXk6IDEwMDAwLCAxOyBzdHJva2U6ICIpLmNvbmNhdCh0aGlzLnByaW1hcnlDb2xvciwgIjtcIj48L3BhdGg+PC9tYXJrZXI+XG4gICAgICAgIDxtYXJrZXIgaWQ9XCJzZXF1ZW5jZWZsb3ctZ3JheVwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiByZWZYPVwiMTFcIiByZWZZPVwiMTBcIiBtYXJrZXJXaWR0aD1cIjEwXCIgbWFya2VySGVpZ2h0PVwiMTBcIiBvcmllbnQ9XCJhdXRvXCI+XG4gICAgICAgICAgICA8Y2lyY2xlIGN4PVwiNlwiIGN5PVwiMTBcIiByPVwiNC41XCIgc3R5bGU9XCJzdHJva2U6IHJnYigyMDUsIDIwNSwgMjA1KTtmaWxsOiByZ2IoMjA1LCAyMDUsIDIwNSk7XCI+PC9jaXJjbGU+XG4gICAgICAgIDwvbWFya2VyPlxuICAgICAgICA8bWFya2VyIGlkPVwic2VxdWVuY2VmbG93LWJsdWVcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgcmVmWD1cIjExXCIgcmVmWT1cIjEwXCIgbWFya2VyV2lkdGg9XCIxMFwiIG1hcmtlckhlaWdodD1cIjEwXCIgb3JpZW50PVwiYXV0b1wiPlxuICAgICAgICAgICAgPGNpcmNsZSBjeD1cIjZcIiBjeT1cIjEwXCIgcj1cIjQuNVwiIHN0eWxlPVwic3Ryb2tlOiAiKS5jb25jYXQodGhpcy5wcmltYXJ5Q29sb3IsICI7ZmlsbDogIikuY29uY2F0KHRoaXMucHJpbWFyeUNvbG9yLCAiO1wiPjwvY2lyY2xlPlxuICAgICAgICA8L21hcmtlcj5cbiAgICAgICAgPG1hcmtlciBpZD1cInNlcXVlbmNlZmxvdy1zdGFydFwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiByZWZYPVwiMTFcIiByZWZZPVwiMTBcIiBtYXJrZXJXaWR0aD1cIjEwXCIgbWFya2VySGVpZ2h0PVwiMTBcIiBvcmllbnQ9XCJhdXRvXCI+XG4gICAgICAgICAgICA8Y2lyY2xlIGN4PVwiNlwiIGN5PVwiMTBcIiByPVwiNC41XCIgc3R5bGU9XCJzdHJva2U6IHVybCgnI3JlZC1vcmFuZ2UnKTtmaWxsOiB1cmwoJyNyZWQtb3JhbmdlJyk7XCI+PC9jaXJjbGU+XG4gICAgICAgIDwvbWFya2VyPlxuICAgICAgICA8bWFya2VyIGlkPVwic2VxdWVuY2VmbG93MVwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiByZWZYPVwiMTFcIiByZWZZPVwiMTBcIiBtYXJrZXJXaWR0aD1cIjEwXCIgbWFya2VySGVpZ2h0PVwiMTBcIiBvcmllbnQ9XCJhdXRvXCI+XG4gICAgICAgICAgICA8Y2lyY2xlIGN4PVwiNlwiIGN5PVwiMTBcIiByPVwiNC41XCIgc3R5bGU9XCJzdHJva2U6IHVybCgnI25vZGUxJyk7ZmlsbDogdXJsKCcjbm9kZTEnKTtcIj48L2NpcmNsZT5cbiAgICAgICAgPC9tYXJrZXI+XG4gICAgICAgIDxtYXJrZXIgaWQ9XCJzZXF1ZW5jZWZsb3cyXCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIHJlZlg9XCIxMVwiIHJlZlk9XCIxMFwiIG1hcmtlcldpZHRoPVwiMTBcIiBtYXJrZXJIZWlnaHQ9XCIxMFwiIG9yaWVudD1cImF1dG9cIj5cbiAgICAgICAgICAgIDxjaXJjbGUgY3g9XCI2XCIgY3k9XCIxMFwiIHI9XCI0LjVcIiBzdHlsZT1cInN0cm9rZTogdXJsKCcjbm9kZTInKTtmaWxsOiB1cmwoJyNub2RlMicpO1wiPjwvY2lyY2xlPlxuICAgICAgICA8L21hcmtlcj5cbiAgICAgICAgPG1hcmtlciBpZD1cInNlcXVlbmNlZmxvdzNcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgcmVmWD1cIjExXCIgcmVmWT1cIjEwXCIgbWFya2VyV2lkdGg9XCIxMFwiIG1hcmtlckhlaWdodD1cIjEwXCIgb3JpZW50PVwiYXV0b1wiPlxuICAgICAgICAgICAgPGNpcmNsZSBjeD1cIjZcIiBjeT1cIjEwXCIgcj1cIjQuNVwiIHN0eWxlPVwic3Ryb2tlOiB1cmwoJyNub2RlMycpO2ZpbGw6IHVybCgnI25vZGUzJyk7XCI+PC9jaXJjbGU+XG4gICAgICAgIDwvbWFya2VyPlxuICAgICAgICA8bWFya2VyIGlkPVwic2VxdWVuY2VmbG93NFwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiByZWZYPVwiMTFcIiByZWZZPVwiMTBcIiBtYXJrZXJXaWR0aD1cIjEwXCIgbWFya2VySGVpZ2h0PVwiMTBcIiBvcmllbnQ9XCJhdXRvXCI+XG4gICAgICAgICAgICA8Y2lyY2xlIGN4PVwiNlwiIGN5PVwiMTBcIiByPVwiNC41XCIgc3R5bGU9XCJzdHJva2U6IHVybCgnI25vZGU0Jyk7ZmlsbDogdXJsKCcjbm9kZTQnKTtcIj48L2NpcmNsZT5cbiAgICAgICAgPC9tYXJrZXI+XG4gICAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD1cIm5vZGUxXCIgeDE9XCIwJVwiIHkxPVwiMCVcIiB4Mj1cIjEwMCVcIiB5Mj1cIjAlXCI+XG4gICAgICAgICAgICA8c3RvcCBvZmZzZXQ9XCIwJVwiIHN0eWxlPVwic3RvcC1jb2xvcjpyZ2IoNjIsMTQ3LDE1Nyk7XG4gICAgICAgICAgICBzdG9wLW9wYWNpdHk6MVwiPjwvc3RvcD5cbiAgICAgICAgICAgIDxzdG9wIG9mZnNldD1cIjEwMCVcIiBzdHlsZT1cInN0b3AtY29sb3I6cmdiKDIyMywyMzcsMjQyKTtcbiAgICAgICAgICAgIHN0b3Atb3BhY2l0eToxXCI+PC9zdG9wPlxuICAgICAgICA8L2xpbmVhckdyYWRpZW50PlxuICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9XCJub2RlMlwiIHgxPVwiMCVcIiB5MT1cIjAlXCIgeDI9XCIxMDAlXCIgeTI9XCIwJVwiPlxuICAgICAgICAgICAgPHN0b3Agb2Zmc2V0PVwiMCVcIiBzdHlsZT1cInN0b3AtY29sb3I6cmdiKDgyLDYxLDE0MSk7XG4gICAgICAgICAgICBzdG9wLW9wYWNpdHk6MVwiPjwvc3RvcD5cbiAgICAgICAgICAgIDxzdG9wIG9mZnNldD1cIjEwMCVcIiBzdHlsZT1cInN0b3AtY29sb3I6cmdiKDI1NSwyMTEsMjM1KTtcbiAgICAgICAgICAgIHN0b3Atb3BhY2l0eToxXCI+PC9zdG9wPlxuICAgICAgICA8L2xpbmVhckdyYWRpZW50PlxuICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9XCJub2RlM1wiIHgxPVwiMCVcIiB5MT1cIjAlXCIgeDI9XCIxMDAlXCIgeTI9XCIwJVwiPlxuICAgICAgICAgICAgPHN0b3Agb2Zmc2V0PVwiMCVcIiBzdHlsZT1cInN0b3AtY29sb3I6cmdiKDQ0LDEyNCwyMzkpO1xuICAgICAgICAgICAgc3RvcC1vcGFjaXR5OjFcIj48L3N0b3A+XG4gICAgICAgICAgICA8c3RvcCBvZmZzZXQ9XCIxMDAlXCIgc3R5bGU9XCJzdG9wLWNvbG9yOnJnYigxODUsMjIyLDI1Mik7XG4gICAgICAgICAgICBzdG9wLW9wYWNpdHk6MVwiPjwvc3RvcD5cbiAgICAgICAgPC9saW5lYXJHcmFkaWVudD5cbiAgICAgICAgPGxpbmVhckdyYWRpZW50IGlkPVwibm9kZTRcIiB4MT1cIjAlXCIgeTE9XCIwJVwiIHgyPVwiMTAwJVwiIHkyPVwiMCVcIj5cbiAgICAgICAgICAgIDxzdG9wIG9mZnNldD1cIjAlXCIgc3R5bGU9XCJzdG9wLWNvbG9yOnJnYigyNTAsMTM0LDEyNik7XG4gICAgICAgICAgICBzdG9wLW9wYWNpdHk6MVwiPjwvc3RvcD5cbiAgICAgICAgICAgIDxzdG9wIG9mZnNldD1cIjEwMCVcIiBzdHlsZT1cInN0b3AtY29sb3I6cmdiKDI1NSwyMjksMjAyKTtcbiAgICAgICAgICAgIHN0b3Atb3BhY2l0eToxXCI+PC9zdG9wPlxuICAgICAgICA8L2xpbmVhckdyYWRpZW50PlxuICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9XCJyZWQtb3JhbmdlXCIgeDE9XCIwJVwiIHkxPVwiMCVcIiB4Mj1cIjEwMCVcIiB5Mj1cIjAlXCI+XG4gICAgICAgICAgICA8c3RvcCBvZmZzZXQ9XCIwJVwiIHN0eWxlPVwic3RvcC1jb2xvcjpyZ2IoMjU1LDkwLDApO1xuICAgICAgICAgICAgc3RvcC1vcGFjaXR5OjFcIj48L3N0b3A+XG4gICAgICAgICAgICA8c3RvcCBvZmZzZXQ9XCIxMDAlXCIgc3R5bGU9XCJzdG9wLWNvbG9yOnJnYigyNTUsMjU1LDApO1xuICAgICAgICAgICAgc3RvcC1vcGFjaXR5OjFcIj48L3N0b3A+XG4gICAgICAgIDwvbGluZWFyR3JhZGllbnQ+XG4gICAgICAgICIpOwoKICAgICAgaWYgKGRlZnNEb20pIHsKICAgICAgICBkZWZzRG9tLmlubmVySFRNTCA9IGRlZnNEb20uaW5uZXJIVE1MICsgbGluZXJHcmFkaWVudFN0cjsKICAgICAgfSBlbHNlIHsKICAgICAgICBkZWZzRG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGVmcyIpOwogICAgICAgIGRlZnNEb20uaW5uZXJIVE1MID0gbGluZXJHcmFkaWVudFN0cjsKICAgICAgICBzdmdEb20uYXBwZW5kQ2hpbGQoZGVmc0RvbSk7CiAgICAgIH0KCiAgICAgIHZhciBub2RlU3RlcCA9IDA7CiAgICAgIHZhciBsaW5lckdyYWRpZW50cyA9IFsibm9kZTEiLCAibm9kZTIiLCAibm9kZTMiLCAibm9kZTQiXTsKCiAgICAgIHZhciBfbG9vcDMgPSBmdW5jdGlvbiBfbG9vcDMoaSkgewogICAgICAgIHZhciBzaGFwZUVsZW1lbnQgPSBzaGFwZUVsZW1lbnRzW2ldOwoKICAgICAgICB2YXIgZWxlbWVudElkID0gX3RoaXM0LmdldEVsZURhdGFJZChzaGFwZUVsZW1lbnQpOwoKICAgICAgICBpZiAoZWxlbWVudElkLmluZGV4T2YoIlBhcnRpY2lwYW50XyIpID4gLTEpIHsKICAgICAgICAgIHZhciBkanNWaXN1YWxEb20gPSBzaGFwZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmRqcy12aXN1YWwiKVswXTsKICAgICAgICAgIGRqc1Zpc3VhbERvbS5nZXRFbGVtZW50c0J5VGFnTmFtZSgicmVjdCIpWzBdLnN0eWxlLnN0cm9rZSA9ICJub25lIjsKICAgICAgICAgIGRqc1Zpc3VhbERvbS5nZXRFbGVtZW50c0J5VGFnTmFtZSgicG9seWxpbmUiKVswXS5zdHlsZS5zdHJva2UgPSAibm9uZSI7CiAgICAgICAgfQoKICAgICAgICBpZiAoZWxlbWVudElkLmluZGV4T2YoIlRhc2tfIikgPiAtMSkgewogICAgICAgICAgLy8g5LuObm9kZXPkuK3mib7liLDlr7nlupTnmoRpZOeahG5vZGUKICAgICAgICAgIHZhciBub2RlID0gbm9kZVBhdGguZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBpdGVtLm5vZGVJZCA9PT0gZWxlbWVudElkOwogICAgICAgICAgfSlbMF07IC8vIOabv+aNouiKgueCuQoKICAgICAgICAgIHZhciBpbmRleCA9IG5vZGVTdGVwKysgJSA0OwogICAgICAgICAgdmFyIGxpbmVhckdyYWRpZW50ID0gbGluZXJHcmFkaWVudHNbaW5kZXhdOwogICAgICAgICAgbm9kZS5saW5lYXJHcmFkaWVudCA9IGxpbmVhckdyYWRpZW50OwogICAgICAgICAgbm9kZS5tYXJrZXJFbmQgPSAic2VxdWVuY2VmbG93Ii5jb25jYXQoaW5kZXggKyAxKTsKICAgICAgICAgIHZhciBpY29uID0gIiI7CgogICAgICAgICAgaWYgKG5vZGUubm9kZVN0YXR1cyA9PT0gImFwcHJvdmluZyIpIHsKICAgICAgICAgICAgaWYgKF90aGlzNC5pc0lFKCkpIHsKICAgICAgICAgICAgICBpY29uID0gIjx0ZXh0IGxpbmVoZWlnaHQ9XCIxLjJcIiBjbGFzcz1cImRqcy1sYWJlbFwiIHN0eWxlPVwiZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmO2ZvbnQtc2l6ZTogMTJweDtmb250LXdlaWdodDogbm9ybWFsO2ZpbGw6IHJnYigyNTUsIDAsIDI4KTtcIj48dHNwYW4geD1cIjg0XCIgeT1cIjRcIj5cdTVCQTFcdTYyNzlcdTRFMkQ8L3RzcGFuPjwvdGV4dD4iOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGljb24gPSAiPGltYWdlIHg9XCI5MFwiIHk9XCItNVwiIHdpZHRoPVwiMTZcIiB4bGluazpocmVmPVwiLi9hc3NldHMvYXBwcm92aW5nLnBuZ1wiIC8+IjsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm9kZS5ub2RlU3RhdHVzICE9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICBpZiAoX3RoaXM0LmlzSUUoKSkgewogICAgICAgICAgICAgIGljb24gPSAiPHRleHQgbGluZWhlaWdodD1cIjEuMlwiIGNsYXNzPVwiZGpzLWxhYmVsXCIgc3R5bGU9XCJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7Zm9udC1zaXplOiAxMnB4O2ZvbnQtd2VpZ2h0OiBub3JtYWw7ZmlsbDogcmdiKDEzNywgMTg5LCAxMTkpO1wiPjx0c3BhbiB4PVwiODRcIiB5PVwiNFwiPlx1OTAxQVx1OEZDNzwvdHNwYW4+PC90ZXh0PiI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWNvbiA9ICI8aW1hZ2UgeD1cIjkwXCIgeT1cIi01XCIgd2lkdGg9XCIxNlwiIHhsaW5rOmhyZWY9XCIuL2Fzc2V0cy9hcHByb3ZlUGFzcy5qcGdcIiAvPiI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgbm9kZVN0ciA9ICI8ZyBjbGFzcz1cImRqcy12aXN1YWxcIj48cmVjdCB4PVwiMFwiIHk9XCIwXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCI4MFwiIHJ4PVwiMlwiIHJ5PVwiMlwiIHN0eWxlPVwic3Ryb2tlOiByZ2IoMjI2LCAyMjYsIDIyNik7c3Ryb2tlLXdpZHRoOiAycHg7ZmlsbDogd2hpdGU7XCI+PC9yZWN0PjxwYXRoIGQ9XCJNMC41LDI3LjUgTDk5LjUsMjcuNSBMOTkuNSwyIEM5OS41LDEuMTcxNTcyODggOTguODI4NDI3MSwwLjUgOTgsMC41IEwyLDAuNSBDMS4xNzE1NzI4OCwwLjUgMC41LDEuMTcxNTcyODggMC41LDIgTDAuNSwyNy41IFpcIiBzdHlsZT1cIlxuICAgICAgICAgICAgICAgIGZpbGw6IHJnYigyMjYsIDIyNiwgMjI2KTtcbiAgICAgICAgICAgICAgICBcIj48L3BhdGg+PHRleHQgbGluZWhlaWdodD1cIjEuMlwiIGNsYXNzPVwiZGpzLWxhYmVsXCIgc3R5bGU9XCJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7Zm9udC1zaXplOiAxMnB4O2ZvbnQtd2VpZ2h0OiBub3JtYWw7ZmlsbDogcmdiKDE0MCwgMTQwLCAxNDApO1wiPjx0c3BhbiB4PVwiMTBcIiB5PVwiMThcIj4iLmNvbmNhdChub2RlLm5hbWUsICI8L3RzcGFuPjwvdGV4dD4iKS5jb25jYXQoaWNvbiwgIjx0ZXh0IHg9XCIxMFwiIHk9XCI0NlwiIGxpbmVoZWlnaHQ9XCIxLjJcIiBjbGFzcz1cImRqcy1sYWJlbFwiIHN0eWxlPVwiZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmO2ZvbnQtc2l6ZTogOHB4O2ZvbnQtd2VpZ2h0OiBub3JtYWw7ZmlsbDogcmdiKDAsIDAsIDApO1wiPlxuICAgICAgICAgICAgICAgIDx0c3Bhbj5cdTVCQTFcdTYyNzlcdTdDN0JcdTU3OEJcdUZGMUEiKS5jb25jYXQobm9kZS50eXBlTmFtZSwgIjwvdHNwYW4+XG4gICAgICAgICAgICAgICAgPC90ZXh0Pjx0ZXh0IHg9XCIxMFwiIHk9XCI2OFwiIGxpbmVoZWlnaHQ9XCIxLjJcIiBjbGFzcz1cImRqcy1sYWJlbFwiIHN0eWxlPVwiZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmO2ZvbnQtc2l6ZTogOHB4O2ZvbnQtd2VpZ2h0OiBub3JtYWw7ZmlsbDogcmdiKDAsIDAsIDApO1wiPlxuICAgICAgICAgICAgICAgIDx0c3Bhbj5cdTVCQTFcdTYyNzlcdTRFQkFcdTdDN0JcdTU3OEJcdUZGMUEiKS5jb25jYXQobm9kZS5hcHByb3ZlVHlwZU1lYW5pbmcsICI8L3RzcGFuPlxuICAgICAgICAgICAgICAgIDwvdGV4dD5cbiAgICAgICAgICAgICAgICA8L2c+Iik7IC8vIGNvbnN0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTsKICAgICAgICAgIC8vIHNoYXBlRWxlbWVudC5yZW1vdmVDaGlsZChzaGFwZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRqcy12aXN1YWwnKVswXSk7CiAgICAgICAgICAvLyBzaGFwZUVsZW1lbnQuYXBwZW5kQ2hpbGQocGFyc2VyLnBhcnNlRnJvbVN0cmluZyhub2RlU3RyLCAnaW1hZ2Uvc3ZnK3htbCcpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdnJylbMF0pOwogICAgICAgICAgLy8gc2hhcGVFbGVtZW50LmlubmVySFRNTCA9IG5vZGVTdHI7CgogICAgICAgICAgdmFyIGR1bW15ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICBkdW1teS5pbm5lckhUTUwgPSAiPHN2Zz4iICsgbm9kZVN0ciArICI8L3N2Zz4iOwogICAgICAgICAgdmFyIHN2Z0NoaWxkTm9kZXMgPSBkdW1teS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXM7CiAgICAgICAgICBzaGFwZUVsZW1lbnQucmVtb3ZlQ2hpbGQoc2hhcGVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5kanMtdmlzdWFsIilbMF0pOwogICAgICAgICAgc2hhcGVFbGVtZW50LmFwcGVuZENoaWxkKHN2Z0NoaWxkTm9kZXNbMF0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKChlbGVtZW50SWQuaW5kZXhPZigiU3RhcnRFdmVudF8iKSA+IC0xIHx8IGVsZW1lbnRJZC5pbmRleE9mKCJFbmRFdmVudF8iKSA+IC0xKSAmJiBlbGVtZW50SWQuaW5kZXhPZigiX2xhYmVsIikgPT09IC0xKSB7CiAgICAgICAgICB2YXIgX25vZGVTdHI7CgogICAgICAgICAgaWYgKGVsZW1lbnRJZC5pbmRleE9mKCJTdGFydEV2ZW50XyIpID4gLTEpIHsKICAgICAgICAgICAgLy8gY29uc3QgbmFtZSA9IHRoaXMuZXh0cmFQcm9wLnByb2Nlc3NOYW1lICsgJ+W9leWFpSc7CiAgICAgICAgICAgIC8vIG5vZGVTdHIgPSBgPGcgY2xhc3M9ImRqcy12aXN1YWwiPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAiIGhlaWdodD0iODAiIHJ4PSIyIiByeT0iMiIgc3R5bGU9InN0cm9rZTogdXJsKCcjcmVkLW9yYW5nZScpO3N0cm9rZS13aWR0aDogMnB4O2ZpbGw6IHVybCgnI3JlZC1vcmFuZ2UnKTsiPjwvcmVjdD4KICAgICAgICAgICAgLy8gPHJlY3QgeD0iMTAiIHk9IjIwIiB3aWR0aD0iODAiIGhlaWdodD0iNDAiIHJ4PSI4IiByeT0iOCIgc3R5bGU9IgogICAgICAgICAgICAvLyAgICAgZmlsbDogcmdiYSgwLCAwLCAwLCAuMik7CiAgICAgICAgICAgIC8vICI+PC9yZWN0PgogICAgICAgICAgICAvLyA8dGV4dCB4PSIxNCIgeT0iNDQiIGxpbmVoZWlnaHQ9IjEuMiIgY2xhc3M9ImRqcy1sYWJlbCIgc3R5bGU9ImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjtmb250LXNpemU6IDhweDtmb250LXdlaWdodDogbm9ybWFsO2ZpbGw6IHJnYigyNTUsIDI1NSwgMjU1KTsiPiR7bmFtZX08L3RleHQ+PC9nPmA7CiAgICAgICAgICAgIF9ub2RlU3RyID0gIjxnIGNsYXNzPVwiZGpzLXZpc3VhbFwiPjxjaXJjbGUgY3g9XCIxOFwiIGN5PVwiMThcIiByPVwiMThcIiBzdHlsZT1cInN0cm9rZTogIi5jb25jYXQoX3RoaXM0LnByaW1hcnlDb2xvciwgIjtzdHJva2Utd2lkdGg6IDJweDtmaWxsOiB3aGl0ZTtmaWxsLW9wYWNpdHk6IDAuOTU7XCI+PC9jaXJjbGU+PHRleHQgeD1cIjEwXCIgeT1cIjIxXCIgbGluZWhlaWdodD1cIjEuMlwiIGNsYXNzPVwiZGpzLWxhYmVsXCIgc3R5bGU9XCJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7Zm9udC1zaXplOiA4cHg7Zm9udC13ZWlnaHQ6IG5vcm1hbDtmaWxsOiAiKS5jb25jYXQoX3RoaXM0LnByaW1hcnlDb2xvciwgIjtcIj5cdTVGMDBcdTU5Q0I8L3RleHQ+PC9nPiIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gY29uc3QgbmFtZSA9ICfmtYHnqIvnu5PmnZ8nOwogICAgICAgICAgICAvLyBub2RlU3RyID0gYDxnIGNsYXNzPSJkanMtdmlzdWFsIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjgwIiByeD0iMiIgcnk9IjIiIHN0eWxlPSJzdHJva2U6IHVybCgnI3JlZC1vcmFuZ2UnKTtzdHJva2Utd2lkdGg6IDJweDtmaWxsOiB1cmwoJyNyZWQtb3JhbmdlJyk7Ij48L3JlY3Q+CiAgICAgICAgICAgIC8vIDxyZWN0IHg9IjEwIiB5PSIyMCIgd2lkdGg9IjgwIiBoZWlnaHQ9IjQwIiByeD0iOCIgcnk9IjgiIHN0eWxlPSIKICAgICAgICAgICAgLy8gICAgIGZpbGw6IHJnYmEoMCwgMCwgMCwgLjIpOwogICAgICAgICAgICAvLyAiPjwvcmVjdD4KICAgICAgICAgICAgLy8gPHRleHQgeD0iMzIiIHk9IjQ1IiBsaW5laGVpZ2h0PSIxLjIiIGNsYXNzPSJkanMtbGFiZWwiIHN0eWxlPSJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7Zm9udC1zaXplOiAxMHB4O2ZvbnQtd2VpZ2h0OiBub3JtYWw7ZmlsbDogcmdiKDI1NSwgMjU1LCAyNTUpOyI+JHtuYW1lfTwvdGV4dD48L2c+YDsKICAgICAgICAgICAgX25vZGVTdHIgPSAiPGcgY2xhc3M9XCJkanMtdmlzdWFsXCI+PGNpcmNsZSBjeD1cIjE4XCIgY3k9XCIxOFwiIHI9XCIxOFwiIHN0eWxlPVwic3Ryb2tlOiByZ2IoMjI2LCAyMjYsIDIyNik7c3Ryb2tlLXdpZHRoOiAycHg7ZmlsbDogd2hpdGU7ZmlsbC1vcGFjaXR5OiAwLjk1O1wiPjwvY2lyY2xlPjx0ZXh0IHg9XCIxMFwiIHk9XCIyMVwiIGxpbmVoZWlnaHQ9XCIxLjJcIiBjbGFzcz1cImRqcy1sYWJlbFwiIHN0eWxlPVwiZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmO2ZvbnQtc2l6ZTogOHB4O2ZvbnQtd2VpZ2h0OiBub3JtYWw7ZmlsbDogcmdiKDIyNiwgMjI2LCAyMjYpO1wiPlx1N0VEM1x1Njc1RjwvdGV4dD48L2c+IjsKICAgICAgICAgIH0gLy8gY29uc3QgdHJhbnNmb3JtQXJyID0gc2hhcGVFbGVtZW50LmdldEF0dHJpYnV0ZSgndHJhbnNmb3JtJykuc3BsaXQoJyAnKTsKICAgICAgICAgIC8vIHRyYW5zZm9ybUFyclt0cmFuc2Zvcm1BcnIubGVuZ3RoIC0gMV0gPSBgJHtwYXJzZUludCh0cmFuc2Zvcm1BcnJbdHJhbnNmb3JtQXJyLmxlbmd0aCAtIDFdLnN1YnN0cigwLCB0cmFuc2Zvcm1BcnJbdHJhbnNmb3JtQXJyLmxlbmd0aCAtIDFdLmxlbmd0aCAtIDEpKSAtIDIyfSlgOwogICAgICAgICAgLy8gc2hhcGVFbGVtZW50LnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgdHJhbnNmb3JtQXJyLmpvaW4oJyAnKSk7CiAgICAgICAgICAvLyBzaGFwZUVsZW1lbnQuaW5uZXJIVE1MID0gbm9kZVN0cjsKCgogICAgICAgICAgdmFyIF9kdW1teSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoKICAgICAgICAgIF9kdW1teS5pbm5lckhUTUwgPSAiPHN2Zz4iICsgX25vZGVTdHIgKyAiPC9zdmc+IjsKICAgICAgICAgIHZhciBfc3ZnQ2hpbGROb2RlcyA9IF9kdW1teS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXM7CiAgICAgICAgICBzaGFwZUVsZW1lbnQucmVtb3ZlQ2hpbGQoc2hhcGVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5kanMtdmlzdWFsIilbMF0pOwogICAgICAgICAgc2hhcGVFbGVtZW50LmFwcGVuZENoaWxkKF9zdmdDaGlsZE5vZGVzWzBdKTsKICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRJZC5pbmRleE9mKCJfbGFiZWwiKSA+IC0xKSB7CiAgICAgICAgICBzaGFwZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmRqcy12aXN1YWwiKVswXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGV4dCIpWzBdLnN0eWxlLmZpbGwgPSAidHJhbnNwYXJlbnQiOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hhcGVFbGVtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgIF9sb29wMyhpKTsKICAgICAgfSAvLyB0aGlzLnJlc2V0VGFza05vZGVPZmZzZXQoc2hhcGVFbGVtZW50cyk7CiAgICAgIC8vIHRoaXMucmVzZXRDb25uZWN0aW9uT2Zmc2V0KCk7CgogICAgfSwKICAgIHJlcGxhY2VDb25uVG9DdXN0b206IGZ1bmN0aW9uIHJlcGxhY2VDb25uVG9DdXN0b20oKSB7CiAgICAgIHZhciBzaGFwZUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmRqcy1lbGVtZW50LmRqcy1jb25uZWN0aW9uIik7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNoYXBlRWxlbWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgcGF0aERvbSA9IHNoYXBlRWxlbWVudHNbaV0ucXVlcnlTZWxlY3RvckFsbCgiLmRqcy12aXN1YWwiKVswXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGF0aCIpWzBdOwogICAgICAgIHBhdGhEb20uc3R5bGUuc3Ryb2tlID0gInJnYigyMzYsIDIzNiwgMjM2KSI7CiAgICAgICAgcGF0aERvbS5zdHlsZVsibWFya2VyLWVuZCJdID0gInVybCgnI3NlcXVlbmNlZmxvdy1ncmF5JykiOwoKICAgICAgICBpZiAocGF0aERvbS5zdHlsZVsibWFya2VyLXN0YXJ0Il0gJiYgcGF0aERvbS5zdHlsZVsibWFya2VyLXN0YXJ0Il0uaW5kZXhPZigiY29uZGl0aW9uYWwtZGVmYXVsdC1mbG93LW1hcmtlci13aGl0ZS1ibGFjayIpID4gLTEpIHsKICAgICAgICAgIHBhdGhEb20uc3R5bGVbIm1hcmtlci1zdGFydCJdID0gInVybChcIiNjb25kaXRpb25hbC1kZWZhdWx0LWZsb3ctbWFya2VyLXdoaXRlLWdyYXlcIikiOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHJlcGxhY2VHYXRld2F5VG9DdXN0b206IGZ1bmN0aW9uIHJlcGxhY2VHYXRld2F5VG9DdXN0b20oKSB7CiAgICAgIHZhciBzaGFwZUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmRqcy1lbGVtZW50LmRqcy1zaGFwZSIpOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaGFwZUVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHNoYXBlRWxlbWVudCA9IHNoYXBlRWxlbWVudHNbaV07CiAgICAgICAgdmFyIGVsZW1lbnRJZCA9IHRoaXMuZ2V0RWxlRGF0YUlkKHNoYXBlRWxlbWVudCk7CgogICAgICAgIGlmIChlbGVtZW50SWQuaW5kZXhPZigiR2F0ZXdheSIpID4gLTEpIHsKICAgICAgICAgIHZhciBkanNDb25uVmlzdWFsRG9tID0gc2hhcGVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5kanMtdmlzdWFsIilbMF07CiAgICAgICAgICBkanNDb25uVmlzdWFsRG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwb2x5Z29uIilbMF0uc3R5bGUuc3Ryb2tlID0gInJnYigyMjYsIDIyNiwgMjI2KSI7CiAgICAgICAgICBkanNDb25uVmlzdWFsRG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXRoIilbMF0uc3R5bGUuc3Ryb2tlID0gInJnYigyMjYsIDIyNiwgMjI2KSI7CiAgICAgICAgICBkanNDb25uVmlzdWFsRG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXRoIilbMF0uc3R5bGUuZmlsbCA9ICJyZ2IoMjI2LCAyMjYsIDIyNikiOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGdldEVsZURhdGFJZDogZnVuY3Rpb24gZ2V0RWxlRGF0YUlkKGVsZSkgewogICAgICBpZiAoZWxlLmRhdGFzZXQpIHsKICAgICAgICByZXR1cm4gZWxlLmRhdGFzZXQuZWxlbWVudElkOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBlbGUuZ2V0QXR0cmlidXRlKCJkYXRhLWVsZW1lbnQtaWQiKTsKICAgICAgfQogICAgfSwKICAgIGlzSUU6IGZ1bmN0aW9uIGlzSUUoKSB7CiAgICAgIHJldHVybiAiQWN0aXZlWE9iamVjdCIgaW4gd2luZG93OwogICAgfQogIH0KfTs="},{"version":3,"sources":["dap-ui-bpmn-process-flow.vue"],"names":[],"mappings":"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","sourcesContent":["<!--\n * @Author: your name\n * @Date: 2020-03-01 14:05:31\n * @LastEditTime: 2020-03-01 17:36:59\n * @LastEditors: Please set LastEditors\n * @Description: In User Settings Edit\n * @FilePath: /dap-vue-ui/packages/components/bpmn-process-flow/dap-ui-bpmn-process-flow.vue\n -->\n<template>\n  <div class=\"bpmn-process-flow\">\n    <dap-ui-modal v-bind=\"modalConfig\" @ok=\"handleOk\" @cancel=\"handleCancel\">\n      <div class=\"process-flow-content\">\n        <div class=\"canvas\" id=\"js-canvas\"></div>\n      </div>\n      <div class=\"masking\" v-show=\"loading\">\n        <a-spin tip=\"流程图加载中...\" size=\"large\" />\n        <!-- <nz-spin nzSimple nzSize=\"large\" nzTip=\"脚本加载中...\"></nz-spin> -->\n      </div>\n    </dap-ui-modal>\n  </div>\n</template>\n\n<script>\nimport * as X2JS from \"x2js\";\n\nvar BpmnJS;\nexport default {\n  name: \"DapUiBpmnProcessFlow\",\n  props: {\n    extraProp: {\n      type: Object\n    },\n    loading: {\n      type: Boolean,\n      default: function() {\n        return false;\n      }\n    }\n  },\n  data() {\n    return {\n      primaryColor: 'rgb(48, 129, 251)',\n      modeler: undefined,\n      modalConfig: {\n        visible: false,\n        title: \"流程图\",\n        size: \"large\",\n        modalClass: \"dap-ui-bpmn-process-flow\"\n      }\n    };\n  },\n  methods: {\n    loadResources({ domain, callback }) {\n      this.modalConfig.visible = true;\n      this.$asyncLoadResource(\n        `${domain}/bpmn-js/diagram-js.css`,\n        \"link\",\n        \"diagram-js-css\"\n      ).then();\n      this.$asyncLoadResource(\n        `${domain}/bpmn-js/css/bpmn.css`,\n        \"link\",\n        \"bpmn-css\"\n      ).then();\n      this.$asyncLoadResource(\n        `${domain}/bpmn-js/bpmn-modeler.development.js`,\n        \"script\",\n        \"bpmnjs\"\n      ).then(() => {\n        BpmnJS = window.BpmnJS;\n        this.initBpmnCanvas();\n        callback && callback();\n      });\n    },\n    initBpmnCanvas() {\n      this.modeler = new BpmnJS({\n        container: \"#js-canvas\"\n      });\n      const bjsPoweredByDom = document.querySelectorAll(\".bjs-powered-by\")[0];\n      if (bjsPoweredByDom) {\n        bjsPoweredByDom.style.display = \"none\";\n      }\n      const djsPaletteDom = document.querySelectorAll(\".djs-palette\")[0];\n      if (djsPaletteDom) {\n        djsPaletteDom.style.display = \"none\";\n      }\n    },\n    importDiagramForJson(diagramJSON) {\n      const x2js = new X2JS();\n      const xml = x2js.js2xml(diagramJSON);\n      this.importDiagram(xml).then(() => {\n        setTimeout(() => {\n          const djsGroup = document.querySelectorAll(\".djs-group\");\n          for (let i = 0; i < djsGroup.length; i++) {\n            djsGroup[i].addEventListener(\"click\", e => {\n              e.stopPropagation();\n            });\n            djsGroup[i].addEventListener(\"dblclick\", e => {\n              e.stopPropagation();\n            });\n            djsGroup[i].addEventListener(\"mousedown\", e => {\n              e.stopPropagation();\n            });\n          }\n          const djsSegmentDraggers = document.querySelectorAll(\n            \".djs-segment-dragger\"\n          );\n          for (let i = 0; i < djsSegmentDraggers.length; i++) {\n            djsSegmentDraggers[i].addEventListener(\"click\", e => {\n              e.stopPropagation();\n            });\n            djsSegmentDraggers[i].addEventListener(\"dblclick\", e => {\n              e.stopPropagation();\n            });\n            djsSegmentDraggers[i].addEventListener(\"mousedown\", e => {\n              e.stopPropagation();\n            });\n          }\n          const rectDoms = document.getElementsByTagName(\"rect\");\n          for (let i = 0; i < rectDoms.length; i++) {\n            rectDoms[i].addEventListener(\"click\", e => {\n              e.stopPropagation();\n            });\n            rectDoms[i].addEventListener(\"dblclick\", e => {\n              e.stopPropagation();\n            });\n            rectDoms[i].addEventListener(\"mousedown\", e => {\n              e.stopPropagation();\n            });\n          }\n        });\n      });\n    },\n    importDiagram(diaramXML) {\n      return new Promise((resolve, reject) => {\n        this.modeler.importXML(diaramXML, err => {\n          if (err) {\n            reject(err);\n          }\n          const canvas = this.modeler.get(\"canvas\");\n          // zoom to fit full viewport\n          canvas.zoom(\"fit-viewport\");\n          resolve();\n        });\n      });\n    },\n    handleCancel() {\n      this.modalConfig.visible = false;\n      this.modeler.destroy();\n      this.modeler = undefined;\n    },\n    handleOk() {\n      this.modalConfig.visible = false;\n    },\n    fillColor() {\n      const nodePath = this.extraProp.nodePath;\n      if (!nodePath || nodePath.length === 0) {\n        return;\n      }\n      const shapeElements = document.querySelectorAll(\".djs-element.djs-shape\");\n      const connElements = document.querySelectorAll(\n        \".djs-element.djs-connection\"\n      );\n      // TODO: 替换流程节点的样式为产品样式\n      this.replaceNodeToCustom(\n        shapeElements,\n        this.extraProp.nodes\n      );\n      this.replaceConnToCustom();\n      this.replaceGatewayToCustom();\n\n      for (let i = 0; i < nodePath.length; i++) {\n        const node = nodePath[i];\n        for (let j = 0; j < shapeElements.length; j++) {\n          try {\n            if (\n              this.getEleDataId(shapeElements[j]) === node.to ||\n              this.getEleDataId(shapeElements[j])\n                .toUpperCase()\n                .indexOf(node.to) > -1\n            ) {\n              const djsVisualDom = shapeElements[j].querySelectorAll(\n                \".djs-visual\"\n              )[0];\n              if (node.to === \"START\" || node.to === \"END\") {\n                djsVisualDom.getElementsByTagName(\"circle\")[0].style.stroke =\n                  `${this.primaryColor}`;\n                djsVisualDom.getElementsByTagName(\"text\")[0].style.fill =\n                  `${this.primaryColor}`;\n              } else {\n                djsVisualDom.getElementsByTagName(\"rect\")[0].style.stroke =\n                  `${this.primaryColor}`;\n                if (djsVisualDom.getElementsByTagName(\"path\")[0]) {\n                  djsVisualDom.getElementsByTagName(\"path\")[0].style.fill =\n                    `${this.primaryColor}`;\n                }\n                djsVisualDom.getElementsByTagName(\"text\")[0].style.fill =\n                  \"rgb(255, 255, 255)\";\n              }\n            }\n          } catch (err) {\n            console.error(err);\n          }\n        }\n        const conns = this.extraProp.connects.filter(\n          item => item.endNodeId === node.to\n        );\n        conns.forEach(conn => {\n          if (conn.startNodeId.indexOf(\"ExclusiveGateway\") > -1) {\n            let exclusiveGateway = this.extraProp\n              .definitions.process.exclusiveGateway;\n            if (!Array.isArray(exclusiveGateway) && exclusiveGateway) {\n              exclusiveGateway = [exclusiveGateway];\n            }\n            exclusiveGateway = exclusiveGateway.filter(\n              item => item._id === conn.startNodeId\n            );\n            let bingonGatway, incoming, incomingConn;\n            for (const gatway of exclusiveGateway) {\n              if (bingonGatway) {\n                break;\n              }\n              incoming = exclusiveGateway.filter(\n                item => item._id === conn.startNodeId\n              )[0].incoming;\n              if (!Array.isArray(incoming) && incoming) {\n                incoming = [incoming];\n              }\n              incoming.forEach(inc => {\n                incomingConn = this.extraProp.connects.filter(\n                  item => item.connId === inc.__text\n                )[0];\n                if (incomingConn.startNodeId === node.from) {\n                  bingonGatway = gatway;\n                }\n              });\n            }\n            if (bingonGatway) {\n              for (let k = 0; k < shapeElements.length; k++) {\n                if (this.getEleDataId(shapeElements[k]) === bingonGatway._id) {\n                  const gDom = shapeElements[k].querySelectorAll(\n                    \".djs-visual\"\n                  )[0];\n                  gDom.getElementsByTagName(\"polygon\")[0].style.stroke =\n                    `${this.primaryColor}`;\n                  gDom.getElementsByTagName(\"path\")[0].style.fill =\n                    `${this.primaryColor}`;\n                  gDom.getElementsByTagName(\"path\")[0].style.stroke =\n                    `${this.primaryColor}`;\n                }\n              }\n              for (let k = 0; k < connElements.length; k++) {\n                if (\n                  this.getEleDataId(connElements[k]) === incomingConn.connId\n                ) {\n                  const djsVisualDom = connElements[k].querySelectorAll(\n                    \".djs-visual\"\n                  )[0];\n                  djsVisualDom.getElementsByTagName(\"path\")[0].style.stroke =\n                    `${this.primaryColor}`;\n                  djsVisualDom.getElementsByTagName(\"path\")[0].style[\n                    \"marker-end\"\n                  ] = `url(\"#sequenceflow-blue\")`;\n                }\n              }\n\n              let outgoing = bingonGatway.outgoing;\n              if (!Array.isArray(outgoing) && outgoing) {\n                outgoing = [outgoing];\n              }\n              outgoing = outgoing.filter(item => item.__text === conn.connId);\n              outgoing.forEach(out => {\n                const outgoingConn = this.extraProp.connects.filter(\n                  item => item.connId === out.__text\n                )[0];\n                if (outgoingConn && outgoingConn.endNodeId === node.to) {\n                  for (let k = 0; k < connElements.length; k++) {\n                    if (\n                      this.getEleDataId(connElements[k]) === outgoingConn.connId\n                    ) {\n                      const djsVisualDom = connElements[k].querySelectorAll(\n                        \".djs-visual\"\n                      )[0];\n                      const pathDom = djsVisualDom.getElementsByTagName(\n                        \"path\"\n                      )[0];\n                      pathDom.style.stroke = `${this.primaryColor}`;\n                      pathDom.style[\"marker-end\"] = `url(\"#sequenceflow-blue\")`;\n                      if (\n                        pathDom.style[\"marker-start\"] &&\n                        pathDom.style[\"marker-start\"].indexOf(\n                          \"conditional-default-flow-marker-white-gray\"\n                        ) > -1\n                      ) {\n                        pathDom.style[\n                          \"marker-start\"\n                        ] = `url(\"#conditional-default-flow-marker-white-blue\")`;\n                      }\n                    }\n                  }\n                }\n              });\n            }\n          } else {\n            for (let k = 0; k < connElements.length; k++) {\n              if (\n                this.getEleDataId(connElements[k]) === conn.connId &&\n                conn.startNodeId === node.from\n              ) {\n                const djsVisualDom = connElements[k].querySelectorAll(\n                  \".djs-visual\"\n                )[0];\n                djsVisualDom.getElementsByTagName(\"path\")[0].style.stroke =\n                  `${this.primaryColor}`;\n                djsVisualDom.getElementsByTagName(\"path\")[0].style[\n                  \"marker-end\"\n                ] = `url(\"#sequenceflow-blue\")`;\n              }\n            }\n          }\n        });\n      }\n    },\n    replaceNodeToCustom(shapeElements, nodePath) {\n      const svgDom = document\n        .getElementById(\"js-canvas\")\n        .getElementsByTagName(\"svg\")[0];\n      let defsDom = svgDom.getElementsByTagName(\"defs\")[0];\n      const linerGradientStr = `\n        <marker id=\"conditional-default-flow-marker-white-gray\" viewBox=\"0 0 20 20\" refX=\"0\" refY=\"10\" markerWidth=\"10\" markerHeight=\"10\" orient=\"auto\"><path d=\"M 6 4 L 10 16\" style=\"fill: rgb(205, 205, 205); stroke-width: 1px; stroke-linecap: round; stroke-dasharray: 10000, 1; stroke: rgb(205, 205, 205);\"></path></marker>\n        <marker id=\"conditional-default-flow-marker-white-blue\" viewBox=\"0 0 20 20\" refX=\"0\" refY=\"10\" markerWidth=\"10\" markerHeight=\"10\" orient=\"auto\"><path d=\"M 6 4 L 10 16\" style=\"fill: ${this.primaryColor}; stroke-width: 1px; stroke-linecap: round; stroke-dasharray: 10000, 1; stroke: ${this.primaryColor};\"></path></marker>\n        <marker id=\"sequenceflow-gray\" viewBox=\"0 0 20 20\" refX=\"11\" refY=\"10\" markerWidth=\"10\" markerHeight=\"10\" orient=\"auto\">\n            <circle cx=\"6\" cy=\"10\" r=\"4.5\" style=\"stroke: rgb(205, 205, 205);fill: rgb(205, 205, 205);\"></circle>\n        </marker>\n        <marker id=\"sequenceflow-blue\" viewBox=\"0 0 20 20\" refX=\"11\" refY=\"10\" markerWidth=\"10\" markerHeight=\"10\" orient=\"auto\">\n            <circle cx=\"6\" cy=\"10\" r=\"4.5\" style=\"stroke: ${this.primaryColor};fill: ${this.primaryColor};\"></circle>\n        </marker>\n        <marker id=\"sequenceflow-start\" viewBox=\"0 0 20 20\" refX=\"11\" refY=\"10\" markerWidth=\"10\" markerHeight=\"10\" orient=\"auto\">\n            <circle cx=\"6\" cy=\"10\" r=\"4.5\" style=\"stroke: url('#red-orange');fill: url('#red-orange');\"></circle>\n        </marker>\n        <marker id=\"sequenceflow1\" viewBox=\"0 0 20 20\" refX=\"11\" refY=\"10\" markerWidth=\"10\" markerHeight=\"10\" orient=\"auto\">\n            <circle cx=\"6\" cy=\"10\" r=\"4.5\" style=\"stroke: url('#node1');fill: url('#node1');\"></circle>\n        </marker>\n        <marker id=\"sequenceflow2\" viewBox=\"0 0 20 20\" refX=\"11\" refY=\"10\" markerWidth=\"10\" markerHeight=\"10\" orient=\"auto\">\n            <circle cx=\"6\" cy=\"10\" r=\"4.5\" style=\"stroke: url('#node2');fill: url('#node2');\"></circle>\n        </marker>\n        <marker id=\"sequenceflow3\" viewBox=\"0 0 20 20\" refX=\"11\" refY=\"10\" markerWidth=\"10\" markerHeight=\"10\" orient=\"auto\">\n            <circle cx=\"6\" cy=\"10\" r=\"4.5\" style=\"stroke: url('#node3');fill: url('#node3');\"></circle>\n        </marker>\n        <marker id=\"sequenceflow4\" viewBox=\"0 0 20 20\" refX=\"11\" refY=\"10\" markerWidth=\"10\" markerHeight=\"10\" orient=\"auto\">\n            <circle cx=\"6\" cy=\"10\" r=\"4.5\" style=\"stroke: url('#node4');fill: url('#node4');\"></circle>\n        </marker>\n        <linearGradient id=\"node1\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n            <stop offset=\"0%\" style=\"stop-color:rgb(62,147,157);\n            stop-opacity:1\"></stop>\n            <stop offset=\"100%\" style=\"stop-color:rgb(223,237,242);\n            stop-opacity:1\"></stop>\n        </linearGradient>\n        <linearGradient id=\"node2\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n            <stop offset=\"0%\" style=\"stop-color:rgb(82,61,141);\n            stop-opacity:1\"></stop>\n            <stop offset=\"100%\" style=\"stop-color:rgb(255,211,235);\n            stop-opacity:1\"></stop>\n        </linearGradient>\n        <linearGradient id=\"node3\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n            <stop offset=\"0%\" style=\"stop-color:rgb(44,124,239);\n            stop-opacity:1\"></stop>\n            <stop offset=\"100%\" style=\"stop-color:rgb(185,222,252);\n            stop-opacity:1\"></stop>\n        </linearGradient>\n        <linearGradient id=\"node4\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n            <stop offset=\"0%\" style=\"stop-color:rgb(250,134,126);\n            stop-opacity:1\"></stop>\n            <stop offset=\"100%\" style=\"stop-color:rgb(255,229,202);\n            stop-opacity:1\"></stop>\n        </linearGradient>\n        <linearGradient id=\"red-orange\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n            <stop offset=\"0%\" style=\"stop-color:rgb(255,90,0);\n            stop-opacity:1\"></stop>\n            <stop offset=\"100%\" style=\"stop-color:rgb(255,255,0);\n            stop-opacity:1\"></stop>\n        </linearGradient>\n        `;\n      if (defsDom) {\n        defsDom.innerHTML = defsDom.innerHTML + linerGradientStr;\n      } else {\n        defsDom = document.createElement(\"defs\");\n        defsDom.innerHTML = linerGradientStr;\n        svgDom.appendChild(defsDom);\n      }\n      let nodeStep = 0;\n      const linerGradients = [\"node1\", \"node2\", \"node3\", \"node4\"];\n      for (let i = 0; i < shapeElements.length; i++) {\n        const shapeElement = shapeElements[i];\n        const elementId = this.getEleDataId(shapeElement);\n        if (elementId.indexOf(\"Participant_\") > -1) {\n          const djsVisualDom = shapeElement.querySelectorAll(\".djs-visual\")[0];\n          djsVisualDom.getElementsByTagName(\"rect\")[0].style.stroke = \"none\";\n          djsVisualDom.getElementsByTagName(\"polyline\")[0].style.stroke =\n            \"none\";\n        }\n        if (elementId.indexOf(\"Task_\") > -1) {\n          // 从nodes中找到对应的id的node\n          const node = nodePath.filter(item => item.nodeId === elementId)[0];\n          // 替换节点\n          const index = nodeStep++ % 4;\n          const linearGradient = linerGradients[index];\n          node.linearGradient = linearGradient;\n          node.markerEnd = `sequenceflow${index + 1}`;\n          let icon = ``;\n          if (node.nodeStatus === \"approving\") {\n            if (this.isIE()) {\n              icon = `<text lineheight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif;font-size: 12px;font-weight: normal;fill: rgb(255, 0, 28);\"><tspan x=\"84\" y=\"4\">审批中</tspan></text>`;\n            } else {\n              icon = `<image x=\"90\" y=\"-5\" width=\"16\" xlink:href=\"./assets/approving.png\" />`;\n            }\n          } else if (typeof node.nodeStatus !== \"undefined\") {\n            if (this.isIE()) {\n              icon = `<text lineheight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif;font-size: 12px;font-weight: normal;fill: rgb(137, 189, 119);\"><tspan x=\"84\" y=\"4\">通过</tspan></text>`;\n            } else {\n              icon = `<image x=\"90\" y=\"-5\" width=\"16\" xlink:href=\"./assets/approvePass.jpg\" />`;\n            }\n          }\n          const nodeStr = `<g class=\"djs-visual\"><rect x=\"0\" y=\"0\" width=\"100\" height=\"80\" rx=\"2\" ry=\"2\" style=\"stroke: rgb(226, 226, 226);stroke-width: 2px;fill: white;\"></rect><path d=\"M0.5,27.5 L99.5,27.5 L99.5,2 C99.5,1.17157288 98.8284271,0.5 98,0.5 L2,0.5 C1.17157288,0.5 0.5,1.17157288 0.5,2 L0.5,27.5 Z\" style=\"\n                fill: rgb(226, 226, 226);\n                \"></path><text lineheight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif;font-size: 12px;font-weight: normal;fill: rgb(140, 140, 140);\"><tspan x=\"10\" y=\"18\">${node.name}</tspan></text>${icon}<text x=\"10\" y=\"46\" lineheight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif;font-size: 8px;font-weight: normal;fill: rgb(0, 0, 0);\">\n                <tspan>审批类型：${node.typeName}</tspan>\n                </text><text x=\"10\" y=\"68\" lineheight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif;font-size: 8px;font-weight: normal;fill: rgb(0, 0, 0);\">\n                <tspan>审批人类型：${node.approveTypeMeaning}</tspan>\n                </text>\n                </g>`;\n          // const parser = new DOMParser();\n          // shapeElement.removeChild(shapeElement.querySelectorAll('.djs-visual')[0]);\n          // shapeElement.appendChild(parser.parseFromString(nodeStr, 'image/svg+xml').getElementsByTagName('g')[0]);\n          // shapeElement.innerHTML = nodeStr;\n\n          const dummy = document.createElement(\"div\");\n          dummy.innerHTML = \"<svg>\" + nodeStr + \"</svg>\";\n          const svgChildNodes = dummy.childNodes[0].childNodes;\n          shapeElement.removeChild(\n            shapeElement.querySelectorAll(\".djs-visual\")[0]\n          );\n          shapeElement.appendChild(svgChildNodes[0]);\n        }\n        if (\n          (elementId.indexOf(\"StartEvent_\") > -1 ||\n            elementId.indexOf(\"EndEvent_\") > -1) &&\n          elementId.indexOf(\"_label\") === -1\n        ) {\n          let nodeStr;\n          if (elementId.indexOf(\"StartEvent_\") > -1) {\n            // const name = this.extraProp.processName + '录入';\n            // nodeStr = `<g class=\"djs-visual\"><rect x=\"0\" y=\"0\" width=\"100\" height=\"80\" rx=\"2\" ry=\"2\" style=\"stroke: url('#red-orange');stroke-width: 2px;fill: url('#red-orange');\"></rect>\n            // <rect x=\"10\" y=\"20\" width=\"80\" height=\"40\" rx=\"8\" ry=\"8\" style=\"\n            //     fill: rgba(0, 0, 0, .2);\n            // \"></rect>\n            // <text x=\"14\" y=\"44\" lineheight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif;font-size: 8px;font-weight: normal;fill: rgb(255, 255, 255);\">${name}</text></g>`;\n            nodeStr = `<g class=\"djs-visual\"><circle cx=\"18\" cy=\"18\" r=\"18\" style=\"stroke: ${this.primaryColor};stroke-width: 2px;fill: white;fill-opacity: 0.95;\"></circle><text x=\"10\" y=\"21\" lineheight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif;font-size: 8px;font-weight: normal;fill: ${this.primaryColor};\">开始</text></g>`;\n          } else {\n            // const name = '流程结束';\n            // nodeStr = `<g class=\"djs-visual\"><rect x=\"0\" y=\"0\" width=\"100\" height=\"80\" rx=\"2\" ry=\"2\" style=\"stroke: url('#red-orange');stroke-width: 2px;fill: url('#red-orange');\"></rect>\n            // <rect x=\"10\" y=\"20\" width=\"80\" height=\"40\" rx=\"8\" ry=\"8\" style=\"\n            //     fill: rgba(0, 0, 0, .2);\n            // \"></rect>\n            // <text x=\"32\" y=\"45\" lineheight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif;font-size: 10px;font-weight: normal;fill: rgb(255, 255, 255);\">${name}</text></g>`;\n            nodeStr = `<g class=\"djs-visual\"><circle cx=\"18\" cy=\"18\" r=\"18\" style=\"stroke: rgb(226, 226, 226);stroke-width: 2px;fill: white;fill-opacity: 0.95;\"></circle><text x=\"10\" y=\"21\" lineheight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif;font-size: 8px;font-weight: normal;fill: rgb(226, 226, 226);\">结束</text></g>`;\n          }\n          // const transformArr = shapeElement.getAttribute('transform').split(' ');\n          // transformArr[transformArr.length - 1] = `${parseInt(transformArr[transformArr.length - 1].substr(0, transformArr[transformArr.length - 1].length - 1)) - 22})`;\n          // shapeElement.setAttribute('transform', transformArr.join(' '));\n\n          // shapeElement.innerHTML = nodeStr;\n\n          const dummy = document.createElement(\"div\");\n          dummy.innerHTML = \"<svg>\" + nodeStr + \"</svg>\";\n          const svgChildNodes = dummy.childNodes[0].childNodes;\n          shapeElement.removeChild(\n            shapeElement.querySelectorAll(\".djs-visual\")[0]\n          );\n          shapeElement.appendChild(svgChildNodes[0]);\n        } else if (elementId.indexOf(\"_label\") > -1) {\n          shapeElement\n            .querySelectorAll(\".djs-visual\")[0]\n            .getElementsByTagName(\"text\")[0].style.fill = \"transparent\";\n        }\n      }\n      // this.resetTaskNodeOffset(shapeElements);\n      // this.resetConnectionOffset();\n    },\n    replaceConnToCustom() {\n      const shapeElements = document.querySelectorAll(\n        \".djs-element.djs-connection\"\n      );\n      for (let i = 0; i < shapeElements.length; i++) {\n        const pathDom = shapeElements[i]\n          .querySelectorAll(\".djs-visual\")[0]\n          .getElementsByTagName(\"path\")[0];\n        pathDom.style.stroke = `rgb(236, 236, 236)`;\n        pathDom.style[\"marker-end\"] = `url('#sequenceflow-gray')`;\n        if (\n          pathDom.style[\"marker-start\"] &&\n          pathDom.style[\"marker-start\"].indexOf(\n            \"conditional-default-flow-marker-white-black\"\n          ) > -1\n        ) {\n          pathDom.style[\n            \"marker-start\"\n          ] = `url(\"#conditional-default-flow-marker-white-gray\")`;\n        }\n      }\n    },\n    replaceGatewayToCustom() {\n      const shapeElements = document.querySelectorAll(\".djs-element.djs-shape\");\n      for (let i = 0; i < shapeElements.length; i++) {\n        const shapeElement = shapeElements[i];\n        const elementId = this.getEleDataId(shapeElement);\n        if (elementId.indexOf(\"Gateway\") > -1) {\n          const djsConnVisualDom = shapeElement.querySelectorAll(\n            \".djs-visual\"\n          )[0];\n          djsConnVisualDom.getElementsByTagName(\"polygon\")[0].style.stroke =\n            \"rgb(226, 226, 226)\";\n          djsConnVisualDom.getElementsByTagName(\"path\")[0].style.stroke =\n            \"rgb(226, 226, 226)\";\n          djsConnVisualDom.getElementsByTagName(\"path\")[0].style.fill =\n            \"rgb(226, 226, 226)\";\n        }\n      }\n    },\n    getEleDataId(ele) {\n      if (ele.dataset) {\n        return ele.dataset.elementId;\n      } else {\n        return ele.getAttribute(\"data-element-id\");\n      }\n    },\n    isIE() {\n      return \"ActiveXObject\" in window;\n    }\n  }\n};\n</script>\n<style src=\"./index.less\" lang=\"less\"></style>\n"],"sourceRoot":"packages/components/bpmn-process-flow"}]}