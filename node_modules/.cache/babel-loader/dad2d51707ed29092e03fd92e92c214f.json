{"remainingRequest":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/babel-loader/lib/index.js!/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/packages/plugins/form/basic-form.plugin.js","dependencies":[{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/packages/plugins/form/basic-form.plugin.js","mtime":1583476762830},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgovKgogKiBAQXV0aG9yOiBEZXZpblNoaQogKiBARGF0ZTogMjAyMC0wMi0xNiAwMjoyNzoxMQogKiBATGFzdEVkaXRvcnM6IFBsZWFzZSBzZXQgTGFzdEVkaXRvcnMKICogQExhc3RFZGl0VGltZTogMjAyMC0wMy0wNSAxNDo0MjowNAogKiBARGVzY3JpcHRpb246IGZpbGUgY29udGVudCBkZXNjcmlwdGlvbgogKi8KaW1wb3J0IFN0cmluZ1V0aWwgZnJvbSAnLi4vLi4vdXRpbHMvc3RyaW5nLnV0aWwnOwoKdmFyIF9yZXF1aXJlID0gcmVxdWlyZSgnanNvbnBhdGgtcGx1cycpLAogICAgSlNPTlBhdGggPSBfcmVxdWlyZS5KU09OUGF0aDsKCnZhciBDb21wRXJyb3IgPSBmdW5jdGlvbiBDb21wRXJyb3IoZXJyb3JDb2RlLCBlcnJvck1zZywgZXJyb3IpIHsKICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29tcEVycm9yKTsKCiAgdGhpcy5lcnJvckNvZGUgPSBlcnJvckNvZGU7CiAgdGhpcy5lcnJvck1zZyA9IGVycm9yTXNnOwogIHRoaXMuZXJyb3IgPSBlcnJvcjsKfTsKCnZhciBDT01QX1JFR0lTVEVSX0VSUk9SID0gewogIENPTVBfRVhJU1RfRVJST1I6IG5ldyBDb21wRXJyb3IoLTUwMDEsICfnu4Tku7blt7Lnu4/lnKjooajljZXkuK3ms6jlhownKSwKICBDT01QX05PVF9WQUxJRF9FUlJPUjogbmV3IENvbXBFcnJvcigtNTAwMiwgJ+e7hOS7tuS4jeaYr+S4gOS4qlZ1ZeeahOe7hOS7ticpCn07CnZhciBDT01QX0FEQVBURVJfUkVHSVNURVJfRVJST1IgPSB7CiAgQ09NUF9BREFQVEVSX0VYSVNUX0VSUk9SOiBuZXcgQ29tcEVycm9yKC02MDAxLCAn57uE5Lu26YCC6YWN5Zmo5bey57uP5Zyo6KGo5Y2V5Lit5rOo5YaMJyksCiAgQ09NUF9BQ1RJT05fVVVJRF9FWElTVF9FUlJPUjogbmV3IENvbXBFcnJvcigtNjAwMiwgJ+e7hOS7tuS6i+S7tuebkeWQrOWvueixoeS4jeWtmOWcqCcpCn07CmV4cG9ydCBkZWZhdWx0IHsKICBpbnN0YWxsOiBmdW5jdGlvbiBpbnN0YWxsKFZ1ZSwgb3B0cykgewogICAgVnVlLnByb3RvdHlwZS4kYmFzZUZvcm1SZWdpc3RlciA9IHsKICAgICAgcmVnaXN0ZXJlZENvbXBvbmVudDoge30sCiAgICAgIHJlZ2lzdGVyZWRBZGFwdGVyOiB7fSwKICAgICAgcmVnaXN0ZXJDb21wb25lbnQ6IGZ1bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50KGNvbXBOYW1lLCBjb21wVHlwZSwgY29tcG9uZW50KSB7CiAgICAgICAgaWYgKHR5cGVvZiBjb21wb25lbnQudGVtcGxhdGUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBjb21wb25lbnQucmVuZGVyID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICBpZiAoIXRoaXMucmVnaXN0ZXJlZENvbXBvbmVudFtjb21wTmFtZV0pIHsKICAgICAgICAgICAgdGhpcy5yZWdpc3RlcmVkQ29tcG9uZW50W2NvbXBOYW1lXSA9IHsKICAgICAgICAgICAgICBjb21wVHlwZTogY29tcFR5cGUsCiAgICAgICAgICAgICAgY29tcG9uZW50OiBjb21wb25lbnQKICAgICAgICAgICAgfTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93IENPTVBfUkVHSVNURVJfRVJST1IuQ09NUF9FWElTVF9FUlJPUjsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgQ09NUF9SRUdJU1RFUl9FUlJPUi5DT01QX05PVF9WQUxJRF9FUlJPUjsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG1lcmdlQ29tcG9uZW50OiBmdW5jdGlvbiBtZXJnZUNvbXBvbmVudChjb21wTmFtZSwgY29tcFR5cGUsIGNvbXBvbmVudCkgewogICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50ZW1wbGF0ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIG9wdGlvbnMucmVuZGVyID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICB0aGlzLnJlZ2lzdGVyZWRDb21wb25lbnRbY29tcE5hbWVdID0gewogICAgICAgICAgICBjb21wVHlwZTogY29tcFR5cGUsCiAgICAgICAgICAgIGNvbXBvbmVudDogY29tcG9uZW50CiAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyBDT01QX1JFR0lTVEVSX0VSUk9SLkNPTVBfTk9UX1ZBTElEX0VSUk9SOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZ2V0Q29tcG9uZW50VHlwZTogZnVuY3Rpb24gZ2V0Q29tcG9uZW50VHlwZShjb21wVGFnKSB7CiAgICAgICAgdmFyIGNvbXBOYW1lID0gU3RyaW5nVXRpbC50b0NhbWVsKGNvbXBUYWcpOwogICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyZWRDb21wb25lbnRbY29tcE5hbWVdICYmIHRoaXMucmVnaXN0ZXJlZENvbXBvbmVudFtjb21wTmFtZV0uY29tcFR5cGU7CiAgICAgIH0sCiAgICAgIGhhc0NvbXBvbmVudDogZnVuY3Rpb24gaGFzQ29tcG9uZW50KGNvbXBUYWcpIHsKICAgICAgICB2YXIgY29tcE5hbWUgPSBTdHJpbmdVdGlsLnRvQ2FtZWwoY29tcFRhZyk7CiAgICAgICAgcmV0dXJuIG5ldyBCb29sZWFuKHRoaXMucmVnaXN0ZXJlZENvbXBvbmVudFtjb21wTmFtZV0pOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAqIOazqOWGjOaVsOaNruijheaNogogICAgICAgKiBAcGFyYW0geyp9IGNvbXBOYW1lIAogICAgICAgKiBAcGFyYW0geyp9IGFkYXB0ZXIgCiAgICAgICAqIEBwYXJhbSB7Kn0gYWN0aW9uIAogICAgICAgKi8KICAgICAgcmVnaXN0ZXJBZGFwdGVyOiBmdW5jdGlvbiByZWdpc3RlckFkYXB0ZXIoY29tcE5hbWUsIHRhZywgYWN0aW9uLCBhZGFwdGVyKSB7CiAgICAgICAgaWYgKCF0aGlzLnJlZ2lzdGVyZWRBZGFwdGVyW2NvbXBOYW1lXSkgewogICAgICAgICAgdGhpcy5yZWdpc3RlcmVkQWRhcHRlcltjb21wTmFtZV0gPSB7CiAgICAgICAgICAgIGFkYXB0ZXI6IGFkYXB0ZXIsCiAgICAgICAgICAgIGFjdGlvbjogYWN0aW9uLAogICAgICAgICAgICB0YWc6IHRhZwogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgQ09NUF9BREFQVEVSX1JFR0lTVEVSX0VSUk9SLkNPTVBfQURBUFRFUl9FWElTVF9FUlJPUjsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHJlZ2lzdGVyQWRhcHRlck9iajogZnVuY3Rpb24gcmVnaXN0ZXJBZGFwdGVyT2JqKF9yZWYpIHsKICAgICAgICB2YXIgY29tcE5hbWUgPSBfcmVmLmNvbXBOYW1lLAogICAgICAgICAgICB0YWcgPSBfcmVmLnRhZywKICAgICAgICAgICAgYWN0aW9uID0gX3JlZi5hY3Rpb24sCiAgICAgICAgICAgIGFkYXB0ZXIgPSBfcmVmLmFkYXB0ZXI7CiAgICAgICAgdGhpcy5yZWdpc3RlckFkYXB0ZXIoY29tcE5hbWUsIHRhZywgYWN0aW9uLCBhZGFwdGVyKTsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgKiDmoLnmja7moIforrDojrflj5ZhZGFwdGVy5pWw5o2u6L2s5o2i5ZmoCiAgICAgICAqIEBwYXJhbSB7Kn0gdGFnIOagh+iusOiOt+WPlmFkYXB0ZXIKICAgICAgICovCiAgICAgIGdldEFkYXB0ZXJCeVRhZzogZnVuY3Rpb24gZ2V0QWRhcHRlckJ5VGFnKHRhZykgewogICAgICAgIHZhciBhZGFwdGVyQXJyYXkgPSBPYmplY3QudmFsdWVzKHRoaXMucmVnaXN0ZXJlZEFkYXB0ZXIpOwogICAgICAgIHZhciB0YWdBZGFwdGVyID0gdW5kZWZpbmVkOwogICAgICAgIHZhciBkZWZhdWx0QWRhcHRlciA9IHVuZGVmaW5lZDsKICAgICAgICBhZGFwdGVyQXJyYXkuZm9yRWFjaChmdW5jdGlvbiAoYWRhcHRlcikgewogICAgICAgICAgaWYgKGFkYXB0ZXIudGFnID09PSB0YWcpIHsKICAgICAgICAgICAgdGFnQWRhcHRlciA9IGFkYXB0ZXI7CiAgICAgICAgICB9IGVsc2UgaWYgKGFkYXB0ZXIudGFnID09PSAnREVGQVVMVCcpIHsKICAgICAgICAgICAgZGVmYXVsdEFkYXB0ZXIgPSBhZGFwdGVyOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBpZiAoIXRhZ0FkYXB0ZXIpIHsKICAgICAgICAgIHRhZ0FkYXB0ZXIgPSBkZWZhdWx0QWRhcHRlcjsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0YWdBZGFwdGVyOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAqIOaVsOaNrui9rOaNoumFjee9rgogICAgICAgKiBAcGFyYW0geyp9IGNvbXBvbmVudENvbmZpZyAKICAgICAgICogQHBhcmFtIHsqfSB0YWcgCiAgICAgICAqLwogICAgICBjb252ZXJ0Q29tcENvbmZpZzogZnVuY3Rpb24gY29udmVydENvbXBDb25maWcoY29tcG9uZW50Q29uZmlnLCB0YWcsIGdsb2JhbEZvcm1JbmZvKSB7CiAgICAgICAgLy8g5qC55o2udGFn5om+5Yiw6L2s5o2i5Zmo77yM6L2s5o2i5pWw5o2uCiAgICAgICAgdmFyIGFkYXB0ZXIgPSB0aGlzLmdldEFkYXB0ZXJCeVRhZyh0YWcpOwoKICAgICAgICBpZiAoYWRhcHRlciAmJiBhZGFwdGVyLmFkYXB0ZXIpIHsKICAgICAgICAgIHJldHVybiBhZGFwdGVyLmFkYXB0ZXIoY29tcG9uZW50Q29uZmlnLCBnbG9iYWxGb3JtSW5mbyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBjb21wb25lbnRDb25maWc7CiAgICAgICAgfQogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAqIOaJp+ihjOazqOWFpeS6i+S7tgogICAgICAgKi8KICAgICAgZXhjdXRlQWRhcHRlckV2ZW50OiBmdW5jdGlvbiBleGN1dGVBZGFwdGVyRXZlbnQoY29tcE5hbWUsIGFjdGlvbkV2ZW50LCBmb3JtQ29uZmlnLCBnbG9iYWxGb3JtSW5mbywgZm9ybURhdGEpIHsKICAgICAgICB2YXIgYWRhcHRlciA9IHRoaXMucmVnaXN0ZXJlZEFkYXB0ZXJbY29tcE5hbWVdOwogICAgICAgIHZhciBjb21wSW5mbyA9IHRoaXMuZ2V0Q29uZmlnQnlVdWlkKGFjdGlvbkV2ZW50LnV1aWQsIGZvcm1Db25maWcpOwoKICAgICAgICBpZiAoYWRhcHRlcikgewogICAgICAgICAgcmV0dXJuIGFkYXB0ZXIuYWN0aW9uKGNvbXBJbmZvLCBhY3Rpb25FdmVudCwgZ2xvYmFsRm9ybUluZm8sIGZvcm1EYXRhLCBmb3JtQ29uZmlnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGdldENvbmZpZ0J5VXVpZDogZnVuY3Rpb24gZ2V0Q29uZmlnQnlVdWlkKHV1aWQsIGZvcm1Db25maWcpIHsKICAgICAgICB2YXIgcmVzdWx0QXJyYXkgPSBKU09OUGF0aCgiJC4uWz8oQC51dWlkID09PSAnIi5jb25jYXQodXVpZCwgIicpXSIpLCBmb3JtQ29uZmlnKTsKCiAgICAgICAgaWYgKHJlc3VsdEFycmF5ICYmIHJlc3VsdEFycmF5Lmxlbmd0aCA+IDApIHsKICAgICAgICAgIHJldHVybiByZXN1bHRBcnJheVswXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgbmV3IENPTVBfQURBUFRFUl9SRUdJU1RFUl9FUlJPUi5DT01QX0FDVElPTl9VVUlEX0VYSVNUX0VSUk9SKCk7CiAgICAgICAgfQogICAgICB9LAogICAgICBzZXRDb25maWdCeVV1aWQ6IGZ1bmN0aW9uIHNldENvbmZpZ0J5VXVpZCh1dWlkLCBmb3JtQ29uZmlnLCBrZXksIHZhbHVlKSB7CiAgICAgICAgdmFyIGl0ZW1Db25maWcgPSB0aGlzLmdldENvbmZpZ0J5VXVpZCh1dWlkLCBmb3JtQ29uZmlnKTsKCiAgICAgICAgaWYgKGl0ZW1Db25maWcpIHsKICAgICAgICAgIGl0ZW1Db25maWdba2V5XSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZ2V0Q29uZmlnQnlJZDogZnVuY3Rpb24gZ2V0Q29uZmlnQnlJZChpZCwgZm9ybUNvbmZpZykgewogICAgICAgIHZhciByZXN1bHRBcnJheSA9IEpTT05QYXRoKCIkLi5bPyhALmlkID09PSAnIi5jb25jYXQoaWQsICInKV0iKSwgZm9ybUNvbmZpZyk7CgogICAgICAgIGlmIChyZXN1bHRBcnJheSAmJiByZXN1bHRBcnJheS5sZW5ndGggPiAwKSB7CiAgICAgICAgICByZXR1cm4gcmVzdWx0QXJyYXlbMF07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93IG5ldyBDT01QX0FEQVBURVJfUkVHSVNURVJfRVJST1IuQ09NUF9BQ1RJT05fVVVJRF9FWElTVF9FUlJPUigpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgc2V0Q29uZmlnQnlJZDogZnVuY3Rpb24gc2V0Q29uZmlnQnlJZChpZCwgZm9ybUNvbmZpZywga2V5LCB2YWx1ZSkgewogICAgICAgIHZhciBpdGVtQ29uZmlnID0gdGhpcy5nZXRDb25maWdCeUlkKGlkLCBmb3JtQ29uZmlnKTsKCiAgICAgICAgaWYgKGl0ZW1Db25maWcpIHsKICAgICAgICAgIGl0ZW1Db25maWdba2V5XSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgKiDmoLnmja50YWfmn6Xlh7rnu4Tku7blkI3np7AKICAgICAgICogQHBhcmFtIHsqfSB0YWcgCiAgICAgICAqLwogICAgICBnZXRDb21wTmFtZUJ5VGFnOiBmdW5jdGlvbiBnZXRDb21wTmFtZUJ5VGFnKHRhZykgewogICAgICAgIHZhciByZXN1bHQgPSBPYmplY3QuZW50cmllcyh0aGlzLnJlZ2lzdGVyZWRBZGFwdGVyKS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtWzFdLnRhZyA9PT0gdGFnOwogICAgICAgIH0pWzBdOwoKICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICByZXR1cm4gcmVzdWx0WzBdOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfQogICAgfTsKICB9Cn07"},{"version":3,"sources":["/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/packages/plugins/form/basic-form.plugin.js"],"names":["StringUtil","require","JSONPath","CompError","errorCode","errorMsg","error","COMP_REGISTER_ERROR","COMP_EXIST_ERROR","COMP_NOT_VALID_ERROR","COMP_ADAPTER_REGISTER_ERROR","COMP_ADAPTER_EXIST_ERROR","COMP_ACTION_UUID_EXIST_ERROR","install","Vue","opts","prototype","$baseFormRegister","registeredComponent","registeredAdapter","registerComponent","compName","compType","component","template","render","mergeComponent","options","getComponentType","compTag","toCamel","hasComponent","Boolean","registerAdapter","tag","action","adapter","registerAdapterObj","getAdapterByTag","adapterArray","Object","values","tagAdapter","undefined","defaultAdapter","forEach","convertCompConfig","componentConfig","globalFormInfo","excuteAdapterEvent","actionEvent","formConfig","formData","compInfo","getConfigByUuid","uuid","resultArray","length","setConfigByUuid","key","value","itemConfig","getConfigById","id","setConfigById","getCompNameByTag","result","entries","filter","item"],"mappings":"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","sourcesContent":["/*\n * @Author: DevinShi\n * @Date: 2020-02-16 02:27:11\n * @LastEditors: Please set LastEditors\n * @LastEditTime: 2020-03-05 14:42:04\n * @Description: file content description\n */\nimport StringUtil from '../../utils/string.util';\nconst {JSONPath} = require('jsonpath-plus');\n\nclass CompError {\n    constructor(errorCode, errorMsg, error){\n        this.errorCode = errorCode;\n        this.errorMsg = errorMsg;\n        this.error = error;\n    }\n}\n\nconst COMP_REGISTER_ERROR = {\n     COMP_EXIST_ERROR: new CompError(-5001, '组件已经在表单中注册'),\n     COMP_NOT_VALID_ERROR: new CompError(-5002, '组件不是一个Vue的组件'),\n }\n\nconst COMP_ADAPTER_REGISTER_ERROR = {\n    COMP_ADAPTER_EXIST_ERROR: new CompError(-6001, '组件适配器已经在表单中注册'),\n    COMP_ACTION_UUID_EXIST_ERROR: new CompError(-6002, '组件事件监听对象不存在'),\n}\n\nexport default {\n    install (Vue, opts) {\n        Vue.prototype.$baseFormRegister = {\n            registeredComponent: {},\n            registeredAdapter: {},\n            registerComponent(compName, compType, component) {\n                if (typeof component.template === 'string' || typeof component.render === 'function') {\n                    if (!this.registeredComponent[compName]) {\n                        this.registeredComponent[compName] = {\n                            compType: compType,\n                            component: component\n                        }\n                    } else {\n                        throw COMP_REGISTER_ERROR.COMP_EXIST_ERROR;\n                    }\n                    \n                } else {\n                    throw COMP_REGISTER_ERROR.COMP_NOT_VALID_ERROR;\n                }\n            },\n            mergeComponent(compName, compType, component) {\n                if (typeof options.template === 'string' || typeof options.render === 'function') {\n                    this.registeredComponent[compName] = {\n                        compType: compType,\n                        component: component\n                    }\n                } else {\n                    throw COMP_REGISTER_ERROR.COMP_NOT_VALID_ERROR;\n                }\n            },\n            getComponentType(compTag) {\n                const compName = StringUtil.toCamel(compTag);\n                return this.registeredComponent[compName] && this.registeredComponent[compName].compType ;\n            },\n            hasComponent(compTag) {\n                const compName = StringUtil.toCamel(compTag);\n                return new Boolean(this.registeredComponent[compName])\n            },\n            /**\n             * 注册数据装换\n             * @param {*} compName \n             * @param {*} adapter \n             * @param {*} action \n             */\n            registerAdapter(compName,tag, action, adapter) {\n                if (!this.registeredAdapter[compName]) {\n                    this.registeredAdapter[compName] = {\n                        adapter: adapter,\n                        action: action,\n                        tag: tag\n                    }\n                } else {\n                    throw COMP_ADAPTER_REGISTER_ERROR.COMP_ADAPTER_EXIST_ERROR;\n                }\n            },\n            registerAdapterObj({compName, tag, action, adapter}) {\n                this.registerAdapter(compName,tag, action, adapter)\n            },\n            /**\n             * 根据标记获取adapter数据转换器\n             * @param {*} tag 标记获取adapter\n             */\n            getAdapterByTag(tag) {\n                const adapterArray = Object.values(this.registeredAdapter);\n                let tagAdapter = undefined;\n                let defaultAdapter = undefined;\n                adapterArray.forEach(adapter => {\n                    if (adapter.tag === tag) {\n                        tagAdapter = adapter;\n                    } else if (adapter.tag === 'DEFAULT') {\n                        defaultAdapter = adapter;\n                    }\n                });\n                if (!tagAdapter) {\n                    tagAdapter = defaultAdapter;\n                }\n                return tagAdapter;\n            },\n            /**\n             * 数据转换配置\n             * @param {*} componentConfig \n             * @param {*} tag \n             */\n            convertCompConfig(componentConfig, tag, globalFormInfo) {\n                // 根据tag找到转换器，转换数据\n                const adapter = this.getAdapterByTag(tag);\n                if (adapter && adapter.adapter) {\n                    return adapter.adapter(componentConfig, globalFormInfo);\n                } else {\n                    return componentConfig;\n                }\n            },\n            /**\n             * 执行注入事件\n             */\n            excuteAdapterEvent(compName, actionEvent, formConfig, globalFormInfo, formData) {\n                const adapter = this.registeredAdapter[compName];\n                const compInfo = this.getConfigByUuid(actionEvent.uuid, formConfig);\n                if (adapter) {\n                    return adapter.action(compInfo, actionEvent, globalFormInfo, formData, formConfig)\n                }\n            },\n            getConfigByUuid(uuid, formConfig) {\n                const resultArray = JSONPath(`$..[?(@.uuid === '${uuid}')]`, formConfig);\n                if (resultArray && resultArray.length > 0) {\n                    return resultArray[0];\n                } else {\n                    throw new COMP_ADAPTER_REGISTER_ERROR.COMP_ACTION_UUID_EXIST_ERROR\n                }\n            },\n            setConfigByUuid(uuid, formConfig, key, value) {\n                const itemConfig = this.getConfigByUuid(uuid, formConfig);\n                if (itemConfig) {\n                    itemConfig[key] = value ;\n                }\n            },\n            getConfigById(id, formConfig) {\n                const resultArray = JSONPath(`$..[?(@.id === '${id}')]`, formConfig);\n                if (resultArray && resultArray.length > 0) {\n                    return resultArray[0];\n                } else {\n                    throw new COMP_ADAPTER_REGISTER_ERROR.COMP_ACTION_UUID_EXIST_ERROR\n                }\n            },\n            setConfigById(id, formConfig, key, value) {\n                const itemConfig = this.getConfigById(id, formConfig);\n                if (itemConfig) {\n                    itemConfig[key] = value ;\n                }\n            },\n            /**\n             * 根据tag查出组件名称\n             * @param {*} tag \n             */\n            getCompNameByTag(tag) {\n                const result = Object.entries(this.registeredAdapter).filter(item => item[1].tag === tag)[0];\n                if (result) {\n                    return result[0];\n                }\n                return result;\n            }\n        }\n    }\n}"]}]}