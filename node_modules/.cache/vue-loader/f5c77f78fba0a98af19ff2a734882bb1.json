{"remainingRequest":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/packages/components/form/editor/dap-ui-editor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/packages/components/form/editor/dap-ui-editor.vue","mtime":1583478997545},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBJbnB1dENvbXBvbmVudE1peGluIGZyb20gJy4uLy4uLy4uL21peGlucy9pbnB1dC1jb21wb25lbnQtbWl4aW4uanMnOwppbXBvcnQgQmFzaWNDb21wb25lbnRNaXhpbiBmcm9tICcuLi8uLi8uLi9taXhpbnMvYmFzaWMtY29tcG9uZW50LW1peGluLmpzJzsKaW1wb3J0IFdhbmdFZGl0b3IgZnJvbSAnd2FuZ2VkaXRvcic7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkRhcFVpRWRpdG9yIiwKICB0eXBlOiAnRk9STV9JTlBVVCcsCiAgbWl4aW5zOiBbSW5wdXRDb21wb25lbnRNaXhpbiwgQmFzaWNDb21wb25lbnRNaXhpbl0sCiAgcHJvcHM6IHsKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2bURhdGE6IHsKICAgICAgICBlZGl0b3JJZDogbmV3IERhdGUoKS5nZXRUaW1lKCksCiAgICAgICAgZWRpdG9ySW5zdGFuY2U6IHVuZGVmaW5lZAogICAgICB9LAogICAgICBmaXJzdEdldFZhbHVlOiB0cnVlCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmFsdWU6eyAKICAgICAgaGFuZGxlcihuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgICBpZiAodGhpcy5kb2N1bWVudElkICYmIHRoaXMuZmlyc3RHZXRWYWx1ZSkgewogICAgICAgICAgdGhpcy5maXJzdEdldFZhbHVlID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnZtRGF0YS5lZGl0b3JJbnN0YW5jZS50eHQuaHRtbChuZXdWYWx1ZSk7CiAgICAgICAgfQogICAgICB9LAogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMudm1EYXRhLmVkaXRvckluc3RhbmNlID0gbmV3IFdhbmdFZGl0b3IodGhpcy4kcmVmc1t0aGlzLnZtRGF0YS5lZGl0b3JJZF0pOwogICAgdGhpcy52bURhdGEuZWRpdG9ySW5zdGFuY2UuY3VzdG9tQ29uZmlnLm1lbnVzID0gWwogICAgICAgICdoZWFkJywgIC8vIOagh+mimAogICAgICAgICdib2xkJywgIC8vIOeyl+S9kwogICAgICAgICdmb250U2l6ZScsICAvLyDlrZflj7cKICAgICAgICAnZm9udE5hbWUnLCAgLy8g5a2X5L2TCiAgICAgICAgJ2l0YWxpYycsICAvLyDmlpzkvZMKICAgICAgICAndW5kZXJsaW5lJywgIC8vIOS4i+WIkue6vwogICAgICAgICdzdHJpa2VUaHJvdWdoJywgIC8vIOWIoOmZpOe6vwogICAgICAgICdmb3JlQ29sb3InLCAgLy8g5paH5a2X6aKc6ImyCiAgICAgICAgJ2JhY2tDb2xvcicsICAvLyDog4zmma/popzoibIKICAgICAgICAnbGluaycsICAvLyDmj5LlhaXpk77mjqUKICAgICAgICAnbGlzdCcsICAvLyDliJfooagKICAgICAgICAnanVzdGlmeScsICAvLyDlr7npvZDmlrnlvI8KICAgICAgICAncXVvdGUnLCAgLy8g5byV55SoCiAgICAgICAgJ2ltYWdlJywgIC8vIOaPkuWFpeWbvueJhwogICAgICAgICd0YWJsZScsICAvLyDooajmoLwKICAgICAgICAndmlkZW8nLCAgLy8g5o+S5YWl6KeG6aKRCiAgICAgICAgJ2NvZGUnLCAgLy8g5o+S5YWl5Luj56CBCiAgICAgICAgJ3VuZG8nLCAgLy8g5pKk6ZSACiAgICAgICAgJ3JlZG8nICAvLyDph43lpI0KICAgIF07CiAgICB0aGlzLnZtRGF0YS5lZGl0b3JJbnN0YW5jZS5jdXN0b21Db25maWcudXBsb2FkSW1nU2hvd0Jhc2U2NCA9IHRydWU7CiAgICB0aGlzLnZtRGF0YS5lZGl0b3JJbnN0YW5jZS5jdXN0b21Db25maWcub25jaGFuZ2UgPSAoaHRtbCA9PiB7CiAgICAgICAgdGhpcy5maXJzdEdldFZhbHVlID0gZmFsc2U7CiAgICAgICAgaWYgKGh0bWwgPT09ICI8cD48YnI+PC9wPiIpIHsKICAgICAgICAgIHRoaXMuJGZvcm1FdmVudEVtaXQoJ2NoYW5nZScsICIiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kZm9ybUV2ZW50RW1pdCgnY2hhbmdlJywgaHRtbCk7CiAgICAgICAgfQogICAgfSk7CiAgICB0aGlzLnZtRGF0YS5lZGl0b3JJbnN0YW5jZS5jdXN0b21Db25maWcub25ibHVyID0gKGh0bWwgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCJibHVyIiAsaHRtbCk7CiAgICB9KTsKICAgIHRoaXMudm1EYXRhLmVkaXRvckluc3RhbmNlLmN1c3RvbUNvbmZpZy5jdXN0b21VcGxvYWRJbWcgPSB0aGlzLmV4dHJhUHJvcC5jdXN0b21VcGxvYWRJbWc7CiAgICB0aGlzLnZtRGF0YS5lZGl0b3JJbnN0YW5jZS5jcmVhdGUoKTsKICAgIGlmICh0aGlzLmRpc2FibGVkKSB7CiAgICAgIHRoaXMudm1EYXRhLmVkaXRvckluc3RhbmNlLiR0ZXh0RWxlbS5hdHRyKCdjb250ZW50ZWRpdGFibGUnLCBmYWxzZSk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnZtRGF0YS5lZGl0b3JJbnN0YW5jZS4kdGV4dEVsZW0uYXR0cignY29udGVudGVkaXRhYmxlJywgdHJ1ZSk7CiAgICB9CiAgfSwKfQo="},{"version":3,"sources":["dap-ui-editor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dap-ui-editor.vue","sourceRoot":"packages/components/form/editor","sourcesContent":["<!--\n * @Author: DevinShi\n * @Date: 2020-02-06 10:37:47\n * @LastEditors: DevinShi\n * @LastEditTime: 2020-02-18 11:01:33\n * @Description: file content description\n -->\n<template>\n  <div class=\"dap-ui-editor dap-ui-form-item dap-ui-form-input\">\n    <div class=\"app-design-editor\" :style=\"{'border-color' : validateStatus === 'error' ? '#f5222d' : '#e8e8e8'}\">\n      <header class=\"app-design-editor-header\"><label v-if=\"required\" class=\"ant-form-item-required\"></label>{{ label }}</header>\n      <article class=\"app-design-editor-article\">\n          <div :class=\"{'editor': !disabled, 'editor-disabled': disabled}\" :ref=\"vmData.editorId\"></div>\n          \n      </article> \n    </div>\n    <div class=\"editor-error\" v-if=\"validateStatus === 'error'\">{{help}}</div>\n  </div>\n</template>\n<script>\nimport InputComponentMixin from '../../../mixins/input-component-mixin.js';\nimport BasicComponentMixin from '../../../mixins/basic-component-mixin.js';\nimport WangEditor from 'wangeditor';\n\nexport default {\n  name: \"DapUiEditor\",\n  type: 'FORM_INPUT',\n  mixins: [InputComponentMixin, BasicComponentMixin],\n  props: {\n  },\n  data() {\n    return {\n      vmData: {\n        editorId: new Date().getTime(),\n        editorInstance: undefined\n      },\n      firstGetValue: true\n    }\n  },\n  watch: {\n    value:{ \n      handler(newValue, oldValue) {\n        if (this.documentId && this.firstGetValue) {\n          this.firstGetValue = false;\n          this.vmData.editorInstance.txt.html(newValue);\n        }\n      },\n    }\n  },\n  mounted() {\n    this.vmData.editorInstance = new WangEditor(this.$refs[this.vmData.editorId]);\n    this.vmData.editorInstance.customConfig.menus = [\n        'head',  // 标题\n        'bold',  // 粗体\n        'fontSize',  // 字号\n        'fontName',  // 字体\n        'italic',  // 斜体\n        'underline',  // 下划线\n        'strikeThrough',  // 删除线\n        'foreColor',  // 文字颜色\n        'backColor',  // 背景颜色\n        'link',  // 插入链接\n        'list',  // 列表\n        'justify',  // 对齐方式\n        'quote',  // 引用\n        'image',  // 插入图片\n        'table',  // 表格\n        'video',  // 插入视频\n        'code',  // 插入代码\n        'undo',  // 撤销\n        'redo'  // 重复\n    ];\n    this.vmData.editorInstance.customConfig.uploadImgShowBase64 = true;\n    this.vmData.editorInstance.customConfig.onchange = (html => {\n        this.firstGetValue = false;\n        if (html === \"<p><br></p>\") {\n          this.$formEventEmit('change', \"\");\n        } else {\n          this.$formEventEmit('change', html);\n        }\n    });\n    this.vmData.editorInstance.customConfig.onblur = (html => {\n        console.log(\"blur\" ,html);\n    });\n    this.vmData.editorInstance.customConfig.customUploadImg = this.extraProp.customUploadImg;\n    this.vmData.editorInstance.create();\n    if (this.disabled) {\n      this.vmData.editorInstance.$textElem.attr('contenteditable', false);\n    } else {\n      this.vmData.editorInstance.$textElem.attr('contenteditable', true);\n    }\n  },\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style src=\"./index.less\" lang=\"less\">\n</style>\n"]}]}