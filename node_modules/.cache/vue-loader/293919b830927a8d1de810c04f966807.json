{"remainingRequest":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/packages/components/form/table-extend/dap-ui-table-extend.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/packages/components/form/table-extend/dap-ui-table-extend.vue","mtime":1583476762829},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBJbnB1dENvbXBvbmVudE1peGluIGZyb20gIi4uLy4uLy4uL21peGlucy9pbnB1dC1jb21wb25lbnQtbWl4aW4uanMiOwppbXBvcnQgQmFzaWNDb21wb25lbnRNaXhpbiBmcm9tICIuLi8uLi8uLi9taXhpbnMvYmFzaWMtY29tcG9uZW50LW1peGluLmpzIjsKaW1wb3J0IHsgdmFsaWRhdGlvbk1peGluIH0gZnJvbSAndnVlbGlkYXRlJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEYXBVaVRhYmxlRXh0ZW5kIiwKICB0eXBlOiAiRk9STV9JTlBVVCIsCiAgbWl4aW5zOiBbSW5wdXRDb21wb25lbnRNaXhpbiwgQmFzaWNDb21wb25lbnRNaXhpbiwgdmFsaWRhdGlvbk1peGluXSwKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICBjb2x1bW5zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YWJsZUJhc2VDb25maWc6IHsKICAgICAgICBzZWxlY3RNb2RlOiAiIiwKICAgICAgICBtYXhIZWlnaHQ6ICIyNDBweCIsCiAgICAgICAgdmlydHVhbExpc3Q6IHRydWUKICAgICAgfSwKICAgICAgdmVydGljYWxUYWJsZUJhc2VDb25maWc6IHsKICAgICAgICBzZWxlY3RNb2RlOiAiIiwKICAgICAgICBtYXhIZWlnaHQ6ICIyNDBweCIsCiAgICAgICAgdmlydHVhbExpc3Q6IHRydWUKICAgICAgfSwKICAgICAgZGlzcGxheVR5cGU6ICJob3Jpem9udGFsIiwKICAgICAgZGlzcGxheVR5cGVMYWJlbHM6IFsKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogIuaoquWQkSjliJfooagpIiwKICAgICAgICAgIHZhbHVlOiAiaG9yaXpvbnRhbCIKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAi57q15ZCRKOWNleadoeaYjue7hikiLAogICAgICAgICAgdmFsdWU6ICJ2ZXJ0aWNhbCIKICAgICAgICB9CiAgICAgIF0sCiAgICAgIHJlYWRPbmx5OiBmYWxzZQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBjb2x1bW5zOiB7CiAgICAgIGhhbmRsZXIobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgICAgaWYgKG5ld1ZhbHVlKSB7CiAgICAgICAgICBjb25zdCBjb2x1bW5zID0gbmV3VmFsdWU7CiAgICAgICAgICBjb2x1bW5zLm1hcChpdGVtID0+IHsKICAgICAgICAgICAgaXRlbS5zbG90TmFtZSA9ICdjdXN0b21Db2x1bW4nOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLnRhYmxlQmFzZUNvbmZpZy5jb2x1bW5zID0gY29sdW1uczsgLy8g5qiq5ZCR6KGo5qC8CiAgICAgICAgICB0aGlzLnZlcnRpY2FsVGFibGVCYXNlQ29uZmlnLmNvbHVtbnMgPSBbCiAgICAgICAgICAgIHsgZmllbGQ6ICJfIiwgdGl0bGU6ICIiLCBzbG90TmFtZTogImN1c3RvbUNvbHVtbiIgfQogICAgICAgICAgXTsgLy8g57q15ZCR6KGo5qC8CiAgICAgICAgICAvLyByZWFkb25seQogICAgICAgICAgY29uc3QgZmxhZyA9IG5ld1ZhbHVlLmV2ZXJ5KGl0ZW0gPT4gaXRlbS5yZWFkT25seSk7CiAgICAgICAgICB0aGlzLnJlYWRPbmx5ID0gZmxhZzsKICAgICAgICAgIGlmIChmbGFnKSB7CiAgICAgICAgICAgIHRoaXMudGFibGVCYXNlQ29uZmlnLnNlbGVjdE1vZGUgPSAiIjsKICAgICAgICAgICAgdGhpcy52ZXJ0aWNhbFRhYmxlQmFzZUNvbmZpZy5zZWxlY3RNb2RlID0gIiI7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnRhYmxlQmFzZUNvbmZpZy5zZWxlY3RNb2RlID0gIm11bHRpcGFydCI7CiAgICAgICAgICAgIHRoaXMudmVydGljYWxUYWJsZUJhc2VDb25maWcuc2VsZWN0TW9kZSA9ICJtdWx0aXBhcnQiOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9CiAgICAvLyB2YWx1ZTogewogICAgLy8gICBoYW5kbGVyKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgLy8gICAgIGlmICghbmV3VmFsdWUpIHsKICAgIC8vICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTp2YWx1ZScsIFtdKTsKICAgIC8vICAgICB9CiAgICAvLyAgIH0sCiAgICAvLyAgIGltbWVkaWF0ZTogdHJ1ZQogICAgLy8gfQogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLiRmb3JtRXZlbnRFbWl0KCdpbml0LXRhYmxlLWRhdGEnKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNjcm9sbFRvTGFzdFJvdygpIHsKICAgICAgY29uc3Qgcm93ID0gdGhpcy52YWx1ZVt0aGlzLnZhbHVlLmxlbmd0aCAtIDFdOwogICAgICBpZiAodGhpcy5kaXNwbGF5VHlwZSA9PT0gImhvcml6b250YWwiKSB7CiAgICAgICAgdGhpcy4kcmVmcy5ob3Jpem9udGFsVGFibGUuc2Nyb2xsVG9Sb3cocm93KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyZWZzLnZlcnRpY2FsVGFibGUuc2Nyb2xsVG9Sb3cocm93KTsKICAgICAgfQogICAgfSwKICAgIGdldENoZWNrZWREYXRhKCkgewogICAgICBsZXQgY2hlY2tlZERhdGE7CiAgICAgIGlmICh0aGlzLmRpc3BsYXlUeXBlID09PSAiaG9yaXpvbnRhbCIpIHsKICAgICAgICBjaGVja2VkRGF0YSA9IHRoaXMuJHJlZnMuaG9yaXpvbnRhbFRhYmxlLmdldENoZWtjZWQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjaGVja2VkRGF0YSA9IHRoaXMuJHJlZnMudmVydGljYWxUYWJsZS5nZXRDaGVrY2VkKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGNoZWNrZWREYXRhOwogICAgfSwKICAgIG9uQ2xpY2tBZGQoZSkgewogICAgICBjb25zdCBvYmogPSB7fTsKICAgICAgdGhpcy50YWJsZUJhc2VDb25maWcuY29sdW1ucy5tYXAoaXRlbSA9PiB7CiAgICAgICAgb2JqW2l0ZW0uZmllbGRdID0gdW5kZWZpbmVkOwogICAgICB9KTsKICAgICAgdGhpcy52YWx1ZS5wdXNoKG9iaik7CiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTp2YWx1ZScsIE9iamVjdC5hc3NpZ24oW10sIHRoaXMudmFsdWUpKTsKICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgdGhpcy52YWx1ZSk7CiAgICAgIHRoaXMuc2Nyb2xsVG9MYXN0Um93KCk7CiAgICAgIHRoaXMuJGZvcm1FdmVudEVtaXQoJ2FkZC1yZWNvcmQnLCB7CiAgICAgICAgbW91c2VFdmVudDogZQogICAgICB9KTsKICAgIH0sCiAgICBvbkNsaWNrQ29weShlKSB7CiAgICAgIGNvbnN0IGNoZWNrZWREYXRhID0gdGhpcy5nZXRDaGVja2VkRGF0YSgpOwogICAgICBjb25zdCBhcnIgPSBbXTsKICAgICAgY2hlY2tlZERhdGEubWFwKGl0ZW0gPT4gewogICAgICAgIGNvbnN0IG9iaiA9IHt9OwogICAgICAgIHRoaXMudGFibGVCYXNlQ29uZmlnLmNvbHVtbnMubWFwKGNvbHVtbiA9PiB7CiAgICAgICAgICBvYmpbY29sdW1uLmZpZWxkXSA9IGl0ZW1bY29sdW1uLmZpZWxkXTsKICAgICAgICB9KTsKICAgICAgICBhcnIucHVzaChvYmopOwogICAgICB9KTsKICAgICAgdGhpcy52YWx1ZS5wdXNoKC4uLmFycik7CiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTp2YWx1ZScsIE9iamVjdC5hc3NpZ24oW10sIHRoaXMudmFsdWUpKTsKICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgdGhpcy52YWx1ZSk7CiAgICAgIHRoaXMuc2Nyb2xsVG9MYXN0Um93KCk7CiAgICAgIHRoaXMuJGZvcm1FdmVudEVtaXQoJ2NvcHktcmVjb3JkJywgewogICAgICAgIG1vdXNlRXZlbnQ6IGUKICAgICAgfSk7CiAgICB9LAogICAgb25DbGlja0RlbGV0ZShlKSB7CiAgICAgIGNvbnN0IGNoZWNrZWREYXRhID0gdGhpcy5nZXRDaGVja2VkRGF0YSgpOwogICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgY2hlY2tlZERhdGEpIHsKICAgICAgICB0aGlzLnZhbHVlLnNwbGljZSh0aGlzLnZhbHVlLmluZGV4T2YoaXRlbSksIDEpOwogICAgICB9CiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTp2YWx1ZScsIE9iamVjdC5hc3NpZ24oW10sIHRoaXMudmFsdWUpKTsKICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgdGhpcy52YWx1ZSk7CiAgICAgIHRoaXMuJGZvcm1FdmVudEVtaXQoJ2RlbGV0ZS1yZWNvcmQnLCB7CiAgICAgICAgbW91c2VFdmVudDogZSwKICAgICAgICBjaGVja2VkRGF0YTogY2hlY2tlZERhdGEKICAgICAgfSk7CiAgICB9LAogICAgb25DZWxsQ2xpY2soZSkgewogICAgICB0aGlzLiRmb3JtRXZlbnRFbWl0KCdjZWxsLWNsaWNrJywgZSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDooajljZXkuovku7boh6rliqjop6blj5EKICAgICAqLwogICAgZm9ybUV2ZW50RW1pdCgkZXZlbnQpIHsKICAgICAgLy8g6KGo5Y2V5LqL5Lu25Y+R6YCBCiAgICAgIC8vIHRoaXMuJGJhc2VGb3JtUmVnaXN0ZXIuZXhjdXRlQWRhcHRlckV2ZW50KCRldmVudC5jb21wb25lbnROYW1lLCAkZXZlbnQsIHRoaXMuZm9ybUNvbmZpZywgdGhpcy5nbG9iYWxGb3JtSW5mbywgdGhpcy5mb3JtRGF0YSkKICAgICAgdGhpcy4kZW1pdCgnZm9ybUV2ZW50RW1pdCcsICRldmVudCk7CiAgICB9LAogICAgZm9ybVZhbHVlVHJhbnNDaGFuZ2Uocm93LCB0cmFuc0RhdGFDb2RlLCB2YWx1ZSkgewogICAgICB0aGlzLiRzZXQocm93LCB0cmFuc0RhdGFDb2RlLCB2YWx1ZSk7CiAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIHRoaXMudmFsdWUpOwogICAgfSwKICAgIGZvcm1WYWx1ZUNoYW5nZShyb3csIGRhdGFDb2RlLCB2YWx1ZSkgewogICAgICB0aGlzLiRzZXQocm93LCBkYXRhQ29kZSwgdmFsdWUpOwogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCB0aGlzLnZhbHVlKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["dap-ui-table-extend.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dap-ui-table-extend.vue","sourceRoot":"packages/components/form/table-extend","sourcesContent":["<!--\n * @Author: your name\n * @Date: 2020-02-20 10:13:07\n * @LastEditTime: 2020-03-05 18:06:16\n * @LastEditors: Please set LastEditors\n * @Description: In User Settings Edit\n * @FilePath: /dap-vue-ui/packages/components/form/table-extend/dap-ui-table-extend.vue\n -->\n<template>\n  <div class=\"dap-ui-table-extend\" :class=\"{'validate-error': validateStatus === 'error'}\">\n    <div class=\"dap-ui-table-extend-title\">\n      <div class=\"title\">\n        <span :style=\"{'color': labelColor}\">{{ label }}</span>\n      </div>\n      <div class=\"operation\">\n        <span>显示方式：</span>\n        <a-radio-group v-model=\"displayType\">\n          <a-radio\n            v-for=\"(item, index) in displayTypeLabels\"\n            :key=\"index\"\n            :value=\"item.value\"\n          >{{ item.label }}</a-radio>\n        </a-radio-group>\n        <a-button v-if=\"!readOnly\" type=\"primary\" size=\"small\" @click=\"onClickAdd\">新建记录</a-button>\n        <a-button v-if=\"!readOnly\" style=\"margin-left: 1rem;\" type=\"primary\" size=\"small\" @click=\"onClickCopy\">复制新建</a-button>\n        <a-button v-if=\"!readOnly\" style=\"margin-left: 1rem;\" type=\"default\" size=\"small\" @click=\"onClickDelete\">删除</a-button>\n      </div>\n    </div>\n    <dap-ui-table\n      v-if=\"displayType === 'horizontal'\"\n      ref=\"horizontalTable\"\n      :table-data.sync=\"value\"\n      :table-base-config=\"tableBaseConfig\"\n      @cell-click=\"onCellClick\"\n    >\n      <template v-slot:customColumn=\"{ row, rowIndex, column }\">\n        <component\n          :has-feedback=\"false\"\n          :label-color=\"column.labelColor\"\n          :required=\"column.required\"\n          :is=\"column.componentName\"\n          :label=\"column.label\"\n          :value=\"row[column.dataCode]\"\n          :transValue.sync=\"row[column.transDataCode]\"\n          :uuid=\"column.uuid\"\n          :options=\"column.options\"\n          :disabled=\"column.disabled\"\n          :placeholder=\"column.placeholder\"\n          :componentName=\"column.componentName\"\n          :columns=\"column.columnSet\"\n          :extraProp=\"column.extraProp\"\n          :colSpan=\"column.colSpan\"\n          :multi=\"column.multi\"\n          :defaultValue=\"column.defaultValue\"\n          @formEventEmit=\"formEventEmit($event)\"\n          @updateTransValue=\"formValueTransChange(row, column.transDataCode, $event)\"\n          @change=\"formValueChange(row, column.dataCode, $event)\"></component>\n      </template>\n    </dap-ui-table>\n    <div v-if=\"displayType === 'vertical'\" class=\"vertical-table\">\n      <dap-ui-table\n        ref=\"verticalTable\"\n        :table-data.sync=\"value\"\n        :table-base-config=\"verticalTableBaseConfig\"\n        @cell-click=\"onCellClick\"\n      >\n        <template v-slot:customColumn=\"{ row, rowIndex }\">\n          <div class=\"vertical-row\">\n            <div class=\"column\" v-for=\"(column, index) in tableBaseConfig.columns\" :key=\"index\">\n              <a-tooltip :title=\"column.title\">\n                <span class=\"label\" :class=\"{ required: column.required }\">{{ column.title }}：</span>\n              </a-tooltip>\n              <div class=\"value\">\n                <component\n                :has-feedback=\"false\"\n                :label-color=\"column.labelColor\"\n                :required=\"column.required\"\n                :is=\"column.componentName\"\n                :label=\"column.label\"\n                :value=\"row[column.dataCode]\"\n                :transValue.sync=\"row[column.transDataCode]\"\n                :uuid=\"column.uuid\"\n                :options=\"column.options\"\n                :disabled=\"column.disabled\"\n                :placeholder=\"column.placeholder\"\n                :componentName=\"column.componentName\"\n                :columns=\"column.columnSet\"\n                :extraProp=\"column.extraProp\"\n                :colSpan=\"column.colSpan\"\n                :multi=\"column.multi\"\n                :defaultValue=\"column.defaultValue\"\n                @formEventEmit=\"formEventEmit($event)\"\n                @updateTransValue=\"formValueTransChange(row, column.transDataCode, $event)\"\n                @change=\"formValueChange(row, column.dataCode, $event)\"></component>\n              </div>\n            </div>\n          </div>\n        </template>\n      </dap-ui-table>\n    </div>\n    <div class=\"dap-ui-table-extend-footer\">\n      <div class=\"ant-form-explain\">{{ help }}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport InputComponentMixin from \"../../../mixins/input-component-mixin.js\";\nimport BasicComponentMixin from \"../../../mixins/basic-component-mixin.js\";\nimport { validationMixin } from 'vuelidate'\n\nexport default {\n  name: \"DapUiTableExtend\",\n  type: \"FORM_INPUT\",\n  mixins: [InputComponentMixin, BasicComponentMixin, validationMixin],\n  props: {\n    value: {\n      type: Array,\n      default: function () {\n        return [];\n      }\n    },\n    columns: {\n      type: Array,\n      default: function() {\n        return [];\n      }\n    }\n  },\n  data() {\n    return {\n      tableBaseConfig: {\n        selectMode: \"\",\n        maxHeight: \"240px\",\n        virtualList: true\n      },\n      verticalTableBaseConfig: {\n        selectMode: \"\",\n        maxHeight: \"240px\",\n        virtualList: true\n      },\n      displayType: \"horizontal\",\n      displayTypeLabels: [\n        {\n          label: \"横向(列表)\",\n          value: \"horizontal\"\n        },\n        {\n          label: \"纵向(单条明细)\",\n          value: \"vertical\"\n        }\n      ],\n      readOnly: false\n    };\n  },\n  watch: {\n    columns: {\n      handler(newValue, oldValue) {\n        if (newValue) {\n          const columns = newValue;\n          columns.map(item => {\n            item.slotName = 'customColumn';\n          });\n          this.tableBaseConfig.columns = columns; // 横向表格\n          this.verticalTableBaseConfig.columns = [\n            { field: \"_\", title: \"\", slotName: \"customColumn\" }\n          ]; // 纵向表格\n          // readonly\n          const flag = newValue.every(item => item.readOnly);\n          this.readOnly = flag;\n          if (flag) {\n            this.tableBaseConfig.selectMode = \"\";\n            this.verticalTableBaseConfig.selectMode = \"\";\n          } else {\n            this.tableBaseConfig.selectMode = \"multipart\";\n            this.verticalTableBaseConfig.selectMode = \"multipart\";\n          }\n        }\n      },\n      immediate: true\n    }\n    // value: {\n    //   handler(newValue, oldValue) {\n    //     if (!newValue) {\n    //       this.$emit('update:value', []);\n    //     }\n    //   },\n    //   immediate: true\n    // }\n  },\n\n  mounted() {\n    this.$formEventEmit('init-table-data');\n  },\n  methods: {\n    scrollToLastRow() {\n      const row = this.value[this.value.length - 1];\n      if (this.displayType === \"horizontal\") {\n        this.$refs.horizontalTable.scrollToRow(row);\n      } else {\n        this.$refs.verticalTable.scrollToRow(row);\n      }\n    },\n    getCheckedData() {\n      let checkedData;\n      if (this.displayType === \"horizontal\") {\n        checkedData = this.$refs.horizontalTable.getChekced();\n      } else {\n        checkedData = this.$refs.verticalTable.getChekced();\n      }\n      return checkedData;\n    },\n    onClickAdd(e) {\n      const obj = {};\n      this.tableBaseConfig.columns.map(item => {\n        obj[item.field] = undefined;\n      });\n      this.value.push(obj);\n      this.$emit('update:value', Object.assign([], this.value));\n      this.$emit('change', this.value);\n      this.scrollToLastRow();\n      this.$formEventEmit('add-record', {\n        mouseEvent: e\n      });\n    },\n    onClickCopy(e) {\n      const checkedData = this.getCheckedData();\n      const arr = [];\n      checkedData.map(item => {\n        const obj = {};\n        this.tableBaseConfig.columns.map(column => {\n          obj[column.field] = item[column.field];\n        });\n        arr.push(obj);\n      });\n      this.value.push(...arr);\n      this.$emit('update:value', Object.assign([], this.value));\n      this.$emit('change', this.value);\n      this.scrollToLastRow();\n      this.$formEventEmit('copy-record', {\n        mouseEvent: e\n      });\n    },\n    onClickDelete(e) {\n      const checkedData = this.getCheckedData();\n      for (const item of checkedData) {\n        this.value.splice(this.value.indexOf(item), 1);\n      }\n      this.$emit('update:value', Object.assign([], this.value));\n      this.$emit('change', this.value);\n      this.$formEventEmit('delete-record', {\n        mouseEvent: e,\n        checkedData: checkedData\n      });\n    },\n    onCellClick(e) {\n      this.$formEventEmit('cell-click', e);\n    },\n    /**\n     * 表单事件自动触发\n     */\n    formEventEmit($event) {\n      // 表单事件发送\n      // this.$baseFormRegister.excuteAdapterEvent($event.componentName, $event, this.formConfig, this.globalFormInfo, this.formData)\n      this.$emit('formEventEmit', $event);\n    },\n    formValueTransChange(row, transDataCode, value) {\n      this.$set(row, transDataCode, value);\n      this.$emit('change', this.value);\n    },\n    formValueChange(row, dataCode, value) {\n      this.$set(row, dataCode, value);\n      this.$emit('change', this.value);\n    }\n  }\n};\n</script>\n<style src=\"./index.less\" lang=\"less\"></style>\n"]}]}