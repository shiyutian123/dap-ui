{"remainingRequest":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/packages/components/bpmn-process-flow/dap-ui-bpmn-process-flow.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/packages/components/bpmn-process-flow/dap-ui-bpmn-process-flow.vue","mtime":1583476762820},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/coder/project/04_dap/lerna-dap/packages/dap-vue-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIFgySlMgZnJvbSAieDJqcyI7Cgp2YXIgQnBtbkpTOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkRhcFVpQnBtblByb2Nlc3NGbG93IiwKICBwcm9wczogewogICAgZXh0cmFQcm9wOiB7CiAgICAgIHR5cGU6IE9iamVjdAogICAgfSwKICAgIGxvYWRpbmc6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHJpbWFyeUNvbG9yOiAncmdiKDQ4LCAxMjksIDI1MSknLAogICAgICBtb2RlbGVyOiB1bmRlZmluZWQsCiAgICAgIG1vZGFsQ29uZmlnOiB7CiAgICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgICAgdGl0bGU6ICLmtYHnqIvlm74iLAogICAgICAgIHNpemU6ICJsYXJnZSIsCiAgICAgICAgbW9kYWxDbGFzczogImRhcC11aS1icG1uLXByb2Nlc3MtZmxvdyIKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvYWRSZXNvdXJjZXMoeyBkb21haW4sIGNhbGxiYWNrIH0pIHsKICAgICAgdGhpcy5tb2RhbENvbmZpZy52aXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy4kYXN5bmNMb2FkUmVzb3VyY2UoCiAgICAgICAgYCR7ZG9tYWlufS9icG1uLWpzL2RpYWdyYW0tanMuY3NzYCwKICAgICAgICAibGluayIsCiAgICAgICAgImRpYWdyYW0tanMtY3NzIgogICAgICApLnRoZW4oKTsKICAgICAgdGhpcy4kYXN5bmNMb2FkUmVzb3VyY2UoCiAgICAgICAgYCR7ZG9tYWlufS9icG1uLWpzL2Nzcy9icG1uLmNzc2AsCiAgICAgICAgImxpbmsiLAogICAgICAgICJicG1uLWNzcyIKICAgICAgKS50aGVuKCk7CiAgICAgIHRoaXMuJGFzeW5jTG9hZFJlc291cmNlKAogICAgICAgIGAke2RvbWFpbn0vYnBtbi1qcy9icG1uLW1vZGVsZXIuZGV2ZWxvcG1lbnQuanNgLAogICAgICAgICJzY3JpcHQiLAogICAgICAgICJicG1uanMiCiAgICAgICkudGhlbigoKSA9PiB7CiAgICAgICAgQnBtbkpTID0gd2luZG93LkJwbW5KUzsKICAgICAgICB0aGlzLmluaXRCcG1uQ2FudmFzKCk7CiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTsKICAgICAgfSk7CiAgICB9LAogICAgaW5pdEJwbW5DYW52YXMoKSB7CiAgICAgIHRoaXMubW9kZWxlciA9IG5ldyBCcG1uSlMoewogICAgICAgIGNvbnRhaW5lcjogIiNqcy1jYW52YXMiCiAgICAgIH0pOwogICAgICBjb25zdCBianNQb3dlcmVkQnlEb20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuYmpzLXBvd2VyZWQtYnkiKVswXTsKICAgICAgaWYgKGJqc1Bvd2VyZWRCeURvbSkgewogICAgICAgIGJqc1Bvd2VyZWRCeURvbS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICB9CiAgICAgIGNvbnN0IGRqc1BhbGV0dGVEb20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuZGpzLXBhbGV0dGUiKVswXTsKICAgICAgaWYgKGRqc1BhbGV0dGVEb20pIHsKICAgICAgICBkanNQYWxldHRlRG9tLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgIH0KICAgIH0sCiAgICBpbXBvcnREaWFncmFtRm9ySnNvbihkaWFncmFtSlNPTikgewogICAgICBjb25zdCB4MmpzID0gbmV3IFgySlMoKTsKICAgICAgY29uc3QgeG1sID0geDJqcy5qczJ4bWwoZGlhZ3JhbUpTT04pOwogICAgICB0aGlzLmltcG9ydERpYWdyYW0oeG1sKS50aGVuKCgpID0+IHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIGNvbnN0IGRqc0dyb3VwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmRqcy1ncm91cCIpOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkanNHcm91cC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBkanNHcm91cFtpXS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGUgPT4gewogICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBkanNHcm91cFtpXS5hZGRFdmVudExpc3RlbmVyKCJkYmxjbGljayIsIGUgPT4gewogICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBkanNHcm91cFtpXS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLCBlID0+IHsKICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IGRqc1NlZ21lbnREcmFnZ2VycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoCiAgICAgICAgICAgICIuZGpzLXNlZ21lbnQtZHJhZ2dlciIKICAgICAgICAgICk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRqc1NlZ21lbnREcmFnZ2Vycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBkanNTZWdtZW50RHJhZ2dlcnNbaV0uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBlID0+IHsKICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZGpzU2VnbWVudERyYWdnZXJzW2ldLmFkZEV2ZW50TGlzdGVuZXIoImRibGNsaWNrIiwgZSA9PiB7CiAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGRqc1NlZ21lbnREcmFnZ2Vyc1tpXS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLCBlID0+IHsKICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IHJlY3REb21zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInJlY3QiKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVjdERvbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgcmVjdERvbXNbaV0uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBlID0+IHsKICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmVjdERvbXNbaV0uYWRkRXZlbnRMaXN0ZW5lcigiZGJsY2xpY2siLCBlID0+IHsKICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmVjdERvbXNbaV0uYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwgZSA9PiB7CiAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGltcG9ydERpYWdyYW0oZGlhcmFtWE1MKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdGhpcy5tb2RlbGVyLmltcG9ydFhNTChkaWFyYW1YTUwsIGVyciA9PiB7CiAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5tb2RlbGVyLmdldCgiY2FudmFzIik7CiAgICAgICAgICAvLyB6b29tIHRvIGZpdCBmdWxsIHZpZXdwb3J0CiAgICAgICAgICBjYW52YXMuem9vbSgiZml0LXZpZXdwb3J0Iik7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUNhbmNlbCgpIHsKICAgICAgdGhpcy5tb2RhbENvbmZpZy52aXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMubW9kZWxlci5kZXN0cm95KCk7CiAgICAgIHRoaXMubW9kZWxlciA9IHVuZGVmaW5lZDsKICAgIH0sCiAgICBoYW5kbGVPaygpIHsKICAgICAgdGhpcy5tb2RhbENvbmZpZy52aXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgZmlsbENvbG9yKCkgewogICAgICBjb25zdCBub2RlUGF0aCA9IHRoaXMuZXh0cmFQcm9wLm5vZGVQYXRoOwogICAgICBpZiAoIW5vZGVQYXRoIHx8IG5vZGVQYXRoLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBzaGFwZUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmRqcy1lbGVtZW50LmRqcy1zaGFwZSIpOwogICAgICBjb25zdCBjb25uRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKAogICAgICAgICIuZGpzLWVsZW1lbnQuZGpzLWNvbm5lY3Rpb24iCiAgICAgICk7CiAgICAgIC8vIFRPRE86IOabv+aNoua1geeoi+iKgueCueeahOagt+W8j+S4uuS6p+WTgeagt+W8jwogICAgICB0aGlzLnJlcGxhY2VOb2RlVG9DdXN0b20oCiAgICAgICAgc2hhcGVFbGVtZW50cywKICAgICAgICB0aGlzLmV4dHJhUHJvcC5ub2RlcwogICAgICApOwogICAgICB0aGlzLnJlcGxhY2VDb25uVG9DdXN0b20oKTsKICAgICAgdGhpcy5yZXBsYWNlR2F0ZXdheVRvQ3VzdG9tKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVQYXRoLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVQYXRoW2ldOwogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2hhcGVFbGVtZW50cy5sZW5ndGg7IGorKykgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIHRoaXMuZ2V0RWxlRGF0YUlkKHNoYXBlRWxlbWVudHNbal0pID09PSBub2RlLnRvIHx8CiAgICAgICAgICAgICAgdGhpcy5nZXRFbGVEYXRhSWQoc2hhcGVFbGVtZW50c1tqXSkKICAgICAgICAgICAgICAgIC50b1VwcGVyQ2FzZSgpCiAgICAgICAgICAgICAgICAuaW5kZXhPZihub2RlLnRvKSA+IC0xCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGNvbnN0IGRqc1Zpc3VhbERvbSA9IHNoYXBlRWxlbWVudHNbal0ucXVlcnlTZWxlY3RvckFsbCgKICAgICAgICAgICAgICAgICIuZGpzLXZpc3VhbCIKICAgICAgICAgICAgICApWzBdOwogICAgICAgICAgICAgIGlmIChub2RlLnRvID09PSAiU1RBUlQiIHx8IG5vZGUudG8gPT09ICJFTkQiKSB7CiAgICAgICAgICAgICAgICBkanNWaXN1YWxEb20uZ2V0RWxlbWVudHNCeVRhZ05hbWUoImNpcmNsZSIpWzBdLnN0eWxlLnN0cm9rZSA9CiAgICAgICAgICAgICAgICAgIGAke3RoaXMucHJpbWFyeUNvbG9yfWA7CiAgICAgICAgICAgICAgICBkanNWaXN1YWxEb20uZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRleHQiKVswXS5zdHlsZS5maWxsID0KICAgICAgICAgICAgICAgICAgYCR7dGhpcy5wcmltYXJ5Q29sb3J9YDsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZGpzVmlzdWFsRG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJyZWN0IilbMF0uc3R5bGUuc3Ryb2tlID0KICAgICAgICAgICAgICAgICAgYCR7dGhpcy5wcmltYXJ5Q29sb3J9YDsKICAgICAgICAgICAgICAgIGlmIChkanNWaXN1YWxEb20uZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhdGgiKVswXSkgewogICAgICAgICAgICAgICAgICBkanNWaXN1YWxEb20uZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhdGgiKVswXS5zdHlsZS5maWxsID0KICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLnByaW1hcnlDb2xvcn1gOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZGpzVmlzdWFsRG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZXh0IilbMF0uc3R5bGUuZmlsbCA9CiAgICAgICAgICAgICAgICAgICJyZ2IoMjU1LCAyNTUsIDI1NSkiOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgY29uc3QgY29ubnMgPSB0aGlzLmV4dHJhUHJvcC5jb25uZWN0cy5maWx0ZXIoCiAgICAgICAgICBpdGVtID0+IGl0ZW0uZW5kTm9kZUlkID09PSBub2RlLnRvCiAgICAgICAgKTsKICAgICAgICBjb25ucy5mb3JFYWNoKGNvbm4gPT4gewogICAgICAgICAgaWYgKGNvbm4uc3RhcnROb2RlSWQuaW5kZXhPZigiRXhjbHVzaXZlR2F0ZXdheSIpID4gLTEpIHsKICAgICAgICAgICAgbGV0IGV4Y2x1c2l2ZUdhdGV3YXkgPSB0aGlzLmV4dHJhUHJvcAogICAgICAgICAgICAgIC5kZWZpbml0aW9ucy5wcm9jZXNzLmV4Y2x1c2l2ZUdhdGV3YXk7CiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShleGNsdXNpdmVHYXRld2F5KSAmJiBleGNsdXNpdmVHYXRld2F5KSB7CiAgICAgICAgICAgICAgZXhjbHVzaXZlR2F0ZXdheSA9IFtleGNsdXNpdmVHYXRld2F5XTsKICAgICAgICAgICAgfQogICAgICAgICAgICBleGNsdXNpdmVHYXRld2F5ID0gZXhjbHVzaXZlR2F0ZXdheS5maWx0ZXIoCiAgICAgICAgICAgICAgaXRlbSA9PiBpdGVtLl9pZCA9PT0gY29ubi5zdGFydE5vZGVJZAogICAgICAgICAgICApOwogICAgICAgICAgICBsZXQgYmluZ29uR2F0d2F5LCBpbmNvbWluZywgaW5jb21pbmdDb25uOwogICAgICAgICAgICBmb3IgKGNvbnN0IGdhdHdheSBvZiBleGNsdXNpdmVHYXRld2F5KSB7CiAgICAgICAgICAgICAgaWYgKGJpbmdvbkdhdHdheSkgewogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGluY29taW5nID0gZXhjbHVzaXZlR2F0ZXdheS5maWx0ZXIoCiAgICAgICAgICAgICAgICBpdGVtID0+IGl0ZW0uX2lkID09PSBjb25uLnN0YXJ0Tm9kZUlkCiAgICAgICAgICAgICAgKVswXS5pbmNvbWluZzsKICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5jb21pbmcpICYmIGluY29taW5nKSB7CiAgICAgICAgICAgICAgICBpbmNvbWluZyA9IFtpbmNvbWluZ107CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGluY29taW5nLmZvckVhY2goaW5jID0+IHsKICAgICAgICAgICAgICAgIGluY29taW5nQ29ubiA9IHRoaXMuZXh0cmFQcm9wLmNvbm5lY3RzLmZpbHRlcigKICAgICAgICAgICAgICAgICAgaXRlbSA9PiBpdGVtLmNvbm5JZCA9PT0gaW5jLl9fdGV4dAogICAgICAgICAgICAgICAgKVswXTsKICAgICAgICAgICAgICAgIGlmIChpbmNvbWluZ0Nvbm4uc3RhcnROb2RlSWQgPT09IG5vZGUuZnJvbSkgewogICAgICAgICAgICAgICAgICBiaW5nb25HYXR3YXkgPSBnYXR3YXk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGJpbmdvbkdhdHdheSkgewogICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgc2hhcGVFbGVtZW50cy5sZW5ndGg7IGsrKykgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0RWxlRGF0YUlkKHNoYXBlRWxlbWVudHNba10pID09PSBiaW5nb25HYXR3YXkuX2lkKSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGdEb20gPSBzaGFwZUVsZW1lbnRzW2tdLnF1ZXJ5U2VsZWN0b3JBbGwoCiAgICAgICAgICAgICAgICAgICAgIi5kanMtdmlzdWFsIgogICAgICAgICAgICAgICAgICApWzBdOwogICAgICAgICAgICAgICAgICBnRG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwb2x5Z29uIilbMF0uc3R5bGUuc3Ryb2tlID0KICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLnByaW1hcnlDb2xvcn1gOwogICAgICAgICAgICAgICAgICBnRG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXRoIilbMF0uc3R5bGUuZmlsbCA9CiAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5wcmltYXJ5Q29sb3J9YDsKICAgICAgICAgICAgICAgICAgZ0RvbS5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGF0aCIpWzBdLnN0eWxlLnN0cm9rZSA9CiAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5wcmltYXJ5Q29sb3J9YDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb25uRWxlbWVudHMubGVuZ3RoOyBrKyspIHsKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgdGhpcy5nZXRFbGVEYXRhSWQoY29ubkVsZW1lbnRzW2tdKSA9PT0gaW5jb21pbmdDb25uLmNvbm5JZAogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGRqc1Zpc3VhbERvbSA9IGNvbm5FbGVtZW50c1trXS5xdWVyeVNlbGVjdG9yQWxsKAogICAgICAgICAgICAgICAgICAgICIuZGpzLXZpc3VhbCIKICAgICAgICAgICAgICAgICAgKVswXTsKICAgICAgICAgICAgICAgICAgZGpzVmlzdWFsRG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXRoIilbMF0uc3R5bGUuc3Ryb2tlID0KICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLnByaW1hcnlDb2xvcn1gOwogICAgICAgICAgICAgICAgICBkanNWaXN1YWxEb20uZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhdGgiKVswXS5zdHlsZVsKICAgICAgICAgICAgICAgICAgICAibWFya2VyLWVuZCIKICAgICAgICAgICAgICAgICAgXSA9IGB1cmwoIiNzZXF1ZW5jZWZsb3ctYmx1ZSIpYDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGxldCBvdXRnb2luZyA9IGJpbmdvbkdhdHdheS5vdXRnb2luZzsKICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkob3V0Z29pbmcpICYmIG91dGdvaW5nKSB7CiAgICAgICAgICAgICAgICBvdXRnb2luZyA9IFtvdXRnb2luZ107CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIG91dGdvaW5nID0gb3V0Z29pbmcuZmlsdGVyKGl0ZW0gPT4gaXRlbS5fX3RleHQgPT09IGNvbm4uY29ubklkKTsKICAgICAgICAgICAgICBvdXRnb2luZy5mb3JFYWNoKG91dCA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBvdXRnb2luZ0Nvbm4gPSB0aGlzLmV4dHJhUHJvcC5jb25uZWN0cy5maWx0ZXIoCiAgICAgICAgICAgICAgICAgIGl0ZW0gPT4gaXRlbS5jb25uSWQgPT09IG91dC5fX3RleHQKICAgICAgICAgICAgICAgIClbMF07CiAgICAgICAgICAgICAgICBpZiAob3V0Z29pbmdDb25uICYmIG91dGdvaW5nQ29ubi5lbmROb2RlSWQgPT09IG5vZGUudG8pIHsKICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb25uRWxlbWVudHMubGVuZ3RoOyBrKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEVsZURhdGFJZChjb25uRWxlbWVudHNba10pID09PSBvdXRnb2luZ0Nvbm4uY29ubklkCiAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkanNWaXN1YWxEb20gPSBjb25uRWxlbWVudHNba10ucXVlcnlTZWxlY3RvckFsbCgKICAgICAgICAgICAgICAgICAgICAgICAgIi5kanMtdmlzdWFsIgogICAgICAgICAgICAgICAgICAgICAgKVswXTsKICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGhEb20gPSBkanNWaXN1YWxEb20uZ2V0RWxlbWVudHNCeVRhZ05hbWUoCiAgICAgICAgICAgICAgICAgICAgICAgICJwYXRoIgogICAgICAgICAgICAgICAgICAgICAgKVswXTsKICAgICAgICAgICAgICAgICAgICAgIHBhdGhEb20uc3R5bGUuc3Ryb2tlID0gYCR7dGhpcy5wcmltYXJ5Q29sb3J9YDsKICAgICAgICAgICAgICAgICAgICAgIHBhdGhEb20uc3R5bGVbIm1hcmtlci1lbmQiXSA9IGB1cmwoIiNzZXF1ZW5jZWZsb3ctYmx1ZSIpYDsKICAgICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgcGF0aERvbS5zdHlsZVsibWFya2VyLXN0YXJ0Il0gJiYKICAgICAgICAgICAgICAgICAgICAgICAgcGF0aERvbS5zdHlsZVsibWFya2VyLXN0YXJ0Il0uaW5kZXhPZigKICAgICAgICAgICAgICAgICAgICAgICAgICAiY29uZGl0aW9uYWwtZGVmYXVsdC1mbG93LW1hcmtlci13aGl0ZS1ncmF5IgogICAgICAgICAgICAgICAgICAgICAgICApID4gLTEKICAgICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICBwYXRoRG9tLnN0eWxlWwogICAgICAgICAgICAgICAgICAgICAgICAgICJtYXJrZXItc3RhcnQiCiAgICAgICAgICAgICAgICAgICAgICAgIF0gPSBgdXJsKCIjY29uZGl0aW9uYWwtZGVmYXVsdC1mbG93LW1hcmtlci13aGl0ZS1ibHVlIilgOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNvbm5FbGVtZW50cy5sZW5ndGg7IGsrKykgewogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIHRoaXMuZ2V0RWxlRGF0YUlkKGNvbm5FbGVtZW50c1trXSkgPT09IGNvbm4uY29ubklkICYmCiAgICAgICAgICAgICAgICBjb25uLnN0YXJ0Tm9kZUlkID09PSBub2RlLmZyb20KICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGNvbnN0IGRqc1Zpc3VhbERvbSA9IGNvbm5FbGVtZW50c1trXS5xdWVyeVNlbGVjdG9yQWxsKAogICAgICAgICAgICAgICAgICAiLmRqcy12aXN1YWwiCiAgICAgICAgICAgICAgICApWzBdOwogICAgICAgICAgICAgICAgZGpzVmlzdWFsRG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXRoIilbMF0uc3R5bGUuc3Ryb2tlID0KICAgICAgICAgICAgICAgICAgYCR7dGhpcy5wcmltYXJ5Q29sb3J9YDsKICAgICAgICAgICAgICAgIGRqc1Zpc3VhbERvbS5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGF0aCIpWzBdLnN0eWxlWwogICAgICAgICAgICAgICAgICAibWFya2VyLWVuZCIKICAgICAgICAgICAgICAgIF0gPSBgdXJsKCIjc2VxdWVuY2VmbG93LWJsdWUiKWA7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICByZXBsYWNlTm9kZVRvQ3VzdG9tKHNoYXBlRWxlbWVudHMsIG5vZGVQYXRoKSB7CiAgICAgIGNvbnN0IHN2Z0RvbSA9IGRvY3VtZW50CiAgICAgICAgLmdldEVsZW1lbnRCeUlkKCJqcy1jYW52YXMiKQogICAgICAgIC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic3ZnIilbMF07CiAgICAgIGxldCBkZWZzRG9tID0gc3ZnRG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkZWZzIilbMF07CiAgICAgIGNvbnN0IGxpbmVyR3JhZGllbnRTdHIgPSBgCiAgICAgICAgPG1hcmtlciBpZD0iY29uZGl0aW9uYWwtZGVmYXVsdC1mbG93LW1hcmtlci13aGl0ZS1ncmF5IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHJlZlg9IjAiIHJlZlk9IjEwIiBtYXJrZXJXaWR0aD0iMTAiIG1hcmtlckhlaWdodD0iMTAiIG9yaWVudD0iYXV0byI+PHBhdGggZD0iTSA2IDQgTCAxMCAxNiIgc3R5bGU9ImZpbGw6IHJnYigyMDUsIDIwNSwgMjA1KTsgc3Ryb2tlLXdpZHRoOiAxcHg7IHN0cm9rZS1saW5lY2FwOiByb3VuZDsgc3Ryb2tlLWRhc2hhcnJheTogMTAwMDAsIDE7IHN0cm9rZTogcmdiKDIwNSwgMjA1LCAyMDUpOyI+PC9wYXRoPjwvbWFya2VyPgogICAgICAgIDxtYXJrZXIgaWQ9ImNvbmRpdGlvbmFsLWRlZmF1bHQtZmxvdy1tYXJrZXItd2hpdGUtYmx1ZSIgdmlld0JveD0iMCAwIDIwIDIwIiByZWZYPSIwIiByZWZZPSIxMCIgbWFya2VyV2lkdGg9IjEwIiBtYXJrZXJIZWlnaHQ9IjEwIiBvcmllbnQ9ImF1dG8iPjxwYXRoIGQ9Ik0gNiA0IEwgMTAgMTYiIHN0eWxlPSJmaWxsOiAke3RoaXMucHJpbWFyeUNvbG9yfTsgc3Ryb2tlLXdpZHRoOiAxcHg7IHN0cm9rZS1saW5lY2FwOiByb3VuZDsgc3Ryb2tlLWRhc2hhcnJheTogMTAwMDAsIDE7IHN0cm9rZTogJHt0aGlzLnByaW1hcnlDb2xvcn07Ij48L3BhdGg+PC9tYXJrZXI+CiAgICAgICAgPG1hcmtlciBpZD0ic2VxdWVuY2VmbG93LWdyYXkiIHZpZXdCb3g9IjAgMCAyMCAyMCIgcmVmWD0iMTEiIHJlZlk9IjEwIiBtYXJrZXJXaWR0aD0iMTAiIG1hcmtlckhlaWdodD0iMTAiIG9yaWVudD0iYXV0byI+CiAgICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSIxMCIgcj0iNC41IiBzdHlsZT0ic3Ryb2tlOiByZ2IoMjA1LCAyMDUsIDIwNSk7ZmlsbDogcmdiKDIwNSwgMjA1LCAyMDUpOyI+PC9jaXJjbGU+CiAgICAgICAgPC9tYXJrZXI+CiAgICAgICAgPG1hcmtlciBpZD0ic2VxdWVuY2VmbG93LWJsdWUiIHZpZXdCb3g9IjAgMCAyMCAyMCIgcmVmWD0iMTEiIHJlZlk9IjEwIiBtYXJrZXJXaWR0aD0iMTAiIG1hcmtlckhlaWdodD0iMTAiIG9yaWVudD0iYXV0byI+CiAgICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSIxMCIgcj0iNC41IiBzdHlsZT0ic3Ryb2tlOiAke3RoaXMucHJpbWFyeUNvbG9yfTtmaWxsOiAke3RoaXMucHJpbWFyeUNvbG9yfTsiPjwvY2lyY2xlPgogICAgICAgIDwvbWFya2VyPgogICAgICAgIDxtYXJrZXIgaWQ9InNlcXVlbmNlZmxvdy1zdGFydCIgdmlld0JveD0iMCAwIDIwIDIwIiByZWZYPSIxMSIgcmVmWT0iMTAiIG1hcmtlcldpZHRoPSIxMCIgbWFya2VySGVpZ2h0PSIxMCIgb3JpZW50PSJhdXRvIj4KICAgICAgICAgICAgPGNpcmNsZSBjeD0iNiIgY3k9IjEwIiByPSI0LjUiIHN0eWxlPSJzdHJva2U6IHVybCgnI3JlZC1vcmFuZ2UnKTtmaWxsOiB1cmwoJyNyZWQtb3JhbmdlJyk7Ij48L2NpcmNsZT4KICAgICAgICA8L21hcmtlcj4KICAgICAgICA8bWFya2VyIGlkPSJzZXF1ZW5jZWZsb3cxIiB2aWV3Qm94PSIwIDAgMjAgMjAiIHJlZlg9IjExIiByZWZZPSIxMCIgbWFya2VyV2lkdGg9IjEwIiBtYXJrZXJIZWlnaHQ9IjEwIiBvcmllbnQ9ImF1dG8iPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI2IiBjeT0iMTAiIHI9IjQuNSIgc3R5bGU9InN0cm9rZTogdXJsKCcjbm9kZTEnKTtmaWxsOiB1cmwoJyNub2RlMScpOyI+PC9jaXJjbGU+CiAgICAgICAgPC9tYXJrZXI+CiAgICAgICAgPG1hcmtlciBpZD0ic2VxdWVuY2VmbG93MiIgdmlld0JveD0iMCAwIDIwIDIwIiByZWZYPSIxMSIgcmVmWT0iMTAiIG1hcmtlcldpZHRoPSIxMCIgbWFya2VySGVpZ2h0PSIxMCIgb3JpZW50PSJhdXRvIj4KICAgICAgICAgICAgPGNpcmNsZSBjeD0iNiIgY3k9IjEwIiByPSI0LjUiIHN0eWxlPSJzdHJva2U6IHVybCgnI25vZGUyJyk7ZmlsbDogdXJsKCcjbm9kZTInKTsiPjwvY2lyY2xlPgogICAgICAgIDwvbWFya2VyPgogICAgICAgIDxtYXJrZXIgaWQ9InNlcXVlbmNlZmxvdzMiIHZpZXdCb3g9IjAgMCAyMCAyMCIgcmVmWD0iMTEiIHJlZlk9IjEwIiBtYXJrZXJXaWR0aD0iMTAiIG1hcmtlckhlaWdodD0iMTAiIG9yaWVudD0iYXV0byI+CiAgICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSIxMCIgcj0iNC41IiBzdHlsZT0ic3Ryb2tlOiB1cmwoJyNub2RlMycpO2ZpbGw6IHVybCgnI25vZGUzJyk7Ij48L2NpcmNsZT4KICAgICAgICA8L21hcmtlcj4KICAgICAgICA8bWFya2VyIGlkPSJzZXF1ZW5jZWZsb3c0IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHJlZlg9IjExIiByZWZZPSIxMCIgbWFya2VyV2lkdGg9IjEwIiBtYXJrZXJIZWlnaHQ9IjEwIiBvcmllbnQ9ImF1dG8iPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI2IiBjeT0iMTAiIHI9IjQuNSIgc3R5bGU9InN0cm9rZTogdXJsKCcjbm9kZTQnKTtmaWxsOiB1cmwoJyNub2RlNCcpOyI+PC9jaXJjbGU+CiAgICAgICAgPC9tYXJrZXI+CiAgICAgICAgPGxpbmVhckdyYWRpZW50IGlkPSJub2RlMSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPgogICAgICAgICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjpyZ2IoNjIsMTQ3LDE1Nyk7CiAgICAgICAgICAgIHN0b3Atb3BhY2l0eToxIj48L3N0b3A+CiAgICAgICAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6cmdiKDIyMywyMzcsMjQyKTsKICAgICAgICAgICAgc3RvcC1vcGFjaXR5OjEiPjwvc3RvcD4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD0ibm9kZTIiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj4KICAgICAgICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6cmdiKDgyLDYxLDE0MSk7CiAgICAgICAgICAgIHN0b3Atb3BhY2l0eToxIj48L3N0b3A+CiAgICAgICAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6cmdiKDI1NSwyMTEsMjM1KTsKICAgICAgICAgICAgc3RvcC1vcGFjaXR5OjEiPjwvc3RvcD4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD0ibm9kZTMiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj4KICAgICAgICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6cmdiKDQ0LDEyNCwyMzkpOwogICAgICAgICAgICBzdG9wLW9wYWNpdHk6MSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOnJnYigxODUsMjIyLDI1Mik7CiAgICAgICAgICAgIHN0b3Atb3BhY2l0eToxIj48L3N0b3A+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9Im5vZGU0IiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIwJSI+CiAgICAgICAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOnJnYigyNTAsMTM0LDEyNik7CiAgICAgICAgICAgIHN0b3Atb3BhY2l0eToxIj48L3N0b3A+CiAgICAgICAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6cmdiKDI1NSwyMjksMjAyKTsKICAgICAgICAgICAgc3RvcC1vcGFjaXR5OjEiPjwvc3RvcD4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icmVkLW9yYW5nZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPgogICAgICAgICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjpyZ2IoMjU1LDkwLDApOwogICAgICAgICAgICBzdG9wLW9wYWNpdHk6MSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOnJnYigyNTUsMjU1LDApOwogICAgICAgICAgICBzdG9wLW9wYWNpdHk6MSI+PC9zdG9wPgogICAgICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICAgICAgYDsKICAgICAgaWYgKGRlZnNEb20pIHsKICAgICAgICBkZWZzRG9tLmlubmVySFRNTCA9IGRlZnNEb20uaW5uZXJIVE1MICsgbGluZXJHcmFkaWVudFN0cjsKICAgICAgfSBlbHNlIHsKICAgICAgICBkZWZzRG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGVmcyIpOwogICAgICAgIGRlZnNEb20uaW5uZXJIVE1MID0gbGluZXJHcmFkaWVudFN0cjsKICAgICAgICBzdmdEb20uYXBwZW5kQ2hpbGQoZGVmc0RvbSk7CiAgICAgIH0KICAgICAgbGV0IG5vZGVTdGVwID0gMDsKICAgICAgY29uc3QgbGluZXJHcmFkaWVudHMgPSBbIm5vZGUxIiwgIm5vZGUyIiwgIm5vZGUzIiwgIm5vZGU0Il07CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hhcGVFbGVtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IHNoYXBlRWxlbWVudCA9IHNoYXBlRWxlbWVudHNbaV07CiAgICAgICAgY29uc3QgZWxlbWVudElkID0gdGhpcy5nZXRFbGVEYXRhSWQoc2hhcGVFbGVtZW50KTsKICAgICAgICBpZiAoZWxlbWVudElkLmluZGV4T2YoIlBhcnRpY2lwYW50XyIpID4gLTEpIHsKICAgICAgICAgIGNvbnN0IGRqc1Zpc3VhbERvbSA9IHNoYXBlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuZGpzLXZpc3VhbCIpWzBdOwogICAgICAgICAgZGpzVmlzdWFsRG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJyZWN0IilbMF0uc3R5bGUuc3Ryb2tlID0gIm5vbmUiOwogICAgICAgICAgZGpzVmlzdWFsRG9tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwb2x5bGluZSIpWzBdLnN0eWxlLnN0cm9rZSA9CiAgICAgICAgICAgICJub25lIjsKICAgICAgICB9CiAgICAgICAgaWYgKGVsZW1lbnRJZC5pbmRleE9mKCJUYXNrXyIpID4gLTEpIHsKICAgICAgICAgIC8vIOS7jm5vZGVz5Lit5om+5Yiw5a+55bqU55qEaWTnmoRub2RlCiAgICAgICAgICBjb25zdCBub2RlID0gbm9kZVBhdGguZmlsdGVyKGl0ZW0gPT4gaXRlbS5ub2RlSWQgPT09IGVsZW1lbnRJZClbMF07CiAgICAgICAgICAvLyDmm7/mjaLoioLngrkKICAgICAgICAgIGNvbnN0IGluZGV4ID0gbm9kZVN0ZXArKyAlIDQ7CiAgICAgICAgICBjb25zdCBsaW5lYXJHcmFkaWVudCA9IGxpbmVyR3JhZGllbnRzW2luZGV4XTsKICAgICAgICAgIG5vZGUubGluZWFyR3JhZGllbnQgPSBsaW5lYXJHcmFkaWVudDsKICAgICAgICAgIG5vZGUubWFya2VyRW5kID0gYHNlcXVlbmNlZmxvdyR7aW5kZXggKyAxfWA7CiAgICAgICAgICBsZXQgaWNvbiA9IGBgOwogICAgICAgICAgaWYgKG5vZGUubm9kZVN0YXR1cyA9PT0gImFwcHJvdmluZyIpIHsKICAgICAgICAgICAgaWYgKHRoaXMuaXNJRSgpKSB7CiAgICAgICAgICAgICAgaWNvbiA9IGA8dGV4dCBsaW5laGVpZ2h0PSIxLjIiIGNsYXNzPSJkanMtbGFiZWwiIHN0eWxlPSJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7Zm9udC1zaXplOiAxMnB4O2ZvbnQtd2VpZ2h0OiBub3JtYWw7ZmlsbDogcmdiKDI1NSwgMCwgMjgpOyI+PHRzcGFuIHg9Ijg0IiB5PSI0Ij7lrqHmibnkuK08L3RzcGFuPjwvdGV4dD5gOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGljb24gPSBgPGltYWdlIHg9IjkwIiB5PSItNSIgd2lkdGg9IjE2IiB4bGluazpocmVmPSIuL2Fzc2V0cy9hcHByb3ZpbmcucG5nIiAvPmA7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vZGUubm9kZVN0YXR1cyAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgaWYgKHRoaXMuaXNJRSgpKSB7CiAgICAgICAgICAgICAgaWNvbiA9IGA8dGV4dCBsaW5laGVpZ2h0PSIxLjIiIGNsYXNzPSJkanMtbGFiZWwiIHN0eWxlPSJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7Zm9udC1zaXplOiAxMnB4O2ZvbnQtd2VpZ2h0OiBub3JtYWw7ZmlsbDogcmdiKDEzNywgMTg5LCAxMTkpOyI+PHRzcGFuIHg9Ijg0IiB5PSI0Ij7pgJrov4c8L3RzcGFuPjwvdGV4dD5gOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGljb24gPSBgPGltYWdlIHg9IjkwIiB5PSItNSIgd2lkdGg9IjE2IiB4bGluazpocmVmPSIuL2Fzc2V0cy9hcHByb3ZlUGFzcy5qcGciIC8+YDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgY29uc3Qgbm9kZVN0ciA9IGA8ZyBjbGFzcz0iZGpzLXZpc3VhbCI+PHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSI4MCIgcng9IjIiIHJ5PSIyIiBzdHlsZT0ic3Ryb2tlOiByZ2IoMjI2LCAyMjYsIDIyNik7c3Ryb2tlLXdpZHRoOiAycHg7ZmlsbDogd2hpdGU7Ij48L3JlY3Q+PHBhdGggZD0iTTAuNSwyNy41IEw5OS41LDI3LjUgTDk5LjUsMiBDOTkuNSwxLjE3MTU3Mjg4IDk4LjgyODQyNzEsMC41IDk4LDAuNSBMMiwwLjUgQzEuMTcxNTcyODgsMC41IDAuNSwxLjE3MTU3Mjg4IDAuNSwyIEwwLjUsMjcuNSBaIiBzdHlsZT0iCiAgICAgICAgICAgICAgICBmaWxsOiByZ2IoMjI2LCAyMjYsIDIyNik7CiAgICAgICAgICAgICAgICAiPjwvcGF0aD48dGV4dCBsaW5laGVpZ2h0PSIxLjIiIGNsYXNzPSJkanMtbGFiZWwiIHN0eWxlPSJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7Zm9udC1zaXplOiAxMnB4O2ZvbnQtd2VpZ2h0OiBub3JtYWw7ZmlsbDogcmdiKDE0MCwgMTQwLCAxNDApOyI+PHRzcGFuIHg9IjEwIiB5PSIxOCI+JHtub2RlLm5hbWV9PC90c3Bhbj48L3RleHQ+JHtpY29ufTx0ZXh0IHg9IjEwIiB5PSI0NiIgbGluZWhlaWdodD0iMS4yIiBjbGFzcz0iZGpzLWxhYmVsIiBzdHlsZT0iZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmO2ZvbnQtc2l6ZTogOHB4O2ZvbnQtd2VpZ2h0OiBub3JtYWw7ZmlsbDogcmdiKDAsIDAsIDApOyI+CiAgICAgICAgICAgICAgICA8dHNwYW4+5a6h5om557G75Z6L77yaJHtub2RlLnR5cGVOYW1lfTwvdHNwYW4+CiAgICAgICAgICAgICAgICA8L3RleHQ+PHRleHQgeD0iMTAiIHk9IjY4IiBsaW5laGVpZ2h0PSIxLjIiIGNsYXNzPSJkanMtbGFiZWwiIHN0eWxlPSJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7Zm9udC1zaXplOiA4cHg7Zm9udC13ZWlnaHQ6IG5vcm1hbDtmaWxsOiByZ2IoMCwgMCwgMCk7Ij4KICAgICAgICAgICAgICAgIDx0c3Bhbj7lrqHmibnkurrnsbvlnovvvJoke25vZGUuYXBwcm92ZVR5cGVNZWFuaW5nfTwvdHNwYW4+CiAgICAgICAgICAgICAgICA8L3RleHQ+CiAgICAgICAgICAgICAgICA8L2c+YDsKICAgICAgICAgIC8vIGNvbnN0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTsKICAgICAgICAgIC8vIHNoYXBlRWxlbWVudC5yZW1vdmVDaGlsZChzaGFwZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRqcy12aXN1YWwnKVswXSk7CiAgICAgICAgICAvLyBzaGFwZUVsZW1lbnQuYXBwZW5kQ2hpbGQocGFyc2VyLnBhcnNlRnJvbVN0cmluZyhub2RlU3RyLCAnaW1hZ2Uvc3ZnK3htbCcpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdnJylbMF0pOwogICAgICAgICAgLy8gc2hhcGVFbGVtZW50LmlubmVySFRNTCA9IG5vZGVTdHI7CgogICAgICAgICAgY29uc3QgZHVtbXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgIGR1bW15LmlubmVySFRNTCA9ICI8c3ZnPiIgKyBub2RlU3RyICsgIjwvc3ZnPiI7CiAgICAgICAgICBjb25zdCBzdmdDaGlsZE5vZGVzID0gZHVtbXkuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzOwogICAgICAgICAgc2hhcGVFbGVtZW50LnJlbW92ZUNoaWxkKAogICAgICAgICAgICBzaGFwZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmRqcy12aXN1YWwiKVswXQogICAgICAgICAgKTsKICAgICAgICAgIHNoYXBlRWxlbWVudC5hcHBlbmRDaGlsZChzdmdDaGlsZE5vZGVzWzBdKTsKICAgICAgICB9CiAgICAgICAgaWYgKAogICAgICAgICAgKGVsZW1lbnRJZC5pbmRleE9mKCJTdGFydEV2ZW50XyIpID4gLTEgfHwKICAgICAgICAgICAgZWxlbWVudElkLmluZGV4T2YoIkVuZEV2ZW50XyIpID4gLTEpICYmCiAgICAgICAgICBlbGVtZW50SWQuaW5kZXhPZigiX2xhYmVsIikgPT09IC0xCiAgICAgICAgKSB7CiAgICAgICAgICBsZXQgbm9kZVN0cjsKICAgICAgICAgIGlmIChlbGVtZW50SWQuaW5kZXhPZigiU3RhcnRFdmVudF8iKSA+IC0xKSB7CiAgICAgICAgICAgIC8vIGNvbnN0IG5hbWUgPSB0aGlzLmV4dHJhUHJvcC5wcm9jZXNzTmFtZSArICflvZXlhaUnOwogICAgICAgICAgICAvLyBub2RlU3RyID0gYDxnIGNsYXNzPSJkanMtdmlzdWFsIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjgwIiByeD0iMiIgcnk9IjIiIHN0eWxlPSJzdHJva2U6IHVybCgnI3JlZC1vcmFuZ2UnKTtzdHJva2Utd2lkdGg6IDJweDtmaWxsOiB1cmwoJyNyZWQtb3JhbmdlJyk7Ij48L3JlY3Q+CiAgICAgICAgICAgIC8vIDxyZWN0IHg9IjEwIiB5PSIyMCIgd2lkdGg9IjgwIiBoZWlnaHQ9IjQwIiByeD0iOCIgcnk9IjgiIHN0eWxlPSIKICAgICAgICAgICAgLy8gICAgIGZpbGw6IHJnYmEoMCwgMCwgMCwgLjIpOwogICAgICAgICAgICAvLyAiPjwvcmVjdD4KICAgICAgICAgICAgLy8gPHRleHQgeD0iMTQiIHk9IjQ0IiBsaW5laGVpZ2h0PSIxLjIiIGNsYXNzPSJkanMtbGFiZWwiIHN0eWxlPSJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7Zm9udC1zaXplOiA4cHg7Zm9udC13ZWlnaHQ6IG5vcm1hbDtmaWxsOiByZ2IoMjU1LCAyNTUsIDI1NSk7Ij4ke25hbWV9PC90ZXh0PjwvZz5gOwogICAgICAgICAgICBub2RlU3RyID0gYDxnIGNsYXNzPSJkanMtdmlzdWFsIj48Y2lyY2xlIGN4PSIxOCIgY3k9IjE4IiByPSIxOCIgc3R5bGU9InN0cm9rZTogJHt0aGlzLnByaW1hcnlDb2xvcn07c3Ryb2tlLXdpZHRoOiAycHg7ZmlsbDogd2hpdGU7ZmlsbC1vcGFjaXR5OiAwLjk1OyI+PC9jaXJjbGU+PHRleHQgeD0iMTAiIHk9IjIxIiBsaW5laGVpZ2h0PSIxLjIiIGNsYXNzPSJkanMtbGFiZWwiIHN0eWxlPSJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7Zm9udC1zaXplOiA4cHg7Zm9udC13ZWlnaHQ6IG5vcm1hbDtmaWxsOiAke3RoaXMucHJpbWFyeUNvbG9yfTsiPuW8gOWnizwvdGV4dD48L2c+YDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGNvbnN0IG5hbWUgPSAn5rWB56iL57uT5p2fJzsKICAgICAgICAgICAgLy8gbm9kZVN0ciA9IGA8ZyBjbGFzcz0iZGpzLXZpc3VhbCI+PHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSI4MCIgcng9IjIiIHJ5PSIyIiBzdHlsZT0ic3Ryb2tlOiB1cmwoJyNyZWQtb3JhbmdlJyk7c3Ryb2tlLXdpZHRoOiAycHg7ZmlsbDogdXJsKCcjcmVkLW9yYW5nZScpOyI+PC9yZWN0PgogICAgICAgICAgICAvLyA8cmVjdCB4PSIxMCIgeT0iMjAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI0MCIgcng9IjgiIHJ5PSI4IiBzdHlsZT0iCiAgICAgICAgICAgIC8vICAgICBmaWxsOiByZ2JhKDAsIDAsIDAsIC4yKTsKICAgICAgICAgICAgLy8gIj48L3JlY3Q+CiAgICAgICAgICAgIC8vIDx0ZXh0IHg9IjMyIiB5PSI0NSIgbGluZWhlaWdodD0iMS4yIiBjbGFzcz0iZGpzLWxhYmVsIiBzdHlsZT0iZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmO2ZvbnQtc2l6ZTogMTBweDtmb250LXdlaWdodDogbm9ybWFsO2ZpbGw6IHJnYigyNTUsIDI1NSwgMjU1KTsiPiR7bmFtZX08L3RleHQ+PC9nPmA7CiAgICAgICAgICAgIG5vZGVTdHIgPSBgPGcgY2xhc3M9ImRqcy12aXN1YWwiPjxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE4IiBzdHlsZT0ic3Ryb2tlOiByZ2IoMjI2LCAyMjYsIDIyNik7c3Ryb2tlLXdpZHRoOiAycHg7ZmlsbDogd2hpdGU7ZmlsbC1vcGFjaXR5OiAwLjk1OyI+PC9jaXJjbGU+PHRleHQgeD0iMTAiIHk9IjIxIiBsaW5laGVpZ2h0PSIxLjIiIGNsYXNzPSJkanMtbGFiZWwiIHN0eWxlPSJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7Zm9udC1zaXplOiA4cHg7Zm9udC13ZWlnaHQ6IG5vcm1hbDtmaWxsOiByZ2IoMjI2LCAyMjYsIDIyNik7Ij7nu5PmnZ88L3RleHQ+PC9nPmA7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBjb25zdCB0cmFuc2Zvcm1BcnIgPSBzaGFwZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nKS5zcGxpdCgnICcpOwogICAgICAgICAgLy8gdHJhbnNmb3JtQXJyW3RyYW5zZm9ybUFyci5sZW5ndGggLSAxXSA9IGAke3BhcnNlSW50KHRyYW5zZm9ybUFyclt0cmFuc2Zvcm1BcnIubGVuZ3RoIC0gMV0uc3Vic3RyKDAsIHRyYW5zZm9ybUFyclt0cmFuc2Zvcm1BcnIubGVuZ3RoIC0gMV0ubGVuZ3RoIC0gMSkpIC0gMjJ9KWA7CiAgICAgICAgICAvLyBzaGFwZUVsZW1lbnQuc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nLCB0cmFuc2Zvcm1BcnIuam9pbignICcpKTsKCiAgICAgICAgICAvLyBzaGFwZUVsZW1lbnQuaW5uZXJIVE1MID0gbm9kZVN0cjsKCiAgICAgICAgICBjb25zdCBkdW1teSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgZHVtbXkuaW5uZXJIVE1MID0gIjxzdmc+IiArIG5vZGVTdHIgKyAiPC9zdmc+IjsKICAgICAgICAgIGNvbnN0IHN2Z0NoaWxkTm9kZXMgPSBkdW1teS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXM7CiAgICAgICAgICBzaGFwZUVsZW1lbnQucmVtb3ZlQ2hpbGQoCiAgICAgICAgICAgIHNoYXBlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuZGpzLXZpc3VhbCIpWzBdCiAgICAgICAgICApOwogICAgICAgICAgc2hhcGVFbGVtZW50LmFwcGVuZENoaWxkKHN2Z0NoaWxkTm9kZXNbMF0pOwogICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudElkLmluZGV4T2YoIl9sYWJlbCIpID4gLTEpIHsKICAgICAgICAgIHNoYXBlRWxlbWVudAogICAgICAgICAgICAucXVlcnlTZWxlY3RvckFsbCgiLmRqcy12aXN1YWwiKVswXQogICAgICAgICAgICAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRleHQiKVswXS5zdHlsZS5maWxsID0gInRyYW5zcGFyZW50IjsKICAgICAgICB9CiAgICAgIH0KICAgICAgLy8gdGhpcy5yZXNldFRhc2tOb2RlT2Zmc2V0KHNoYXBlRWxlbWVudHMpOwogICAgICAvLyB0aGlzLnJlc2V0Q29ubmVjdGlvbk9mZnNldCgpOwogICAgfSwKICAgIHJlcGxhY2VDb25uVG9DdXN0b20oKSB7CiAgICAgIGNvbnN0IHNoYXBlRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKAogICAgICAgICIuZGpzLWVsZW1lbnQuZGpzLWNvbm5lY3Rpb24iCiAgICAgICk7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hhcGVFbGVtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IHBhdGhEb20gPSBzaGFwZUVsZW1lbnRzW2ldCiAgICAgICAgICAucXVlcnlTZWxlY3RvckFsbCgiLmRqcy12aXN1YWwiKVswXQogICAgICAgICAgLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXRoIilbMF07CiAgICAgICAgcGF0aERvbS5zdHlsZS5zdHJva2UgPSBgcmdiKDIzNiwgMjM2LCAyMzYpYDsKICAgICAgICBwYXRoRG9tLnN0eWxlWyJtYXJrZXItZW5kIl0gPSBgdXJsKCcjc2VxdWVuY2VmbG93LWdyYXknKWA7CiAgICAgICAgaWYgKAogICAgICAgICAgcGF0aERvbS5zdHlsZVsibWFya2VyLXN0YXJ0Il0gJiYKICAgICAgICAgIHBhdGhEb20uc3R5bGVbIm1hcmtlci1zdGFydCJdLmluZGV4T2YoCiAgICAgICAgICAgICJjb25kaXRpb25hbC1kZWZhdWx0LWZsb3ctbWFya2VyLXdoaXRlLWJsYWNrIgogICAgICAgICAgKSA+IC0xCiAgICAgICAgKSB7CiAgICAgICAgICBwYXRoRG9tLnN0eWxlWwogICAgICAgICAgICAibWFya2VyLXN0YXJ0IgogICAgICAgICAgXSA9IGB1cmwoIiNjb25kaXRpb25hbC1kZWZhdWx0LWZsb3ctbWFya2VyLXdoaXRlLWdyYXkiKWA7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgcmVwbGFjZUdhdGV3YXlUb0N1c3RvbSgpIHsKICAgICAgY29uc3Qgc2hhcGVFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5kanMtZWxlbWVudC5kanMtc2hhcGUiKTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGFwZUVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3Qgc2hhcGVFbGVtZW50ID0gc2hhcGVFbGVtZW50c1tpXTsKICAgICAgICBjb25zdCBlbGVtZW50SWQgPSB0aGlzLmdldEVsZURhdGFJZChzaGFwZUVsZW1lbnQpOwogICAgICAgIGlmIChlbGVtZW50SWQuaW5kZXhPZigiR2F0ZXdheSIpID4gLTEpIHsKICAgICAgICAgIGNvbnN0IGRqc0Nvbm5WaXN1YWxEb20gPSBzaGFwZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgKICAgICAgICAgICAgIi5kanMtdmlzdWFsIgogICAgICAgICAgKVswXTsKICAgICAgICAgIGRqc0Nvbm5WaXN1YWxEb20uZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBvbHlnb24iKVswXS5zdHlsZS5zdHJva2UgPQogICAgICAgICAgICAicmdiKDIyNiwgMjI2LCAyMjYpIjsKICAgICAgICAgIGRqc0Nvbm5WaXN1YWxEb20uZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhdGgiKVswXS5zdHlsZS5zdHJva2UgPQogICAgICAgICAgICAicmdiKDIyNiwgMjI2LCAyMjYpIjsKICAgICAgICAgIGRqc0Nvbm5WaXN1YWxEb20uZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhdGgiKVswXS5zdHlsZS5maWxsID0KICAgICAgICAgICAgInJnYigyMjYsIDIyNiwgMjI2KSI7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZ2V0RWxlRGF0YUlkKGVsZSkgewogICAgICBpZiAoZWxlLmRhdGFzZXQpIHsKICAgICAgICByZXR1cm4gZWxlLmRhdGFzZXQuZWxlbWVudElkOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBlbGUuZ2V0QXR0cmlidXRlKCJkYXRhLWVsZW1lbnQtaWQiKTsKICAgICAgfQogICAgfSwKICAgIGlzSUUoKSB7CiAgICAgIHJldHVybiAiQWN0aXZlWE9iamVjdCIgaW4gd2luZG93OwogICAgfQogIH0KfTsK"},{"version":3,"sources":["dap-ui-bpmn-process-flow.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dap-ui-bpmn-process-flow.vue","sourceRoot":"packages/components/bpmn-process-flow","sourcesContent":["<!--\n * @Author: your name\n * @Date: 2020-03-01 14:05:31\n * @LastEditTime: 2020-03-01 17:36:59\n * @LastEditors: Please set LastEditors\n * @Description: In User Settings Edit\n * @FilePath: /dap-vue-ui/packages/components/bpmn-process-flow/dap-ui-bpmn-process-flow.vue\n -->\n<template>\n  <div class=\"bpmn-process-flow\">\n    <dap-ui-modal v-bind=\"modalConfig\" @ok=\"handleOk\" @cancel=\"handleCancel\">\n      <div class=\"process-flow-content\">\n        <div class=\"canvas\" id=\"js-canvas\"></div>\n      </div>\n      <div class=\"masking\" v-show=\"loading\">\n        <a-spin tip=\"流程图加载中...\" size=\"large\" />\n        <!-- <nz-spin nzSimple nzSize=\"large\" nzTip=\"脚本加载中...\"></nz-spin> -->\n      </div>\n    </dap-ui-modal>\n  </div>\n</template>\n\n<script>\nimport * as X2JS from \"x2js\";\n\nvar BpmnJS;\nexport default {\n  name: \"DapUiBpmnProcessFlow\",\n  props: {\n    extraProp: {\n      type: Object\n    },\n    loading: {\n      type: Boolean,\n      default: function() {\n        return false;\n      }\n    }\n  },\n  data() {\n    return {\n      primaryColor: 'rgb(48, 129, 251)',\n      modeler: undefined,\n      modalConfig: {\n        visible: false,\n        title: \"流程图\",\n        size: \"large\",\n        modalClass: \"dap-ui-bpmn-process-flow\"\n      }\n    };\n  },\n  methods: {\n    loadResources({ domain, callback }) {\n      this.modalConfig.visible = true;\n      this.$asyncLoadResource(\n        `${domain}/bpmn-js/diagram-js.css`,\n        \"link\",\n        \"diagram-js-css\"\n      ).then();\n      this.$asyncLoadResource(\n        `${domain}/bpmn-js/css/bpmn.css`,\n        \"link\",\n        \"bpmn-css\"\n      ).then();\n      this.$asyncLoadResource(\n        `${domain}/bpmn-js/bpmn-modeler.development.js`,\n        \"script\",\n        \"bpmnjs\"\n      ).then(() => {\n        BpmnJS = window.BpmnJS;\n        this.initBpmnCanvas();\n        callback && callback();\n      });\n    },\n    initBpmnCanvas() {\n      this.modeler = new BpmnJS({\n        container: \"#js-canvas\"\n      });\n      const bjsPoweredByDom = document.querySelectorAll(\".bjs-powered-by\")[0];\n      if (bjsPoweredByDom) {\n        bjsPoweredByDom.style.display = \"none\";\n      }\n      const djsPaletteDom = document.querySelectorAll(\".djs-palette\")[0];\n      if (djsPaletteDom) {\n        djsPaletteDom.style.display = \"none\";\n      }\n    },\n    importDiagramForJson(diagramJSON) {\n      const x2js = new X2JS();\n      const xml = x2js.js2xml(diagramJSON);\n      this.importDiagram(xml).then(() => {\n        setTimeout(() => {\n          const djsGroup = document.querySelectorAll(\".djs-group\");\n          for (let i = 0; i < djsGroup.length; i++) {\n            djsGroup[i].addEventListener(\"click\", e => {\n              e.stopPropagation();\n            });\n            djsGroup[i].addEventListener(\"dblclick\", e => {\n              e.stopPropagation();\n            });\n            djsGroup[i].addEventListener(\"mousedown\", e => {\n              e.stopPropagation();\n            });\n          }\n          const djsSegmentDraggers = document.querySelectorAll(\n            \".djs-segment-dragger\"\n          );\n          for (let i = 0; i < djsSegmentDraggers.length; i++) {\n            djsSegmentDraggers[i].addEventListener(\"click\", e => {\n              e.stopPropagation();\n            });\n            djsSegmentDraggers[i].addEventListener(\"dblclick\", e => {\n              e.stopPropagation();\n            });\n            djsSegmentDraggers[i].addEventListener(\"mousedown\", e => {\n              e.stopPropagation();\n            });\n          }\n          const rectDoms = document.getElementsByTagName(\"rect\");\n          for (let i = 0; i < rectDoms.length; i++) {\n            rectDoms[i].addEventListener(\"click\", e => {\n              e.stopPropagation();\n            });\n            rectDoms[i].addEventListener(\"dblclick\", e => {\n              e.stopPropagation();\n            });\n            rectDoms[i].addEventListener(\"mousedown\", e => {\n              e.stopPropagation();\n            });\n          }\n        });\n      });\n    },\n    importDiagram(diaramXML) {\n      return new Promise((resolve, reject) => {\n        this.modeler.importXML(diaramXML, err => {\n          if (err) {\n            reject(err);\n          }\n          const canvas = this.modeler.get(\"canvas\");\n          // zoom to fit full viewport\n          canvas.zoom(\"fit-viewport\");\n          resolve();\n        });\n      });\n    },\n    handleCancel() {\n      this.modalConfig.visible = false;\n      this.modeler.destroy();\n      this.modeler = undefined;\n    },\n    handleOk() {\n      this.modalConfig.visible = false;\n    },\n    fillColor() {\n      const nodePath = this.extraProp.nodePath;\n      if (!nodePath || nodePath.length === 0) {\n        return;\n      }\n      const shapeElements = document.querySelectorAll(\".djs-element.djs-shape\");\n      const connElements = document.querySelectorAll(\n        \".djs-element.djs-connection\"\n      );\n      // TODO: 替换流程节点的样式为产品样式\n      this.replaceNodeToCustom(\n        shapeElements,\n        this.extraProp.nodes\n      );\n      this.replaceConnToCustom();\n      this.replaceGatewayToCustom();\n\n      for (let i = 0; i < nodePath.length; i++) {\n        const node = nodePath[i];\n        for (let j = 0; j < shapeElements.length; j++) {\n          try {\n            if (\n              this.getEleDataId(shapeElements[j]) === node.to ||\n              this.getEleDataId(shapeElements[j])\n                .toUpperCase()\n                .indexOf(node.to) > -1\n            ) {\n              const djsVisualDom = shapeElements[j].querySelectorAll(\n                \".djs-visual\"\n              )[0];\n              if (node.to === \"START\" || node.to === \"END\") {\n                djsVisualDom.getElementsByTagName(\"circle\")[0].style.stroke =\n                  `${this.primaryColor}`;\n                djsVisualDom.getElementsByTagName(\"text\")[0].style.fill =\n                  `${this.primaryColor}`;\n              } else {\n                djsVisualDom.getElementsByTagName(\"rect\")[0].style.stroke =\n                  `${this.primaryColor}`;\n                if (djsVisualDom.getElementsByTagName(\"path\")[0]) {\n                  djsVisualDom.getElementsByTagName(\"path\")[0].style.fill =\n                    `${this.primaryColor}`;\n                }\n                djsVisualDom.getElementsByTagName(\"text\")[0].style.fill =\n                  \"rgb(255, 255, 255)\";\n              }\n            }\n          } catch (err) {\n            console.error(err);\n          }\n        }\n        const conns = this.extraProp.connects.filter(\n          item => item.endNodeId === node.to\n        );\n        conns.forEach(conn => {\n          if (conn.startNodeId.indexOf(\"ExclusiveGateway\") > -1) {\n            let exclusiveGateway = this.extraProp\n              .definitions.process.exclusiveGateway;\n            if (!Array.isArray(exclusiveGateway) && exclusiveGateway) {\n              exclusiveGateway = [exclusiveGateway];\n            }\n            exclusiveGateway = exclusiveGateway.filter(\n              item => item._id === conn.startNodeId\n            );\n            let bingonGatway, incoming, incomingConn;\n            for (const gatway of exclusiveGateway) {\n              if (bingonGatway) {\n                break;\n              }\n              incoming = exclusiveGateway.filter(\n                item => item._id === conn.startNodeId\n              )[0].incoming;\n              if (!Array.isArray(incoming) && incoming) {\n                incoming = [incoming];\n              }\n              incoming.forEach(inc => {\n                incomingConn = this.extraProp.connects.filter(\n                  item => item.connId === inc.__text\n                )[0];\n                if (incomingConn.startNodeId === node.from) {\n                  bingonGatway = gatway;\n                }\n              });\n            }\n            if (bingonGatway) {\n              for (let k = 0; k < shapeElements.length; k++) {\n                if (this.getEleDataId(shapeElements[k]) === bingonGatway._id) {\n                  const gDom = shapeElements[k].querySelectorAll(\n                    \".djs-visual\"\n                  )[0];\n                  gDom.getElementsByTagName(\"polygon\")[0].style.stroke =\n                    `${this.primaryColor}`;\n                  gDom.getElementsByTagName(\"path\")[0].style.fill =\n                    `${this.primaryColor}`;\n                  gDom.getElementsByTagName(\"path\")[0].style.stroke =\n                    `${this.primaryColor}`;\n                }\n              }\n              for (let k = 0; k < connElements.length; k++) {\n                if (\n                  this.getEleDataId(connElements[k]) === incomingConn.connId\n                ) {\n                  const djsVisualDom = connElements[k].querySelectorAll(\n                    \".djs-visual\"\n                  )[0];\n                  djsVisualDom.getElementsByTagName(\"path\")[0].style.stroke =\n                    `${this.primaryColor}`;\n                  djsVisualDom.getElementsByTagName(\"path\")[0].style[\n                    \"marker-end\"\n                  ] = `url(\"#sequenceflow-blue\")`;\n                }\n              }\n\n              let outgoing = bingonGatway.outgoing;\n              if (!Array.isArray(outgoing) && outgoing) {\n                outgoing = [outgoing];\n              }\n              outgoing = outgoing.filter(item => item.__text === conn.connId);\n              outgoing.forEach(out => {\n                const outgoingConn = this.extraProp.connects.filter(\n                  item => item.connId === out.__text\n                )[0];\n                if (outgoingConn && outgoingConn.endNodeId === node.to) {\n                  for (let k = 0; k < connElements.length; k++) {\n                    if (\n                      this.getEleDataId(connElements[k]) === outgoingConn.connId\n                    ) {\n                      const djsVisualDom = connElements[k].querySelectorAll(\n                        \".djs-visual\"\n                      )[0];\n                      const pathDom = djsVisualDom.getElementsByTagName(\n                        \"path\"\n                      )[0];\n                      pathDom.style.stroke = `${this.primaryColor}`;\n                      pathDom.style[\"marker-end\"] = `url(\"#sequenceflow-blue\")`;\n                      if (\n                        pathDom.style[\"marker-start\"] &&\n                        pathDom.style[\"marker-start\"].indexOf(\n                          \"conditional-default-flow-marker-white-gray\"\n                        ) > -1\n                      ) {\n                        pathDom.style[\n                          \"marker-start\"\n                        ] = `url(\"#conditional-default-flow-marker-white-blue\")`;\n                      }\n                    }\n                  }\n                }\n              });\n            }\n          } else {\n            for (let k = 0; k < connElements.length; k++) {\n              if (\n                this.getEleDataId(connElements[k]) === conn.connId &&\n                conn.startNodeId === node.from\n              ) {\n                const djsVisualDom = connElements[k].querySelectorAll(\n                  \".djs-visual\"\n                )[0];\n                djsVisualDom.getElementsByTagName(\"path\")[0].style.stroke =\n                  `${this.primaryColor}`;\n                djsVisualDom.getElementsByTagName(\"path\")[0].style[\n                  \"marker-end\"\n                ] = `url(\"#sequenceflow-blue\")`;\n              }\n            }\n          }\n        });\n      }\n    },\n    replaceNodeToCustom(shapeElements, nodePath) {\n      const svgDom = document\n        .getElementById(\"js-canvas\")\n        .getElementsByTagName(\"svg\")[0];\n      let defsDom = svgDom.getElementsByTagName(\"defs\")[0];\n      const linerGradientStr = `\n        <marker id=\"conditional-default-flow-marker-white-gray\" viewBox=\"0 0 20 20\" refX=\"0\" refY=\"10\" markerWidth=\"10\" markerHeight=\"10\" orient=\"auto\"><path d=\"M 6 4 L 10 16\" style=\"fill: rgb(205, 205, 205); stroke-width: 1px; stroke-linecap: round; stroke-dasharray: 10000, 1; stroke: rgb(205, 205, 205);\"></path></marker>\n        <marker id=\"conditional-default-flow-marker-white-blue\" viewBox=\"0 0 20 20\" refX=\"0\" refY=\"10\" markerWidth=\"10\" markerHeight=\"10\" orient=\"auto\"><path d=\"M 6 4 L 10 16\" style=\"fill: ${this.primaryColor}; stroke-width: 1px; stroke-linecap: round; stroke-dasharray: 10000, 1; stroke: ${this.primaryColor};\"></path></marker>\n        <marker id=\"sequenceflow-gray\" viewBox=\"0 0 20 20\" refX=\"11\" refY=\"10\" markerWidth=\"10\" markerHeight=\"10\" orient=\"auto\">\n            <circle cx=\"6\" cy=\"10\" r=\"4.5\" style=\"stroke: rgb(205, 205, 205);fill: rgb(205, 205, 205);\"></circle>\n        </marker>\n        <marker id=\"sequenceflow-blue\" viewBox=\"0 0 20 20\" refX=\"11\" refY=\"10\" markerWidth=\"10\" markerHeight=\"10\" orient=\"auto\">\n            <circle cx=\"6\" cy=\"10\" r=\"4.5\" style=\"stroke: ${this.primaryColor};fill: ${this.primaryColor};\"></circle>\n        </marker>\n        <marker id=\"sequenceflow-start\" viewBox=\"0 0 20 20\" refX=\"11\" refY=\"10\" markerWidth=\"10\" markerHeight=\"10\" orient=\"auto\">\n            <circle cx=\"6\" cy=\"10\" r=\"4.5\" style=\"stroke: url('#red-orange');fill: url('#red-orange');\"></circle>\n        </marker>\n        <marker id=\"sequenceflow1\" viewBox=\"0 0 20 20\" refX=\"11\" refY=\"10\" markerWidth=\"10\" markerHeight=\"10\" orient=\"auto\">\n            <circle cx=\"6\" cy=\"10\" r=\"4.5\" style=\"stroke: url('#node1');fill: url('#node1');\"></circle>\n        </marker>\n        <marker id=\"sequenceflow2\" viewBox=\"0 0 20 20\" refX=\"11\" refY=\"10\" markerWidth=\"10\" markerHeight=\"10\" orient=\"auto\">\n            <circle cx=\"6\" cy=\"10\" r=\"4.5\" style=\"stroke: url('#node2');fill: url('#node2');\"></circle>\n        </marker>\n        <marker id=\"sequenceflow3\" viewBox=\"0 0 20 20\" refX=\"11\" refY=\"10\" markerWidth=\"10\" markerHeight=\"10\" orient=\"auto\">\n            <circle cx=\"6\" cy=\"10\" r=\"4.5\" style=\"stroke: url('#node3');fill: url('#node3');\"></circle>\n        </marker>\n        <marker id=\"sequenceflow4\" viewBox=\"0 0 20 20\" refX=\"11\" refY=\"10\" markerWidth=\"10\" markerHeight=\"10\" orient=\"auto\">\n            <circle cx=\"6\" cy=\"10\" r=\"4.5\" style=\"stroke: url('#node4');fill: url('#node4');\"></circle>\n        </marker>\n        <linearGradient id=\"node1\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n            <stop offset=\"0%\" style=\"stop-color:rgb(62,147,157);\n            stop-opacity:1\"></stop>\n            <stop offset=\"100%\" style=\"stop-color:rgb(223,237,242);\n            stop-opacity:1\"></stop>\n        </linearGradient>\n        <linearGradient id=\"node2\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n            <stop offset=\"0%\" style=\"stop-color:rgb(82,61,141);\n            stop-opacity:1\"></stop>\n            <stop offset=\"100%\" style=\"stop-color:rgb(255,211,235);\n            stop-opacity:1\"></stop>\n        </linearGradient>\n        <linearGradient id=\"node3\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n            <stop offset=\"0%\" style=\"stop-color:rgb(44,124,239);\n            stop-opacity:1\"></stop>\n            <stop offset=\"100%\" style=\"stop-color:rgb(185,222,252);\n            stop-opacity:1\"></stop>\n        </linearGradient>\n        <linearGradient id=\"node4\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n            <stop offset=\"0%\" style=\"stop-color:rgb(250,134,126);\n            stop-opacity:1\"></stop>\n            <stop offset=\"100%\" style=\"stop-color:rgb(255,229,202);\n            stop-opacity:1\"></stop>\n        </linearGradient>\n        <linearGradient id=\"red-orange\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n            <stop offset=\"0%\" style=\"stop-color:rgb(255,90,0);\n            stop-opacity:1\"></stop>\n            <stop offset=\"100%\" style=\"stop-color:rgb(255,255,0);\n            stop-opacity:1\"></stop>\n        </linearGradient>\n        `;\n      if (defsDom) {\n        defsDom.innerHTML = defsDom.innerHTML + linerGradientStr;\n      } else {\n        defsDom = document.createElement(\"defs\");\n        defsDom.innerHTML = linerGradientStr;\n        svgDom.appendChild(defsDom);\n      }\n      let nodeStep = 0;\n      const linerGradients = [\"node1\", \"node2\", \"node3\", \"node4\"];\n      for (let i = 0; i < shapeElements.length; i++) {\n        const shapeElement = shapeElements[i];\n        const elementId = this.getEleDataId(shapeElement);\n        if (elementId.indexOf(\"Participant_\") > -1) {\n          const djsVisualDom = shapeElement.querySelectorAll(\".djs-visual\")[0];\n          djsVisualDom.getElementsByTagName(\"rect\")[0].style.stroke = \"none\";\n          djsVisualDom.getElementsByTagName(\"polyline\")[0].style.stroke =\n            \"none\";\n        }\n        if (elementId.indexOf(\"Task_\") > -1) {\n          // 从nodes中找到对应的id的node\n          const node = nodePath.filter(item => item.nodeId === elementId)[0];\n          // 替换节点\n          const index = nodeStep++ % 4;\n          const linearGradient = linerGradients[index];\n          node.linearGradient = linearGradient;\n          node.markerEnd = `sequenceflow${index + 1}`;\n          let icon = ``;\n          if (node.nodeStatus === \"approving\") {\n            if (this.isIE()) {\n              icon = `<text lineheight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif;font-size: 12px;font-weight: normal;fill: rgb(255, 0, 28);\"><tspan x=\"84\" y=\"4\">审批中</tspan></text>`;\n            } else {\n              icon = `<image x=\"90\" y=\"-5\" width=\"16\" xlink:href=\"./assets/approving.png\" />`;\n            }\n          } else if (typeof node.nodeStatus !== \"undefined\") {\n            if (this.isIE()) {\n              icon = `<text lineheight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif;font-size: 12px;font-weight: normal;fill: rgb(137, 189, 119);\"><tspan x=\"84\" y=\"4\">通过</tspan></text>`;\n            } else {\n              icon = `<image x=\"90\" y=\"-5\" width=\"16\" xlink:href=\"./assets/approvePass.jpg\" />`;\n            }\n          }\n          const nodeStr = `<g class=\"djs-visual\"><rect x=\"0\" y=\"0\" width=\"100\" height=\"80\" rx=\"2\" ry=\"2\" style=\"stroke: rgb(226, 226, 226);stroke-width: 2px;fill: white;\"></rect><path d=\"M0.5,27.5 L99.5,27.5 L99.5,2 C99.5,1.17157288 98.8284271,0.5 98,0.5 L2,0.5 C1.17157288,0.5 0.5,1.17157288 0.5,2 L0.5,27.5 Z\" style=\"\n                fill: rgb(226, 226, 226);\n                \"></path><text lineheight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif;font-size: 12px;font-weight: normal;fill: rgb(140, 140, 140);\"><tspan x=\"10\" y=\"18\">${node.name}</tspan></text>${icon}<text x=\"10\" y=\"46\" lineheight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif;font-size: 8px;font-weight: normal;fill: rgb(0, 0, 0);\">\n                <tspan>审批类型：${node.typeName}</tspan>\n                </text><text x=\"10\" y=\"68\" lineheight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif;font-size: 8px;font-weight: normal;fill: rgb(0, 0, 0);\">\n                <tspan>审批人类型：${node.approveTypeMeaning}</tspan>\n                </text>\n                </g>`;\n          // const parser = new DOMParser();\n          // shapeElement.removeChild(shapeElement.querySelectorAll('.djs-visual')[0]);\n          // shapeElement.appendChild(parser.parseFromString(nodeStr, 'image/svg+xml').getElementsByTagName('g')[0]);\n          // shapeElement.innerHTML = nodeStr;\n\n          const dummy = document.createElement(\"div\");\n          dummy.innerHTML = \"<svg>\" + nodeStr + \"</svg>\";\n          const svgChildNodes = dummy.childNodes[0].childNodes;\n          shapeElement.removeChild(\n            shapeElement.querySelectorAll(\".djs-visual\")[0]\n          );\n          shapeElement.appendChild(svgChildNodes[0]);\n        }\n        if (\n          (elementId.indexOf(\"StartEvent_\") > -1 ||\n            elementId.indexOf(\"EndEvent_\") > -1) &&\n          elementId.indexOf(\"_label\") === -1\n        ) {\n          let nodeStr;\n          if (elementId.indexOf(\"StartEvent_\") > -1) {\n            // const name = this.extraProp.processName + '录入';\n            // nodeStr = `<g class=\"djs-visual\"><rect x=\"0\" y=\"0\" width=\"100\" height=\"80\" rx=\"2\" ry=\"2\" style=\"stroke: url('#red-orange');stroke-width: 2px;fill: url('#red-orange');\"></rect>\n            // <rect x=\"10\" y=\"20\" width=\"80\" height=\"40\" rx=\"8\" ry=\"8\" style=\"\n            //     fill: rgba(0, 0, 0, .2);\n            // \"></rect>\n            // <text x=\"14\" y=\"44\" lineheight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif;font-size: 8px;font-weight: normal;fill: rgb(255, 255, 255);\">${name}</text></g>`;\n            nodeStr = `<g class=\"djs-visual\"><circle cx=\"18\" cy=\"18\" r=\"18\" style=\"stroke: ${this.primaryColor};stroke-width: 2px;fill: white;fill-opacity: 0.95;\"></circle><text x=\"10\" y=\"21\" lineheight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif;font-size: 8px;font-weight: normal;fill: ${this.primaryColor};\">开始</text></g>`;\n          } else {\n            // const name = '流程结束';\n            // nodeStr = `<g class=\"djs-visual\"><rect x=\"0\" y=\"0\" width=\"100\" height=\"80\" rx=\"2\" ry=\"2\" style=\"stroke: url('#red-orange');stroke-width: 2px;fill: url('#red-orange');\"></rect>\n            // <rect x=\"10\" y=\"20\" width=\"80\" height=\"40\" rx=\"8\" ry=\"8\" style=\"\n            //     fill: rgba(0, 0, 0, .2);\n            // \"></rect>\n            // <text x=\"32\" y=\"45\" lineheight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif;font-size: 10px;font-weight: normal;fill: rgb(255, 255, 255);\">${name}</text></g>`;\n            nodeStr = `<g class=\"djs-visual\"><circle cx=\"18\" cy=\"18\" r=\"18\" style=\"stroke: rgb(226, 226, 226);stroke-width: 2px;fill: white;fill-opacity: 0.95;\"></circle><text x=\"10\" y=\"21\" lineheight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif;font-size: 8px;font-weight: normal;fill: rgb(226, 226, 226);\">结束</text></g>`;\n          }\n          // const transformArr = shapeElement.getAttribute('transform').split(' ');\n          // transformArr[transformArr.length - 1] = `${parseInt(transformArr[transformArr.length - 1].substr(0, transformArr[transformArr.length - 1].length - 1)) - 22})`;\n          // shapeElement.setAttribute('transform', transformArr.join(' '));\n\n          // shapeElement.innerHTML = nodeStr;\n\n          const dummy = document.createElement(\"div\");\n          dummy.innerHTML = \"<svg>\" + nodeStr + \"</svg>\";\n          const svgChildNodes = dummy.childNodes[0].childNodes;\n          shapeElement.removeChild(\n            shapeElement.querySelectorAll(\".djs-visual\")[0]\n          );\n          shapeElement.appendChild(svgChildNodes[0]);\n        } else if (elementId.indexOf(\"_label\") > -1) {\n          shapeElement\n            .querySelectorAll(\".djs-visual\")[0]\n            .getElementsByTagName(\"text\")[0].style.fill = \"transparent\";\n        }\n      }\n      // this.resetTaskNodeOffset(shapeElements);\n      // this.resetConnectionOffset();\n    },\n    replaceConnToCustom() {\n      const shapeElements = document.querySelectorAll(\n        \".djs-element.djs-connection\"\n      );\n      for (let i = 0; i < shapeElements.length; i++) {\n        const pathDom = shapeElements[i]\n          .querySelectorAll(\".djs-visual\")[0]\n          .getElementsByTagName(\"path\")[0];\n        pathDom.style.stroke = `rgb(236, 236, 236)`;\n        pathDom.style[\"marker-end\"] = `url('#sequenceflow-gray')`;\n        if (\n          pathDom.style[\"marker-start\"] &&\n          pathDom.style[\"marker-start\"].indexOf(\n            \"conditional-default-flow-marker-white-black\"\n          ) > -1\n        ) {\n          pathDom.style[\n            \"marker-start\"\n          ] = `url(\"#conditional-default-flow-marker-white-gray\")`;\n        }\n      }\n    },\n    replaceGatewayToCustom() {\n      const shapeElements = document.querySelectorAll(\".djs-element.djs-shape\");\n      for (let i = 0; i < shapeElements.length; i++) {\n        const shapeElement = shapeElements[i];\n        const elementId = this.getEleDataId(shapeElement);\n        if (elementId.indexOf(\"Gateway\") > -1) {\n          const djsConnVisualDom = shapeElement.querySelectorAll(\n            \".djs-visual\"\n          )[0];\n          djsConnVisualDom.getElementsByTagName(\"polygon\")[0].style.stroke =\n            \"rgb(226, 226, 226)\";\n          djsConnVisualDom.getElementsByTagName(\"path\")[0].style.stroke =\n            \"rgb(226, 226, 226)\";\n          djsConnVisualDom.getElementsByTagName(\"path\")[0].style.fill =\n            \"rgb(226, 226, 226)\";\n        }\n      }\n    },\n    getEleDataId(ele) {\n      if (ele.dataset) {\n        return ele.dataset.elementId;\n      } else {\n        return ele.getAttribute(\"data-element-id\");\n      }\n    },\n    isIE() {\n      return \"ActiveXObject\" in window;\n    }\n  }\n};\n</script>\n<style src=\"./index.less\" lang=\"less\"></style>\n"]}]}