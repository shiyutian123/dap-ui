"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils/methods/xe-utils")),_tools=require("../../tools");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _default={methods:{_filter:function(t,e){_tools.UtilTools.warn("vxe.error.delFunc",["filter","setFilter"]);var i=this.getColumnByField(t);if(i){var l=i.filters;if(l&&e){var r=e(l);return _xeUtils.default.isArray(r)&&(i.filters=_tools.UtilTools.getFilters(r)),this.$nextTick().then(function(){return l})}}return this.$nextTick()},_setFilter:function(t,e){return t.filters&&e&&(t.filters=_tools.UtilTools.getFilters(e)),this.$nextTick()},triggerFilterEvent:function(t,f,e){var i=this.$refs,n=this.filterStore;if(n.column===f&&n.visible)n.visible=!1;else{var a=i.filterWrapper,c=i.tableBody.$el,u=t.target,h=t.pageX,d=_tools.DomTools.getDomNode().visibleWidth;Object.assign(n,{args:e,multiple:f.filterMultiple,options:f.filters,column:f,style:null,visible:!0}),n.isAllSelected=n.options.every(function(t){return t.checked}),n.isIndeterminate=!n.isAllSelected&&n.options.some(function(t){return t.checked}),this.$nextTick(function(){var t,e,i=a.$el.offsetWidth,l=i/2,r={top:"".concat(u.offsetTop+u.offsetParent.offsetTop+u.offsetHeight+8,"px")};if("left"===f.fixed?t=u.offsetLeft+u.offsetParent.offsetLeft-l:"right"===f.fixed?e=u.offsetParent.offsetWidth-u.offsetLeft+(u.offsetParent.offsetParent.offsetWidth-u.offsetParent.offsetLeft)-f.renderWidth-l:t=u.offsetLeft+u.offsetParent.offsetLeft-l-c.scrollLeft,t){var o=h+i-l+32-d;0<o&&(t-=o),r.left="".concat(Math.max(32,t),"px")}else if(e){var s=h+i-l+32-d;0<s&&(e+=s),r.right="".concat(e,"px")}n.style=r})}},confirmFilterEvent:function(t){var e=this.visibleColumn,i=this.filterStore,l=this.remoteFilter,r=this.filterOpts,o=this.scrollXLoad,s=this.scrollYLoad,f=i.column,n=f.property,a=[],c=[];f.filters.forEach(function(t){t.checked&&(a.push(t.value),c.push(t.data))}),i.visible=!1,r.remote||l||(this.handleTableData(!0),this.checkSelectionStatus());var u=[];e.filter(function(t){var e=t.property,i=t.filters,l=[],r=[];i&&i.length&&(i.forEach(function(t){t.checked&&(l.push(t.value),r.push(t.data))}),u.push({column:t,property:e,field:e,prop:e,values:l,datas:r}))}),_tools.UtilTools.emitEvent(this,"filter-change",[{column:f,property:n,field:n,prop:n,values:a,datas:c,filters:u,$table:this}]),this.updateFooter(),(o||s)&&(this.clearScroll(),s&&this.updateScrollYSpace()),this.closeFilter(),this.$nextTick(this.recalculate)},resetFilterEvent:function(t){this.filterStore.options.forEach(function(t){t.checked=!1,t.data=t._data}),this.confirmFilterEvent(t)},_clearFilter:function(t){var e=arguments.length?this.getColumnByField(t):null,i=this.filterStore,l=function(t){t.filters&&t.filters.forEach(function(t){t.checked=!1,t.data=t._data})};return e?l(e):this.visibleColumn.forEach(l),e&&e===i.column||Object.assign(i,{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1}),this.updateData()}}};exports.default=_default;